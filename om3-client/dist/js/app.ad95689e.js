(function(e){function t(t){for(var a,o,l=t[0],s=t[1],c=t[2],d=0,h=[];d<l.length;d++)o=l[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&h.push(r[o][0]),r[o]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);u&&u(t);while(h.length)h.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,o=1;o<n.length;o++){var s=n[o];0!==r[s]&&(a=!1)}a&&(i.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},r={app:0},i=[];function o(e){return l.p+"js/"+({about:"about"}[e]||e)+"."+{about:"2c2bd732"}[e]+".js"}function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=r[e]=[t,a]}));t.push(n[2]=a);var i,s=document.createElement("script");s.charset="utf-8",s.timeout=120,l.nc&&s.setAttribute("nonce",l.nc),s.src=o(e);var c=new Error;i=function(t){s.onerror=s.onload=null,clearTimeout(d);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",c.name="ChunkLoadError",c.type=a,c.request=i,n[1](c)}r[e]=void 0}};var d=setTimeout((function(){i({type:"timeout",target:s})}),12e4);s.onerror=s.onload=i,document.head.appendChild(s)}return Promise.all(t)},l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0613":function(e,t,n){"use strict";n.d(t,"c",(function(){return V})),n.d(t,"b",(function(){return E})),n.d(t,"d",(function(){return B}));var a={};n.r(a),n.d(a,"alterAlgorithm",(function(){return p})),n.d(a,"alterMode",(function(){return y})),n.d(a,"alterLineType",(function(){return O})),n.d(a,"alterSampleMethod",(function(){return x})),n.d(a,"alterTable",(function(){return w})),n.d(a,"updateDisplayChanel",(function(){return M})),n.d(a,"updateDenoiseMethod",(function(){return j})),n.d(a,"addSimpleBrushLineChartObj",(function(){return h})),n.d(a,"updateBrushLineChartObj",(function(){return f})),n.d(a,"addTimeBoxQueryLineChartObjs",(function(){return b})),n.d(a,"updateAllTables",(function(){return C})),n.d(a,"addViewChangeQueryNoPowLineChartObj",(function(){return g})),n.d(a,"addMultiTimeSeriesObj",(function(){return m})),n.d(a,"updateMultiTimeSeriesM4Obj",(function(){return v})),n.d(a,"updateAllFlags",(function(){return T})),n.d(a,"updateMultiLineClassInfo",(function(){return D})),n.d(a,"alterCurrentMulitLineClass",(function(){return N})),n.d(a,"alterCustomTable",(function(){return k})),n.d(a,"updateCustomTableAndInfo",(function(){return R})),n.d(a,"updateDefaultTableAndInfo",(function(){return L})),n.d(a,"alterProgressive",(function(){return S}));n("d81d"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0");var r=n("5502"),i=n("2909"),o=(n("4e82"),n("159b"),n("99af"),n("90d7"),n("ac1f"),n("1276"),n("5377"),n("b0c0"),n("ec26")),l=n("898b"),s=n("2827"),c=n("5c33"),d=n("75b6"),u=n("0e95");function h(e,t){var n={id:Object(o["a"])(),width:t.width,height:t.height,x:60*Math.random(),y:60*Math.random(),data:{rowData:[[0,0]].concat(Object(i["a"])(t.rowData)),val:t.data,min:l["h"](t.data,(function(e){return e.v})),max:l["g"](t.data,(function(e){return e.v}))},timeRange:[t.startTime,t.endTime],algorithm:t.algorithm,isSample:!0,isChoosed:!1};e.simpleBrushLineChartObjs.set(n.id,n),E.emit("add_brush_line_chart_obj",n)}function f(e,t){e.simpleBrushLineChartObjs.set(t.id,t)}function g(e,t){var n=Object(d["c"])(t.data,t.width,Math.pow(2,t.dataManager.maxLevel),null),a=n[0].v,r=n[0].v;n.forEach((function(e){a=Math.max(e.v===1/0?a:e.v,a),r=Math.min(e.v===-1/0?r:e.v,r)}));var i={id:Object(o["a"])(),width:t.width,height:t.height,x:60*Math.random(),y:60*Math.random(),root:t.trendTree,data:{powRenderData:[],noPowRenderData:n,minv:r,maxv:a},timeRange:[0,t.width-1],algorithm:t.algorithm,dataManager:t.dataManager,params:[0,0],historyQueryStack:[[t.dataManager.levelIndexObjs.length-1,0,t.width-1]],currentLevel:Math.ceil(Math.log2(t.width)),isPow:!1,nonUniformColObjs:t.data,maxLen:0,startTime:0,endTime:0};E.emit("add_view_change_query_obj",i)}function b(e,t){for(var n=[],a=[],r=0;r<t.data.length;r++){var i=Object(s["b"])(t.data[r]),l=(i.trendTree,i.dataManager),u=Object(d["d"])([l.maxLevel,Math.floor(Math.log2(t.width))],Object(c["l"])(l.levelIndexObjs[l.levelIndexObjs.length-1].firstNodes[0]),t.width),h=u.renderData,f=u.minv,g=u.maxv;n.push({renderData:h,minv:f,maxv:g}),a.push(l)}var b={id:Object(o["a"])(),width:t.width,height:t.height,x:60*Math.random(),y:60*Math.random(),data:n,timeRange:[0,t.width-1],algorithm:t.algorithm,dataManagers:a,params:[0,0],historyQueryStack:[[a[0].levelIndexObjs.length-1,0,t.width-1]],currentLevel:a[0].levelIndexObjs.length};if(!(n.length>0))throw new Error("cannot load time box data from server");E.emit("add_time_box_query_obj",b)}function m(e,t){var n={id:Object(o["a"])(),width:t.width,height:t.height,x:60*Math.random(),y:60*Math.random(),powRenderData:t.powRenderData,columnInfos:t.columnInfos,timeRange:[0,t.endTime],algorithm:t.algorithm,dataManagers:t.dataManagers,params:[0,0],currentLevel:Math.ceil(Math.log2(t.width)),pow:t.pow,minv:t.minv,maxv:t.maxv,maxLevel:t.maxLevel,className:t.className,lineAmount:t.lineAmount,startTimeStamp:t.startTimeStamp,endTimeStamp:t.endTimeStamp,timeIntervalMs:t.timeIntervalMs};if(!(t.dataManagers.length>0))throw new Error("cannot load time box data from server");E.emit("add_multi_timeseries_obj",n)}function v(e,t){for(var n=[],a=-1/0,r=1/0,i=0;i<t.data.length;i++){var l=Object(d["a"])(t.data[i].res,t.width,0,Math.pow(2,t.maxLevel)-1),s=l.res,c=l.minv,u=l.maxv;n.push({tn:t.data[i].tn,data:s}),a=Math.max(u,a),r=Math.min(c,r)}var h={id:Object(o["a"])(),width:t.width,height:t.height,x:60*Math.random(),y:60*Math.random(),timeRange:t.timeRange,algorithm:"multiTimeSeriesM4",renderData:n,params:[0,0],minv:r,maxv:a,maxLevel:t.maxLevel};if(!(n.length>0))throw new Error("cannot get m4 time series data");E.emit("update_multi_timeseries_m4_obj",h)}function p(e,t){e.currentAlgorithm=t}function x(e,t){e.controlParams.currentSampleMethod=t}function y(e,t){e.controlParams.currentMode=t}function w(e,t){e.controlParams.currentTable=t._value;var n=t._value.split("_");e.controlParams.tableMaxLevel=P.state.tableMaxLevels[n[n.length-1]]}function k(e,t){e.controlParams.currentTable=t;var n=t.split("_");e.controlParams.tableMaxLevel=P.state.tableMaxLevels[n[n.length-1]]}function O(e,t){e.controlParams.currentLineType=t}function M(e,t){e.controlParams.currentChanel=t}function j(e,t){e.controlParams.currentDenoiseMethod=t}function C(e,t){e.allTables=t.tables,t.tables.length>0&&(e.controlParams.currentTable=t.tables[0])}function T(e,t){Object(u["b"])(t.flags),console.log("load flags finish")}function D(e,t){for(var n=new Map,a=0;a<t.info["data"].length;a++)n.set(t.info["data"][a]["name"],t.info["data"][a]);"Default"===e.controlParams.currentMode?e.allMultiLineClassInfoMap=n:e.allCustomMultiLineClassInfoMap=n}function N(e,t){e.controlParams.currentMultiLineClass=t}function R(e,t){for(var n=new Map,a=0;a<t.customTableInfo.length;a++)n.set(t.customTableInfo[a]["name"],t.customTableInfo[a]);e.customTableMap=n,e.allCustomTables=t.customTables.map((function(e){return e.split(".")[1]}))}function L(e,t){for(var n=new Map,a=0;a<t.tableInfo.length;a++)n.set(t.tableInfo[a]["name"],t.tableInfo[a]);e.defaultTableMap=n,e.allDefaultTables=t.tables.map((function(e){return e.split(".")[1]})),e.allDefaultTables.length>0&&(e.controlParams.currentTable=e.allDefaultTables[0])}function S(e,t){e.controlParams.progressive=t}var I=n("fc60"),_=n("1344"),A=[];function V(e){var t=e.map((function(e){return e}));A.push(t)}var E=Object(_["a"])(),B=new WebSocket("ws://127.0.0.1:3001");B.onopen=function(e){console.log("connect success",e)};var P=t["a"]=Object(r["a"])({state:{rdpThreshold:5,currentAlgorithm:"ViewChangeQuery",allAlgoritem:["M4","MinMax","Min","Max","RDP","Avg"],allTables:[],allCustomTables:[],customTableMap:new Map,allDefaultTables:[],defaultTableMap:new Map,allFlags:{},allMultiLineClassInfoMap:new Map,allCustomMultiLineClassInfoMap:new Map,tableMaxLevels:{"1m":20,"2m":21,"4m":22,"8m":23,"1k":24,"16m":24,"32m":25,"64m":26,"1b":27,"3b":28,"10b":30,sensor8:23,test:4},lineChartObjs:new Map,simpleLineChartObjs:new Map,waveletLineChartObjs:new Map,simpleBrushLineChartObjs:new Map,controlParams:{progressive:!1,currentMode:"Default",currentLineType:"Single",currentTable:"",currentCustomTable:"",currentTimeBoxType:"stock46r",currentMultiLineClass:"",tableMaxLevel:20,sampleMethods:["ViewChangeQueryFinal"],displayChanel:["All","MinT","MinV","MaxV","MaxT"],currentChanel:"All",isDenoise:!1,denoiseMethods:["simple_hard","m4_hard","m4_hard_v2","m4_threshold_with_level","m4_wavelet_hard","soft"],currentDenoiseMethod:"m4_hard",currentSampleMethod:"ViewChangeQueryFinal",denoiseThreshold:10,realStart:1354114150080,semanticInterval:6e3,semanticType:"h"}},mutations:a,actions:I,modules:{}})},"06c9":function(e,t,n){"use strict";n("6e47")},"0e95":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return l}));n("d3b7"),n("159b"),n("b64b"),n("caad"),n("2532"),n("ac1f"),n("1276");var a=n("0613"),r={},i=!1;function o(e){i=!0,Object.keys(e).forEach((function(t){r[t]=e[t]}))}function l(e){if(!i)throw new Error("flag unset");var t=e;return e.includes(".")&&(t=e.split(".")[1]),"Custom"===a["a"].state.controlParams.currentMode&&(t="custom_"+t),r[t]}},1:function(e,t){},2827:function(e,t,n){"use strict";n.d(t,"c",(function(){return Z})),n.d(t,"a",(function(){return ee})),n.d(t,"d",(function(){return q})),n.d(t,"e",(function(){return K})),n.d(t,"b",(function(){return $}));var a=n("2909"),r=(n("90d7"),n("99af"),n("fb6a"),n("d3b7"),n("159b"),n("1da1")),i=n("d4ec"),o=n("bee2"),l=(n("96cf"),n("e9c4"),n("d81d"),n("a434"),n("5c33")),s=n("bc3a"),c=n.n(s),d=n("0613"),u=(n("4ec9"),n("3ca3"),n("ddb0"),n("caad"),n("2532"),n("ac1f"),n("1276"),function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(i["a"])(this,e),this.level=t,this.isFull=n,this.loadedDataRange=[],this.firstNodes=[],this.isSelfCheck=!1}return Object(o["a"])(e,[{key:"deleteLoadedDataRange",value:function(e){this.isFull&&(this.isFull=!1);for(var t=0;t<this.loadedDataRange.length;t++)if(this.loadedDataRange[t][0]<=e.index&&this.loadedDataRange[t][1]>=e.index){if(this.loadedDataRange[t][0]===this.loadedDataRange[t][1]){this.loadedDataRange.splice(t,1),this.firstNodes.splice(t,1);break}if(this.loadedDataRange[t][0]===e.index){this.loadedDataRange[t][0]+=1,e.nextSibling.previousSibling=null,e.nextSibling,this.firstNodes[t]=e.nextSibling,this.firstNodes[t]=e.nextSibling;break}if(this.loadedDataRange[t][1]===e.index){this.loadedDataRange[t][1]-=1,null!=e.previousSibling&&(e.previousSibling.nextSibling=null);break}this.firstNodes.splice(t+1,0,e.nextSibling),e.previousSibling.nextSibling=null,this.loadedDataRange.splice(t+1,0,[e.index+1,this.loadedDataRange[t][1]]),this.loadedDataRange[t][1]=e.index-1;break}}},{key:"addLoadedDataRange",value:function(e,t){if(0===this.loadedDataRange.length)return this.loadedDataRange.push(t),void this.firstNodes.push(e);for(var n=this.loadedDataRange.length,a=0;a<n;a++){var r=Math.min(this.loadedDataRange[a][0],t[0]);if(r===this.loadedDataRange[a][0]&&this.loadedDataRange[a][1]+1===t[0]){!0;var i=this.firstNodes[a];while(i.nextSibling)i=i.nextSibling;if(i.index!==e.index-1)throw new Error("index error");if(i.nextSibling=e,this.loadedDataRange[a][1]=t[1],a<n-1)if(t[1]+1===this.loadedDataRange[a+1][0]){this.loadedDataRange[a][1]=this.loadedDataRange[a+1][1];var o=e;while(o.nextSibling)o=o.nextSibling;o.nextSibling=this.firstNodes[a+1],this.firstNodes.splice(a+1,1),this.loadedDataRange.splice(a+1,1)}else t[1],this.loadedDataRange[a+1][0];break}if(r===t[0]&&t[1]+1===this.loadedDataRange[a][0]){!0;var l=e;while(l.nextSibling)l=l.nextSibling;l.nextSibling=this.firstNodes[a],this.firstNodes[a]=e,this.loadedDataRange[a][0]=t[0];break}if(0===a&&t[1]<this.loadedDataRange[a][0]-1){this.loadedDataRange.unshift([t[0],t[1]]),this.firstNodes.unshift(e);break}if(a===n-1&&t[0]>this.loadedDataRange[a][1]+1){this.loadedDataRange.push([t[0],t[1]]),this.firstNodes.push(e);break}if(t[0]>this.loadedDataRange[a][1]+1&&t[1]<this.loadedDataRange[a+1][0]-1){this.loadedDataRange.splice(a+1,0,[t[0],t[1]]),this.firstNodes.splice(a+1,0,e);break}}1===this.firstNodes.length&&this.loadedDataRange[0][1]-this.loadedDataRange[0][0]+1===Math.pow(2,this.level)&&(this.isFull=!0)}},{key:"getDataByIndex",value:function(e,t){for(var n=[],a=0;a<this.firstNodes.length;a++)if(this.loadedDataRange[a][0]<=e&&this.loadedDataRange[a][1]>=t){var r=this.firstNodes[a];while(r){if(r.index>=e&&r.index<=t&&n.push(r.yArray),r.index>t)break;r=r.nextSibling}}return{data:n,start:e,end:t,l:this.level}}},{key:"hasDataForRange",value:function(e,t){if(this.isFull)return{has:!0,range:[]};var n=Object(l["h"])([e,t],this.loadedDataRange);return 0===n.length?{has:!0,range:[]}:{has:!1,range:n}}},{key:"getTreeNodeStartIndex",value:function(e){for(var t=0;t<this.firstNodes.length;t++)if(this.loadedDataRange[t][0]<=e&&this.loadedDataRange[t][1]>=e){var n=this.firstNodes[t];while(n){if(n.index===e)return n;n=n.nextSibling}}return null}},{key:"reCheckIntersect",value:function(e){e.length>2&&console.log("..................................");var t=[];while(e.length>0){for(var n=[],a=0;a<e.length;a++)for(var r=0;r<this.loadedDataRange.length;r++)if(e[a]!==r){var i=Object(l["n"])(this.loadedDataRange[r],this.loadedDataRange[e[a]]);if(i.isIntersect)if(r===e[e.length-1]&&e.splice(e.length-1,1),"second"===i.pos){t.push(r);var o=this.firstNodes[r],s=this.firstNodes[e[a]],c=s;while(c.nextSibling){if(c.nextSibling.index===o.index){c.nextSibling=o;break}c=c.nextSibling}this.loadedDataRange[e[a]][0]=Math.min(this.loadedDataRange[r][0],this.loadedDataRange[e[a]][0]),this.loadedDataRange[e[a]][1]=Math.max(this.loadedDataRange[r][1],this.loadedDataRange[e[a]][1]),n.push(e[a])}else{t.push(e[a]);var d=this.firstNodes[r];while(d.nextSibling){if(d.nextSibling.index===this.firstNodes[e[a]].index){d.nextSibling=this.firstNodes[e[a]];break}d=d.nextSibling}this.loadedDataRange[r][0]=Math.min(this.loadedDataRange[r][0],this.loadedDataRange[e[a]][0]),this.loadedDataRange[r][1]=Math.max(this.loadedDataRange[r][1],this.loadedDataRange[e[a]][1]),n.push(r)}else{var u=Math.min(this.loadedDataRange[r][0],this.loadedDataRange[e[a]][0]);if(u===this.loadedDataRange[r][0]&&this.loadedDataRange[r][1]+1===this.loadedDataRange[e[a]][0]){t.push(e[a]);var h=this.firstNodes[r];while(h.nextSibling)h=h.nextSibling;h.nextSibling=this.firstNodes[e[a]],this.loadedDataRange[r][1]=this.loadedDataRange[e[a]][1],n.push(r)}else if(u===this.loadedDataRange[e[a]][0]&&this.loadedDataRange[e[a]][1]+1===this.loadedDataRange[r][0]){t.push(r);var f=this.firstNodes[e[a]];while(f.nextSibling)f=f.nextSibling;f.nextSibling=this.firstNodes[r],this.loadedDataRange[e[a]][1]=this.loadedDataRange[r][1],n.push(e[a])}}}for(var g=0;g<t.length;g++){for(var b=t[g],m=0;m<n.length;m++)n[m]>b&&n[m]--;this.loadedDataRange.splice(b,1),this.firstNodes.splice(b,1)}t=[],e=n,n=[]}}},{key:"selfCheck",value:function(){if(this.loadedDataRange.length!=this.firstNodes.length)throw new Error("loadedDataRange len not match firtnodes");for(var e=0;e<this.loadedDataRange.length;e++)if(this.loadedDataRange[e][0]!==this.firstNodes[e].index)throw console.log(this),new Error("range not match node index");for(var t=0;t<this.loadedDataRange.length;t++){var n=this.firstNodes[t],a=this.loadedDataRange[t][0];while(n&&a<=this.loadedDataRange[t][1]){if(n.index!==a)throw console.log(this),new Error("range not match node index");n=n.nextSibling,a++}}}},{key:"timeBoxQuery",value:function(e,t){for(var n=0;n<this.loadedDataRange.length;n++)if(this.loadedDataRange[n][0]<=e[0]&&this.loadedDataRange[n][1]>=e[1]){var a=this.firstNodes[n],r=!1;while(a&&a.index<=e[1]){if(a.index>=e[0]){var i=Object(l["d"])(t,[a.yArray[1],a.yArray[2]]);if(3===i&&(r=!0),2===i)return 2}a=a.nextSibling}return r?3:1}throw new Error("error")}}]),e}()),h=31,f=function(){function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0;if(Object(i["a"])(this,e),this.nodeType="O",l&&(this.nodeType=l),this.parent=t,this._leftChild=null,this._rightChild=null,this.yArray=[0,0,0,0],this.difference=null,this.level=0,this.previousSibling=null,this.nextSibling=null,this.nextP=null,this.preP=null,this.trendRange=[0,0],r&&(this.yArray=r),o&&(this.difference=o),t?(this.level=t.level+1,n?(this.index=2*a,this.parent._leftChild=this):(this.index=2*a+1,this.parent._rightChild=this)):this.index=0,this.level>h)throw new Error("This level is protected");this.timeRange=[],null===t||"NO"===t.gapFlag?this.gapFlag="NO":"L"===t.gapFlag?"LEFTNULL"===t.nodeType?this.gapFlag=n?"NO":"L":this.gapFlag=n?"L":"NO":"RIGHTNULL"===t.nodeType?this.gapFlag=n?"R":"NO":this.gapFlag=n?"NO":"R"}return Object(o["a"])(e,[{key:"isLeafNode",get:function(){return this.level>=h-2}},{key:"levelNums",get:function(){return Math.pow(2,this.level)}},{key:"getTimeRange",value:function(e){if(this.timeRange.length>0)return[this.timeRange[0],this.timeRange[1]];var t=e/Math.pow(2,this.level);return this.timeRange[0]=this.index*t,this.timeRange[1]=this.timeRange[0]+t-1,[this.timeRange[0],this.timeRange[1]]}},{key:"data",value:function(e){var t=this;return this.level<=h?this.yArray.map((function(n,a){return{x:t.index-e,y:n}})):[{x:this.index-e,y:this.yArray[0]},{x:this.index-e,y:this.yArray[3]}]}}]),e}(),g=function(){function e(t,n){Object(i["a"])(this,e),this.canUseT=!1,this.isOk=!1,this.tOne=0,this.tTwo=0,this.leftMax=-1/0,this.leftMin=1/0,this.rightMax=-1/0,this.rightMin=1/0,this.firstNode=t._rightChild,this.secondNode=n._leftChild,t._leftChild.yArray[1]<this.leftMin&&(this.leftMin=t._leftChild.yArray[1]),t._leftChild.yArray[2]>this.leftMax&&(this.leftMax=t._leftChild.yArray[2]),n._rightChild.yArray[1]<this.rightMin&&(this.rightMin=n._rightChild.yArray[1]),n._rightChild.yArray[2]>this.rightMax&&(this.rightMax=n._rightChild.yArray[2])}return Object(o["a"])(e,[{key:"canCut",value:function(){var e=this.firstNode.yArray[1]<this.secondNode.yArray[1]?this.firstNode.yArray[1]:this.secondNode.yArray[1],t=this.firstNode.yArray[2]>this.secondNode.yArray[2]?this.firstNode.yArray[2]:this.secondNode.yArray[2];return e>=this.leftMin&&e>=this.rightMin&&t<=this.leftMax&&t<=this.rightMax&&(this.isOk=!0,!0)}},{key:"updateTwoNode",value:function(e,t){this.firstNode=e._rightChild,this.secondNode=t._leftChild,e._leftChild.yArray[1]<this.leftMin&&(this.leftMin=e._leftChild.yArray[1]),e._leftChild.yArray[2]>this.leftMax&&(this.leftMax=e._leftChild.yArray[2]),t._rightChild.yArray[1]<this.rightMin&&(this.rightMin=t._rightChild.yArray[1]),t._rightChild.yArray[2]>this.rightMax&&(this.rightMax=t._rightChild.yArray[2])}},{key:"lastLevelUpdateMinMax",value:function(){this.tTwo=this.secondNode.yArray[0],this.tOne=this.firstNode.yArray[3],this.canUseT=!0}},{key:"updateLeftMinMax",value:function(e){e.yArray[1]<this.leftMin&&(this.leftMin=e.yArray[1]),e.yArray[2]>this.leftMax&&(this.leftMax=e.yArray[2])}},{key:"updateRighetMinMax",value:function(e){e.yArray[1]<this.rightMin&&(this.rightMin=e.yArray[1]),e.yArray[2]>this.rightMax&&(this.rightMax=e.yArray[2])}}]),e}();n("4e82");function b(e,t){return m.apply(this,arguments)}function m(){return m=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var a,r,i,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,c.a.post("postgres/line_chart/batchLevelDataProgressiveWavelet",{table_name:n.dataName.includes(".")?n.dataName.split(".")[1]:n.dataName,losedDataInfo:JSON.stringify({data:t}),line_type:d["a"].state.controlParams.currentLineType});case 4:if(a=e.sent,r=a.data,i=r.data,o=[],i&&i[0]&&i[0].length>0)for(l=0;l<i[0].length;l++)o.push({l:n.maxLevel-i[0][l],i:i[1][l],dif:[i[2][l],i[3][l],i[4][l],i[5][l]]});return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function v(e,t){return p.apply(this,arguments)}function p(){return p=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var a,r,i,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,c.a.post("postgres/line_chart/batchLevelDataProgressiveWaveletRawMinMax",{table_name:n.dataName.includes(".")?n.dataName.split(".")[1]:n.dataName,losedDataInfo:JSON.stringify({data:t})});case 4:if(a=e.sent,r=a.data,i=r.data,o=[],i&&i[0]&&i[0].length>0)for(l=0;l<i[0].length;l++)o.push({l:n.maxLevel-i[0][l],i:i[1][l],dif:[i[2][l],i[3][l],i[4][l],i[5][l]]});return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function x(e,t){return y.apply(this,arguments)}function y(){return y=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var a,r,i,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,c.a.post("postgres/line_chart/batchLevelDataProgressiveWavelet1",{table_name:n.dataName.includes(".")?n.dataName.split(".")[1]:n.dataName,losedDataInfo:JSON.stringify({data:t})});case 4:if(a=e.sent,r=a.data,i=r.data,o=[],i&&i[0]&&i[0].length>0)for(l=0;l<i[0].length;l++)o.push({l:n.maxLevel-i[0][l],i:i[1][l],dif:[i[2][l],i[3][l],i[4][l],i[5][l]]});return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function w(e,t,n){return k.apply(this,arguments)}function k(){return k=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,a){var r,i,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("postgres/line_chart/trendQueryProgressiveWavelet?table_name=".concat(this.dataName,"&current_level=").concat(t,"&start_time=").concat(n,"&end_time=").concat(a));case 2:for(r=e.sent,i=r.data,o=[],l=0;l<i[0].length;l++)o.push([i[0][l],i[1][l],i[2][l],i[3][l]]);return e.abrupt("return",o);case 7:case"end":return e.stop()}}),e,this)}))),k.apply(this,arguments)}function O(e,t,n,a,r){if(0===e.length)return[];var i={url:n,tn:t.includes(".")?t.split(".")[1]:t,data:JSON.stringify({data:e}),tagName:r};(new Date).getTime();return new Promise((function(e,t){d["d"].send(JSON.stringify(i)),d["d"].onmessage=function(t){var n=JSON.parse(t.data)["data"],r=[];if(n&&n[0]&&n[0].length>0)for(var i=0;i<n[0].length;i++)r.push({l:a-n[0][i],i:n[1][i],dif:[n[2][i],n[3][i],n[4][i],n[5][i]]});e(r)}}))}function M(e,t,n,a,r){if(0===e.length)return[];var i={url:n,tn:t.includes(".")?t.split(".")[1]:t,data:JSON.stringify({data:e}),tagName:r,line_type:d["a"].state.controlParams.currentLineType,mode:d["a"].state.controlParams.currentMode,user_cookie:Object(l["m"])()};(new Date).getTime();return new Promise((function(e,t){d["d"].send(JSON.stringify(i)),d["d"].onmessage=function(t){var n=JSON.parse(t.data)["data"],a=[];if(n&&n[0]&&n[0].length>0)for(var r=0;r<n[0].length;r++)a.push({l:n[0][r],i:n[1][r],dif:[0,n[2][r],n[3][r],0]});e(a)}}))}function j(e,t,n,a,r){return C.apply(this,arguments)}function C(){return C=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,a,r,i){var o,l,s,u,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,c.a.post("postgres/line_chart/batchLoadMinMaxMissWithPostForMultiLineType",{table_name:n.includes(".")?n.split(".")[1]:n,losedDataInfo:{data:t},tagName:i,line_type:d["a"].state.controlParams.currentLineType,mode:d["a"].state.controlParams.currentMode});case 4:if(o=e.sent,l=o.data,s=l.data,u=[],s&&s[0]&&s[0].length>0)for(h=0;h<s[0].length;h++)u.push({l:s[0][h],i:s[1][h],dif:[0,s[2][h],s[3][h],0]});return e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}var T=[];function D(e,t){return N.apply(this,arguments)}function N(){return N=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var a,r,i,o,l,s,c,d,h,g,b,m,v,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,x(t,n);case 2:a=e.sent,r=0,i=0;case 5:if(!(i<t.length)){e.next=55;break}t[i],o=n.levelIndexObjs[t[i][0]].getTreeNodeStartIndex(t[i][1]),l=o,s=[],c=t[i][1];case 11:if(!(c<=t[i][2])){e.next=42;break}if((null===(d=l)||void 0===d?void 0:d.index)!==c||c!==a[r].i||l.level!==a[r].l){e.next=34;break}if(l.difference=a[r].dif,h=[0,0,0,0],g=[0,0,0,0],h[0]=l.yArray[0],g[0]=l.yArray[0]-l.difference[0],h[3]=l.yArray[3]+l.difference[3],g[3]=l.yArray[3],l.difference[1]<0?(h[1]=l.yArray[1],g[1]=l.yArray[1]-l.difference[1]):(h[1]=l.yArray[1]+l.difference[1],g[1]=l.yArray[1]),l.difference[2]<0?(h[2]=l.yArray[2]+l.difference[2],g[2]=l.yArray[2]):(h[2]=l.yArray[2],g[2]=l.yArray[2]-l.difference[2]),b=new f(l,!0,l.index,h,null),m=new f(l,!1,l.index,g,null),s.push(b),s.push(m),n.cacheMap.set(b.index,b),n.cacheMap.set(m.index,m),l=l.nextSibling,r++,!(null===l||r>=a.length)){e.next=32;break}return e.abrupt("break",42);case 32:e.next=39;break;case 34:throw console.log(t[i][0]-1,Math.floor(t[i][1]/2)),console.log("lose range:",t,l,null===(v=l)||void 0===v?void 0:v.index,c),console.log(n.levelIndexObjs),new Error("dif not match node");case 39:c++,e.next=11;break;case 42:p=0;case 43:if(!(p<s.length-1)){e.next=51;break}if(s[p].nextSibling=s[p+1],s[p+1].previousSibling=s[p],s[p].index==s[p+1].index-1){e.next=48;break}throw new Error("sibling index error");case 48:p++,e.next=43;break;case 51:n.levelIndexObjs[t[i][0]+1]||(n.levelIndexObjs[t[i][0]+1]=new u(t[i][0]+1,!1)),n.levelIndexObjs[t[i][0]+1].addLoadedDataRange(s[0],[s[0].index,s[s.length-1].index]);case 52:i++,e.next=5;break;case 55:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function R(e,t){return L.apply(this,arguments)}function L(){return L=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var a,r,i,o,l,s,c,d,h,g,m,v,p,x,y,w,k;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b(t,n);case 2:a=e.sent,r=0,i=0,o=0;case 6:if(!(o<t.length)){e.next=60;break}t[o],l=n.levelIndexObjs[t[o][0]-1].getTreeNodeStartIndex(Math.floor(t[o][1]/2)),s=l,c=[],d=Math.floor(t[o][1]/2);case 12:if(!(d<=Math.floor(t[o][2]/2))){e.next=44;break}if((null===(h=s)||void 0===h?void 0:h.index)!==d||d!==a[r].i||s.level!==a[r].l){e.next=36;break}if(s.difference=a[r].dif,g=[0,0,0,0],m=[0,0,0,0],g[0]=s.yArray[0],m[0]=s.yArray[0]-s.difference[0],g[3]=s.yArray[3]+s.difference[3],m[3]=s.yArray[3],s.difference[1]<0?(g[1]=s.yArray[1],m[1]=s.yArray[1]-s.difference[1]):(g[1]=s.yArray[1]+s.difference[1],m[1]=s.yArray[1]),s.difference[2]<0?(g[2]=s.yArray[2]+s.difference[2],m[2]=s.yArray[2]):(g[2]=s.yArray[2],m[2]=s.yArray[2]-s.difference[2]),v=new f(s,!0,s.index,g,null),p=new f(s,!1,s.index,m,null),n.cacheMap.set(v.index,v),n.cacheMap.set(p.index,p),i+=2,c.push(v),c.push(p),s=s.nextSibling,r++,!(null===s||r>=a.length)){e.next=34;break}return e.abrupt("break",44);case 34:e.next=41;break;case 36:throw console.log(t[o][0]-1,Math.floor(t[o][1]/2)),console.log("lose range:",t,s,null===(x=s)||void 0===x?void 0:x.index,d),console.log(n.levelIndexObjs),new Error("dif not match node");case 41:d++,e.next=12;break;case 44:y=0;case 45:if(!(y<c.length-1)){e.next=56;break}if(c[y].nextSibling=c[y+1],c[y+1].previousSibling=c[y],c[y].index==c[y+1].index-1){e.next=50;break}throw new Error("sibling index error");case 50:w=c[y+1].yArray[2]-c[y].yArray[1],k=c[y+1].yArray[1]-c[y].yArray[2],c[y].trendRange=w<k?[c[y+1].yArray[2],c[y].yArray[1],c[y+1].yArray[1],c[y].yArray[2]]:[c[y+1].yArray[1],c[y].yArray[2],c[y+1].yArray[2],c[y].yArray[1]];case 53:y++,e.next=45;break;case 56:n.levelIndexObjs[t[o][0]]||(n.levelIndexObjs[t[o][0]]=new u(t[o][0],!1)),n.levelIndexObjs[t[o][0]].addLoadedDataRange(c[0],[c[0].index,c[c.length-1].index]);case 57:o++,e.next=6;break;case 60:n.addNodeNum(i);case 61:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}function S(e,t){return I.apply(this,arguments)}function I(){return I=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var a,r,i,o,l,s,c,d,h,g,b,m,p,x,y;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v(t,n);case 2:a=e.sent,r=0,i=0,o=0;case 6:if(!(o<t.length)){e.next=48;break}t[o],l=n.levelIndexObjs[t[o][0]-1].getTreeNodeStartIndex(Math.floor(t[o][1]/2)),s=l,c=[],d=Math.floor(t[o][1]/2);case 12:if(!(d<=Math.floor(t[o][2]/2))){e.next=35;break}if((null===(h=s)||void 0===h?void 0:h.index)!==d||2*d!==a[r].i||s.level+1!==a[r].l){e.next=27;break}if(s.difference=a[r].dif,g=a[r].dif,b=a[r+1].dif,m=new f(s,!0,s.index,g,null),p=new f(s,!1,s.index,b,null),c.push(m),c.push(p),s=s.nextSibling,r+=2,!(null===s||r>=a.length)){e.next=25;break}return e.abrupt("break",35);case 25:e.next=32;break;case 27:throw console.log(t[o][0]-1,Math.floor(t[o][1]/2)),console.log("lose range:",t,s,null===(x=s)||void 0===x?void 0:x.index,d),console.log(n.levelIndexObjs),new Error("dif not match node");case 32:d++,e.next=12;break;case 35:y=0;case 36:if(!(y<c.length-1)){e.next=44;break}if(c[y].nextSibling=c[y+1],c[y+1].previousSibling=c[y],c[y].index==c[y+1].index-1){e.next=41;break}throw new Error("sibling index error");case 41:y++,e.next=36;break;case 44:n.levelIndexObjs[t[o][0]]||(n.levelIndexObjs[t[o][0]]=new u(t[o][0],!1)),n.levelIndexObjs[t[o][0]].addLoadedDataRange(c[0],[c[0].index,c[c.length-1].index]);case 45:o++,e.next=6;break;case 48:n.addNodeNum(i);case 49:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function _(e,t){return A.apply(this,arguments)}function A(){return A=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var a,r,i,o,l,s,c,d,h,g,b,m,v,p,x,y,k;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.length<=0)){e.next=2;break}return e.abrupt("return");case 2:a=0,r=t.length-1;case 4:if(!(r>=0)){e.next=63;break}return t[r],e.next=8,w(t[r][0]-1,Math.floor(t[r][1]/2),Math.floor(t[r][2]/2));case 8:i=e.sent,o=n.levelIndexObjs[t[r][0]-1].getTreeNodeStartIndex(Math.floor(t[r][1]/2)),l=o,s=[],c=0,d=Math.floor(t[r][1]/2);case 14:if(!(d<=Math.floor(t[r][2]/2))){e.next=46;break}if((null===(h=l)||void 0===h?void 0:h.index)!==d){e.next=38;break}if(l.difference=i[c],g=[0,0,0,0],b=[0,0,0,0],g[0]=l.yArray[0],b[0]=l.yArray[0]-l.difference[0],g[3]=l.yArray[3]+l.difference[3],b[3]=l.yArray[3],l.difference[1]<0?(g[1]=l.yArray[1],b[1]=l.yArray[1]-l.difference[1]):(g[1]=l.yArray[1]+l.difference[1],b[1]=l.yArray[1]),l.difference[2]<0?(g[2]=l.yArray[2]+l.difference[2],b[2]=l.yArray[2]):(g[2]=l.yArray[2],b[2]=l.yArray[2]-l.difference[2]),m=new f(l,!0,l.index,g,null),v=new f(l,!1,l.index,b,null),s.push(m),s.push(v),n.cacheMap.set(m.index,m),n.cacheMap.set(v.index,v),a+=2,l=l.nextSibling,null!==l){e.next=35;break}return e.abrupt("break",46);case 35:c++,e.next=43;break;case 38:throw console.log(t[r][0]-1,Math.floor(t[r][1]/2)),console.log("lose range:",t,l,null===(p=l)||void 0===p?void 0:p.index,d),console.log(n.levelIndexObjs),new Error("dif not match node");case 43:d++,e.next=14;break;case 46:x=0;case 47:if(!(x<s.length-1)){e.next=59;break}if(s[x].nextSibling=s[x+1],s[x].index==s[x+1].index-1){e.next=51;break}throw new Error("sibling index error");case 51:s[x+1].previousSibling=s[x],y=s[x+1].yArray[2]-s[x].yArray[1],k=s[x+1].yArray[1]-s[x].yArray[2],s[x].trendRange=y<k?[s[x+1].yArray[2],s[x].yArray[1],s[x+1].yArray[1],s[x].yArray[2]]:[s[x+1].yArray[1],s[x].yArray[2],s[x+1].yArray[2],s[x].yArray[1]];case 56:x++,e.next=47;break;case 59:n.levelIndexObjs[t[r][0]]||(n.levelIndexObjs[t[r][0]]=new u(t[r][0],!1)),n.levelIndexObjs[t[r][0]].addLoadedDataRange(s[0],[s[0].index,s[s.length-1].index]);case 60:r--,e.next=4;break;case 63:n.addNodeNum(a);case 64:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}var V=0,E="";function B(e,t,n){return P.apply(this,arguments)}function P(){return P=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,a){var r,i,o,l,s,c,d,h,g,b,m,v,p,x;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("empty"!==a){e.next=6;break}return T.push(V),6==T.length&&(T=[]),V=0,console.log("load node nums:",T),e.abrupt("return");case 6:return e.next=8,O(t,n.dataName,"level_load_data",n.maxLevel,a);case 8:r=e.sent,E===a||(E=a),V+=r.length,i=0,o=0;case 12:if(!(o<t.length)){e.next=62;break}t[o],l=n.levelIndexObjs[t[o][0]].getTreeNodeStartIndex(t[o][1]),s=l,c=[],d=t[o][1];case 18:if(!(d<=t[o][2])){e.next=49;break}if((null===(h=s)||void 0===h?void 0:h.index)!==d||d!==r[i].i||s.level!==r[i].l){e.next=41;break}if(s.difference=r[i].dif,g=[0,0,0,0],b=[0,0,0,0],g[0]=s.yArray[0],b[0]=s.yArray[0]-s.difference[0],g[3]=s.yArray[3]+s.difference[3],b[3]=s.yArray[3],s.difference[1]<0?(g[1]=s.yArray[1],b[1]=s.yArray[1]-s.difference[1]):(g[1]=s.yArray[1]+s.difference[1],b[1]=s.yArray[1]),s.difference[2]<0?(g[2]=s.yArray[2]+s.difference[2],b[2]=s.yArray[2]):(g[2]=s.yArray[2],b[2]=s.yArray[2]-s.difference[2]),m=new f(s,!0,s.index,g,null),v=new f(s,!1,s.index,b,null),c.push(m),c.push(v),n.lruCache.set(m.level+"_"+m.index,m),n.lruCache.set(v.level+"_"+v.index,v),s=s.nextSibling,i++,!(null===s||i>=r.length)){e.next=39;break}return e.abrupt("break",49);case 39:e.next=46;break;case 41:throw console.log(t[o][0]-1,Math.floor(t[o][1]/2)),console.log("lose range:",t,s,null===(p=s)||void 0===p?void 0:p.index,d),console.log(n.levelIndexObjs),new Error("dif not match node");case 46:d++,e.next=18;break;case 49:x=0;case 50:if(!(x<c.length-1)){e.next=58;break}if(c[x].nextSibling=c[x+1],c[x+1].previousSibling=c[x],c[x].index==c[x+1].index-1){e.next=55;break}throw new Error("sibling index error");case 55:x++,e.next=50;break;case 58:n.levelIndexObjs[t[o][0]+1]||(n.levelIndexObjs[t[o][0]+1]=new u(t[o][0]+1,!1)),n.levelIndexObjs[t[o][0]+1].addLoadedDataRange(c[0],[c[0].index,c[c.length-1].index]);case 59:o++,e.next=12;break;case 62:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function F(e,t,n){return U.apply(this,arguments)}function U(){return U=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,a){var r,i,o,l,s,c,h,g,b,m,v,p,x,y,w,k;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("Single"!==d["a"].state.controlParams.currentLineType){e.next=6;break}return e.next=3,M(t,n.dataName,"level_load_data_min_max_miss",n.maxLevel,a);case 3:r=e.sent,e.next=9;break;case 6:return e.next=8,j(t,n.dataName,"level_load_data_min_max_miss",n.maxLevel,a);case 8:r=e.sent;case 9:i=0,o=0;case 11:if(!(o<t.length)){e.next=62;break}t[o],l=n.levelIndexObjs[t[o][0]].getTreeNodeStartIndex(t[o][1]),s=l,c=[],h=t[o][1];case 17:if(!(h<=t[o][2])){e.next=49;break}if((null===(g=s)||void 0===g?void 0:g.index)!==h||h!==r[i].i||s.level!==r[i].l){e.next=41;break}if(b=r[i].dif,m="O",null===b[1]&&null===b[2]?m="NULL":null===b[1]?(m="LEFTNULL",s.gapFlag="L"):null===b[2]&&(m="RIGHTNULL",s.gapFlag="R"),"O"!==m&&(s.nodeType=m),s.difference=r[i].dif,v=[void 0,void 0,void 0,void 0],p=[void 0,void 0,void 0,void 0],"O"===m?(s.difference[1]<0?(v[1]=s.yArray[1],p[1]=s.yArray[1]-s.difference[1]):(v[1]=s.yArray[1]+s.difference[1],p[1]=s.yArray[1]),s.difference[2]<0?(v[2]=s.yArray[2]+s.difference[2],p[2]=s.yArray[2]):(v[2]=s.yArray[2],p[2]=s.yArray[2]-s.difference[2])):"LEFTNULL"==m?(p[1]=s.yArray[1],p[2]=s.yArray[2]):"RIGHTNULL"==m&&(v[1]=s.yArray[1],v[2]=s.yArray[2]),x=new f(s,!0,s.index,v,null),"LEFTNULL"!==s.nodeType&&"NULL"!==s.nodeType||(x.nodeType="NULL"),y=new f(s,!1,s.index,p,null),"RIGHTNULL"!==s.nodeType&&"NULL"!=s.nodeType||(y.nodeType="NULL"),c.push(x),c.push(y),n.lruCache.set(x.level+"_"+x.index,x),n.lruCache.set(y.level+"_"+y.index,y),s=s.nextSibling,i++,!(null===s||i>=r.length)){e.next=39;break}return e.abrupt("break",49);case 39:e.next=46;break;case 41:throw console.log(t[o][0]-1,Math.floor(t[o][1]/2)),console.log("lose range:",t,s,null===(w=s)||void 0===w?void 0:w.index,h),console.log(n.levelIndexObjs),new Error("dif not match node");case 46:h++,e.next=17;break;case 49:k=0;case 50:if(!(k<c.length-1)){e.next=58;break}if(c[k].nextSibling=c[k+1],c[k+1].previousSibling=c[k],c[k].index==c[k+1].index-1){e.next=55;break}throw new Error("sibling index error");case 55:k++,e.next=50;break;case 58:n.levelIndexObjs[t[o][0]+1]||(n.levelIndexObjs[t[o][0]+1]=new u(t[o][0]+1,!1)),n.levelIndexObjs[t[o][0]+1].addLoadedDataRange(c[0],[c[0].index,c[c.length-1].index]);case 59:o++,e.next=11;break;case 62:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}function X(e,t,n){return z.apply(this,arguments)}function z(){return z=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,a){var r,i,o,l,s,c,h,g,b,m,v,p,x,y,w,k,O;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("Single"!==d["a"].state.controlParams.currentLineType){e.next=6;break}return e.next=3,M(t,n.dataName,"level_load_data_min_max_miss",n.maxLevel,a);case 3:r=e.sent,e.next=9;break;case 6:return e.next=8,j(t,n.dataName,"level_load_data_min_max_miss",n.maxLevel,a);case 8:r=e.sent;case 9:i=0,o=0;case 11:if(!(o<t.length)){e.next=59;break}t[o],l=n.levelIndexObjs[t[o][0]].getTreeNodeStartIndex(t[o][1]),s=l,c=[],h=t[o][1];case 17:if(!(h<=t[o][2])){e.next=54;break}if("NULL"!==s.nodeType){e.next=21;break}return s=s.nextSibling,e.abrupt("continue",51);case 21:if((null===(g=s)||void 0===g?void 0:g.index)===h&&h===r[i].i){e.next=23;break}return e.abrupt("continue",51);case 23:if((null===(b=s)||void 0===b?void 0:b.index)!==h||h!==r[i].i||s.level!==r[i].l){e.next=46;break}if(m=r[i].dif,v="O",null===m[1]&&null===m[2]?v="NULL":null===m[1]?(v="LEFTNULL",s.gapFlag="L"):null===m[2]&&(v="RIGHTNULL",s.gapFlag="R"),"O"!==v&&(s.nodeType=v),s.difference=r[i].dif,p=[void 0,void 0,void 0,void 0],x=[void 0,void 0,void 0,void 0],"O"===v?(s.difference[1]<0?(p[1]=s.yArray[1],x[1]=s.yArray[1]-s.difference[1]):(p[1]=s.yArray[1]+s.difference[1],x[1]=s.yArray[1]),s.difference[2]<0?(p[2]=s.yArray[2]+s.difference[2],x[2]=s.yArray[2]):(p[2]=s.yArray[2],x[2]=s.yArray[2]-s.difference[2])):"LEFTNULL"==v?(x[1]=s.yArray[1],x[2]=s.yArray[2]):"RIGHTNULL"==v&&(p[1]=s.yArray[1],p[2]=s.yArray[2]),y=new f(s,!0,s.index,p,null),"LEFTNULL"!==s.nodeType&&"NULL"!==s.nodeType||(y.nodeType="NULL"),w=new f(s,!1,s.index,x,null),"RIGHTNULL"!==s.nodeType&&"NULL"!=s.nodeType||(w.nodeType="NULL"),c.push(y),c.push(w),n.lruCache.set(y.level+"_"+y.index,y),n.lruCache.set(w.level+"_"+w.index,w),s=s.nextSibling,i++,!(null===s||i>=r.length)){e.next=44;break}return e.abrupt("break",54);case 44:e.next=51;break;case 46:throw console.log(t[o][0]-1,Math.floor(t[o][1]/2)),console.log("lose range:",t,s,null===(k=s)||void 0===k?void 0:k.index,h),console.log(n.levelIndexObjs),new Error("dif not match node");case 51:h++,e.next=17;break;case 54:for(O=0;O<c.length-1;O++)c[O].nextSibling=c[O+1],c[O+1].previousSibling=c[O],c[O].index!=c[O+1].index-1&&console.error("sibling index error");n.levelIndexObjs[t[o][0]+1]||(n.levelIndexObjs[t[o][0]+1]=new u(t[o][0]+1,!1)),n.levelIndexObjs[t[o][0]+1].addLoadedDataRange(c[0],[c[0].index,c[c.length-1].index]);case 56:o++,e.next=11;break;case 59:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}var H=n("1f25"),Y=n.n(H),W=n("0e95"),G=[],Q=[],J=function(){function e(t,n,a){Object(i["a"])(this,e),this.levelIndexObjs=t,this.maxLevel=a||d["a"].state.controlParams.tableMaxLevel,this.realDataRowNum=Math.pow(2,a||d["a"].state.controlParams.tableMaxLevel),this.dataName=n,this.isShow=!0,this.columnInfos=null,this.curNodeNum=0,this.dataCache=new Array,this.cacheMap=new Map,this.cacheHead=null,this.cacheTail=null,this.maxCacheNodeNum=1e5,this.lruCache=null,this.initCache(),this.deleteQueue=[],this.isIntering=!1,this.isEvicting=!1}return Object(o["a"])(e,[{key:"getDataMockServer",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,i,o,l,s,c,d,u,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.maxLevel-t.level,a=t.level,r=n,!(r<1)){e.next=5;break}throw new Error("level out of range");case 5:return i=Math.pow(2,Math.ceil(Math.log2(t.width))),o=t.offset,l=t.end,s=t.start,c=s+o,d=c-i/4,u=c+i/4,d<=s&&(d=s,u=s+i/2-1),u>=l&&(u=l,d=l-i/2+1),e.next=16,this.getData(a+1,2*d,2*d+i-1);case 16:return h=e.sent,e.abrupt("return",[[o,2*d],h]);case 18:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getData",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,a,r){var i,o,l,s,c,d,u,h,f,g,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t>this.maxLevel)){e.next=2;break}return e.abrupt("return",[]);case 2:i=2,o=n,l=a,s=t-1;case 6:if(!(s>1)){e.next=15;break}if(o=Math.floor(o/2),l=Math.floor(l/2),!this.levelIndexObjs[s]||!this.levelIndexObjs[s].isFull){e.next=12;break}return i=s,e.abrupt("break",15);case 12:s--,e.next=6;break;case 15:c=i+1;case 16:if(!(c<=t)){e.next=25;break}return o*=2,l=2*l+1,d=this.checkLoadedDataInSingalLevel([[c,o,l]]),e.next=22,R(d,this);case 22:c++,e.next=16;break;case 25:if(!this.levelIndexObjs[t]){e.next=43;break}if(!r){e.next=30;break}return e.abrupt("return",{data:[],start:0,end:0,l:0});case 30:if("sensor8"!==this.dataName){e.next=40;break}for(u=Math.ceil(Math.log2(Math.pow(2,this.maxLevel)-this.realDataRowNum)),t>=this.maxLevel-u&&(h=t-(this.maxLevel-u),f=Math.pow(2,h),a>=Math.pow(2,t)-f&&(a=Math.pow(2,t)-f-1)),g=this.realDataRowNum-1,b=this.maxLevel;b>=t;b--)g=Math.floor(g/2);if(!(a<n)){e.next=37;break}return e.abrupt("return",[]);case 37:return e.abrupt("return",this.levelIndexObjs[t].getDataByIndex(n,a));case 40:return e.abrupt("return",this.levelIndexObjs[t].getDataByIndex(n,a));case 41:e.next=44;break;case 43:return e.abrupt("return",{data:[],start:0,end:0,l:0});case 44:case"end":return e.stop()}}),e,this)})));function t(t,n,a,r){return e.apply(this,arguments)}return t}()},{key:"getDataMinMaxMiss",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,a,r){var i,o,l,s,c,d,u,h,f,g,b,m,v,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t>this.maxLevel)){e.next=2;break}return e.abrupt("return",[]);case 2:i=2,o=n,l=a,s=t-1;case 6:if(!(s>1)){e.next=15;break}if(o=Math.floor(o/2),l=Math.floor(l/2),!this.levelIndexObjs[s]||!this.levelIndexObjs[s].isFull){e.next=12;break}return i=s,e.abrupt("break",15);case 12:s--,e.next=6;break;case 15:c=i+1;case 16:if(!(c<=t)){e.next=27;break}for(o*=2,l=2*l+1,d=this.checkLoadedDataInSingalLevel([[c,o,l]]),u=[],h=0;h<d.length;h++)f=d[h],u.push([f[0]-1,Math.floor(f[1]/2),Math.floor(f[2]/2)]);return e.next=24,X(u,this);case 24:c++,e.next=16;break;case 27:if(!this.levelIndexObjs[t]){e.next=45;break}if(!r){e.next=32;break}return e.abrupt("return",{data:[],start:0,end:0,l:0});case 32:if("sensor8"!==this.dataName){e.next=42;break}for(g=Math.ceil(Math.log2(Math.pow(2,this.maxLevel)-this.realDataRowNum)),t>=this.maxLevel-g&&(b=t-(this.maxLevel-g),m=Math.pow(2,b),a>=Math.pow(2,t)-m&&(a=Math.pow(2,t)-m-1)),v=this.realDataRowNum-1,p=this.maxLevel;p>=t;p--)v=Math.floor(v/2);if(!(a<n)){e.next=39;break}return e.abrupt("return",[]);case 39:return e.abrupt("return",this.levelIndexObjs[t].getDataByIndex(n,a));case 42:return e.abrupt("return",this.levelIndexObjs[t].getDataByIndex(n,a));case 43:e.next=46;break;case 45:return e.abrupt("return",{data:[],start:0,end:0,l:0});case 46:case"end":return e.stop()}}),e,this)})));function t(t,n,a,r){return e.apply(this,arguments)}return t}()},{key:"getDataRawMinMax",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,a,r){var i,o,l,s,c,d,u,h,f,g,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t>this.maxLevel)){e.next=2;break}return e.abrupt("return",[]);case 2:i=2,o=n,l=a,s=t-1;case 6:if(!(s>1)){e.next=15;break}if(o=Math.floor(o/2),l=Math.floor(l/2),!this.levelIndexObjs[s]||!this.levelIndexObjs[s].isFull){e.next=12;break}return i=s,e.abrupt("break",15);case 12:s--,e.next=6;break;case 15:c=i+1;case 16:if(!(c<=t)){e.next=25;break}return o*=2,l=2*l+1,d=this.checkLoadedDataInSingalLevel([[c,o,l]]),e.next=22,S(d,this);case 22:c++,e.next=16;break;case 25:if(!this.levelIndexObjs[t]){e.next=43;break}if(!r){e.next=30;break}return e.abrupt("return",{data:[],start:0,end:0,l:0});case 30:if("sensor8"!==this.dataName){e.next=40;break}for(u=Math.ceil(Math.log2(Math.pow(2,this.maxLevel)-this.realDataRowNum)),t>=this.maxLevel-u&&(h=t-(this.maxLevel-u),f=Math.pow(2,h),a>=Math.pow(2,t)-f&&(a=Math.pow(2,t)-f-1)),g=this.realDataRowNum-1,b=this.maxLevel;b>=t;b--)g=Math.floor(g/2);if(!(a<n)){e.next=37;break}return e.abrupt("return",[]);case 37:return e.abrupt("return",this.levelIndexObjs[t].getDataByIndex(n,a));case 40:return e.abrupt("return",this.levelIndexObjs[t].getDataByIndex(n,a));case 41:e.next=44;break;case 43:return e.abrupt("return",{data:[],start:0,end:0,l:0});case 44:case"end":return e.stop()}}),e,this)})));function t(t,n,a,r){return e.apply(this,arguments)}return t}()},{key:"getDataV1",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,a,r){var i,o,l,s,c,d,u,h,f,g,b,m,v,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t>this.maxLevel)){e.next=2;break}return e.abrupt("return",[]);case 2:if(!this.levelIndexObjs[t]){e.next=33;break}if(i=this.levelIndexObjs[t].hasDataForRange(n,a),!i.has){e.next=8;break}return e.abrupt("return",this.levelIndexObjs[t].getDataByIndex(n,a));case 8:o=i.range,l=0;case 10:if(!(l<o.length)){e.next=28;break}s=t-1,c=[];case 13:if(!(s>=0)){e.next=23;break}if(!this.levelIndexObjs[s].isFull){e.next=16;break}return e.abrupt("break",23);case 16:if(d=this.levelIndexObjs[s].hasDataForRange(Math.floor(o[l][0]/Math.pow(2,t-s)),Math.floor(o[l][1]/Math.pow(2,t-s))),!d.has){e.next=19;break}return e.abrupt("break",23);case 19:c.push([s,Math.floor(o[l][0]/Math.pow(2,t-s)),Math.floor(o[l][1]/Math.pow(2,t-s))]);case 20:s--,e.next=13;break;case 23:return e.next=25,_(c,this);case 25:l++,e.next=10;break;case 28:return o.forEach((function(e){e.unshift(t)})),e.next=31,_(o,this);case 31:e.next=49;break;case 33:u=t-1,h=[];case 35:if(!(u>=0)){e.next=46;break}if(!this.levelIndexObjs[u]||!this.levelIndexObjs[u].isFull){e.next=38;break}return e.abrupt("break",46);case 38:if(!this.levelIndexObjs[u]){e.next=42;break}if(f=this.levelIndexObjs[u].hasDataForRange(Math.floor(n/Math.pow(2,t-u)),Math.floor(a/Math.pow(2,t-u))),!f.has){e.next=42;break}return e.abrupt("break",46);case 42:h.push([u,Math.floor(n/Math.pow(2,t-u)),Math.floor(a/Math.pow(2,t-u))]);case 43:u--,e.next=35;break;case 46:return h.unshift([t,n,a]),e.next=49,_(h,this);case 49:if(!this.levelIndexObjs[t]){e.next=67;break}if(!r){e.next=54;break}return e.abrupt("return",[]);case 54:if("sensor8"!==this.dataName){e.next=64;break}for(g=Math.ceil(Math.log2(Math.pow(2,this.maxLevel)-this.realDataRowNum)),t>=this.maxLevel-g&&(b=t-(this.maxLevel-g),m=Math.pow(2,b),a>=Math.pow(2,t)-m&&(a=Math.pow(2,t)-m-1)),v=this.realDataRowNum-1,p=this.maxLevel;p>=t;p--)v=Math.floor(v/2);if(!(a<n)){e.next=61;break}return e.abrupt("return",[]);case 61:return e.abrupt("return",this.levelIndexObjs[t].getDataByIndex(n,a));case 64:return e.abrupt("return",this.levelIndexObjs[t].getDataByIndex(n,a));case 65:e.next=68;break;case 67:throw new Error("cannot get data from data manager");case 68:case"end":return e.stop()}}),e,this)})));function t(t,n,a,r){return e.apply(this,arguments)}return t}()},{key:"getLoadedData",value:function(e,t,n){if(this.levelIndexObjs[e]){if("sensor8"===this.dataName){var a=Math.ceil(Math.log2(Math.pow(2,this.maxLevel)-this.realDataRowNum));if(e>=this.maxLevel-a){var r=e-(this.maxLevel-a),i=Math.pow(2,r);n>=Math.pow(2,e)-i&&(n=Math.pow(2,e)-i-1)}return n<t?[]:this.levelIndexObjs[e].getDataByIndex(t,n)}return this.levelIndexObjs[e].getDataByIndex(t,n)}throw new Error("cannot get data from data manager")}},{key:"checkMonotonicity",value:function(e,t,n){for(var a=0;a<n.length;a++){var r=n[a].yArray[0],i=n[a].yArray[1],o=n[a].yArray[2],l=n[a].yArray[3],s=n[a].level,c=Math.pow(2,this.maxLevel)/Math.pow(2,s),d=n[a].index*c,u=c+d-1;if(r===i&&l===o||r===o&&l===i){var h=(l-r)/(u-d),f=r-h*d;e[t[a]].mergeLast(h,f),e[t[a]+1].mergeFirst(h,f),t.splice(a,1),n.splice(a,1)}}}},{key:"constructTreeForBatchLoad1",value:function(e,t){for(var n=0,a=0;a<e.length;a++){e[a];for(var r=this.levelIndexObjs[e[a][0]].getTreeNodeStartIndex(e[a][1]),i=r,o=[],l=e[a][1];l<=e[a][2];l++){var s,c;if((null===(s=i)||void 0===s?void 0:s.index)!==l||l!==t[n].i||i.level!==t[n].l)throw console.log(e[a][0],e[a][1]),console.log("lose range:",e,i,null===(c=i)||void 0===c?void 0:c.index,l),console.log(this.levelIndexObjs),new Error("dif not match node");i.difference=t[n].dif;var d=[0,0,0,0],h=[0,0,0,0];d[0]=i.yArray[0],h[0]=i.yArray[0]-i.difference[0],d[3]=i.yArray[3]+i.difference[3],h[3]=i.yArray[3],i.difference[1]<0?(d[1]=i.yArray[1],h[1]=i.yArray[1]-i.difference[1]):(d[1]=i.yArray[1]+i.difference[1],h[1]=i.yArray[1]),i.difference[2]<0?(d[2]=i.yArray[2]+i.difference[2],h[2]=i.yArray[2]):(d[2]=i.yArray[2],h[2]=i.yArray[2]-i.difference[2]);var g=new f(i,!0,i.index,d,null),b=new f(i,!1,i.index,h,null);if(o.push(g),o.push(b),i=i.nextSibling,n++,null===i||n>=t.length)break}for(var m=0;m<o.length-1;m++)if(o[m].nextSibling=o[m+1],o[m+1].previousSibling=o[m],o[m].index!=o[m+1].index-1)throw new Error("sibling index error");this.levelIndexObjs[e[a][0]+1]||(this.levelIndexObjs[e[a][0]+1]=new u(e[a][0]+1,!1)),this.levelIndexObjs[e[a][0]+1].addLoadedDataRange(o[0],[o[0].index,o[o.length-1].index])}}},{key:"constructTreeForBatchLoad",value:function(e,t){for(var n=0,a=0;a<e.length;a++){e[a];for(var r=this.levelIndexObjs[e[a][0]-1].getTreeNodeStartIndex(Math.floor(e[a][1]/2)),i=r,o=[],l=Math.floor(e[a][1]/2);l<=Math.floor(e[a][2]/2);l++){var s,c;if((null===(s=i)||void 0===s?void 0:s.index)!==l||l!==t[n].i||i.level!==t[n].l)throw console.log(e[a][0]-1,Math.floor(e[a][1]/2)),console.log("lose range:",e,i,null===(c=i)||void 0===c?void 0:c.index,l),console.log(this.levelIndexObjs),new Error("dif not match node");i.difference=t[n].dif;var d=[0,0,0,0],h=[0,0,0,0];d[0]=i.yArray[0],h[0]=i.yArray[0]-i.difference[0],d[3]=i.yArray[3]+i.difference[3],h[3]=i.yArray[3],i.difference[1]<0?(d[1]=i.yArray[1],h[1]=i.yArray[1]-i.difference[1]):(d[1]=i.yArray[1]+i.difference[1],h[1]=i.yArray[1]),i.difference[2]<0?(d[2]=i.yArray[2]+i.difference[2],h[2]=i.yArray[2]):(d[2]=i.yArray[2],h[2]=i.yArray[2]-i.difference[2]);var g=new f(i,!0,i.index,d,null),b=new f(i,!1,i.index,h,null);if(this.cacheMap.set(g.index,g),this.cacheMap.set(b.index,b),2,o.push(g),o.push(b),i=i.nextSibling,n++,null===i||n>=t.length)break}for(var m=0;m<o.length-1;m++)if(o[m].nextSibling=o[m+1],o[m+1].previousSibling=o[m],o[m].index!=o[m+1].index-1)throw new Error("sibling index error");this.levelIndexObjs[e[a][0]]||(this.levelIndexObjs[e[a][0]]=new u(e[a][0],!1)),this.levelIndexObjs[e[a][0]].addLoadedDataRange(o[0],[o[0].index,o[o.length-1].index])}}},{key:"viewChangeInteraction",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,a,r){var i,o,s,c,d,u,h,f,g,b,m,v,p,x,y=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=Object(l["k"])(t,n,a,this.realDataRowNum,this.maxLevel,this.dataName),o=[],s=0,c=0;case 4:if(!(c<this.levelIndexObjs[t].firstNodes.length)){e.next=40;break}if(d=this.getIndexTime(t,this.levelIndexObjs[t].loadedDataRange[c][0],this.maxLevel),u=this.getIndexTime(t,this.levelIndexObjs[t].loadedDataRange[c][1],this.maxLevel),h=this.levelIndexObjs[t].firstNodes[c],!(d.startT<=a[0]&&u.endT>=a[1])){e.next=37;break}case 9:if(null==h){e.next=37;break}if(!(s>=i.length)){e.next=12;break}return e.abrupt("break",37);case 12:if(f=i[s].isContain(h),1!==f){e.next=17;break}h=h.nextSibling,e.next=35;break;case 17:if(2!==f){e.next=22;break}o.push(h),h=h.nextSibling,e.next=35;break;case 22:if(3!==f){e.next=26;break}s++,e.next=35;break;case 26:if(5!==f){e.next=30;break}h=h.nextSibling,e.next=35;break;case 30:if(6!==f){e.next=34;break}return e.abrupt("break",37);case 34:h=h.nextSibling;case 35:e.next=9;break;case 37:c++,e.next=4;break;case 40:if(0!==o.length){e.next=42;break}return e.abrupt("return",i);case 42:if(g=Object(l["f"])(o),0!==g.length){e.next=45;break}return e.abrupt("return",i);case 45:for(b=[],m=function(e){var t=g[e][0],n=g[e][1],a=g[e][2];if(y.levelIndexObjs[t]){var r=y.levelIndexObjs[t].hasDataForRange(n,a);if(!r.has){var i=r.range;i.forEach((function(e){e.unshift(t),b.push(e)}))}}else b.push([t,n,a])},v=0;v<g.length;v++)m(v);if(!(b.length>0)){e.next=51;break}return e.next=51,R(b,this);case 51:1,p=regeneratorRuntime.mark((function e(){var t,n,a,c,d,u,h,f,g,b,m,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=0,t=[],n=[],o.forEach((function(e){if(null===e._leftChild||null===e._rightChild)throw new Error("cannot find next level node");n.push(e._leftChild),n.push(e._rightChild)})),a=[],c=0;case 6:if(!(c<n.length)){e.next=32;break}if(!(s>=i.length)){e.next=9;break}throw new Error("col index out range");case 9:if(d=i[s].isContain(n[c]),1!==d){e.next=14;break}return e.abrupt("continue",29);case 14:if(2!==d){e.next=19;break}t.push(n[c]),a.push(s),e.next=29;break;case 19:if(3!==d){e.next=24;break}s++,c--,e.next=29;break;case 24:if(6!==d){e.next=28;break}return e.abrupt("break",32);case 28:return e.abrupt("continue",29);case 29:c++,e.next=6;break;case 32:if(a.length==t.length){e.next=34;break}throw new Error("cannot memory index");case 34:for(u=0;u<t.length;u++)h=Object(l["c"])(t[u],i[a[u]],i[a[u]+1],r),h&&(t.splice(u,1),a.splice(u,1));if(o=t,!(o.length>0&&o[0].level===y.maxLevel-1)){e.next=39;break}for(f=0;f<o.length;f++)i[a[f]].addLastVal(o[f].yArray[0]),i[a[f]].forceMerge(o[f].yArray[0]),i[a[f]+1].addFirstVal(o[f].yArray[3]),i[a[f]+1].forceMerge(o[f].yArray[3]);return e.abrupt("return","break");case 39:if(0!==o.length){e.next=41;break}return e.abrupt("return","break");case 41:for(g=Object(l["f"])(o),b=[],m=function(e){var t=g[e][0],n=g[e][1],a=g[e][2];if(y.levelIndexObjs[t]){var r=y.levelIndexObjs[t].hasDataForRange(n,a);if(!r.has){var i=r.range;i.forEach((function(e){e.unshift(t),b.push(e)}))}}else b.push([t,n,a])},v=0;v<g.length;v++)m(v);return e.next=47,R(b,y);case 47:case"end":return e.stop()}}),e)}));case 53:if(!(o.length>0)){e.next=60;break}return e.delegateYield(p(),"t0",55);case 55:if(x=e.t0,"break"!==x){e.next=58;break}return e.abrupt("break",60);case 58:e.next=53;break;case 60:return e.abrupt("return",i);case 61:case"end":return e.stop()}}),e,this)})));function t(t,n,a,r){return e.apply(this,arguments)}return t}()},{key:"viewChangeInteraction1",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,a,r){var i,o,s,c,d,u,h,f,g,b,m,v,p,x=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:G=[],i=Object(l["k"])(t,n,a,this.realDataRowNum,this.maxLevel),o=[],s=0,c=0;case 5:if(!(c<this.levelIndexObjs[t].firstNodes.length)){e.next=41;break}if(d=this.getIndexTime(t,this.levelIndexObjs[t].loadedDataRange[c][0],this.maxLevel),u=this.getIndexTime(t,this.levelIndexObjs[t].loadedDataRange[c][1],this.maxLevel),h=this.levelIndexObjs[t].firstNodes[c],!(d.startT<=a[0]&&u.endT>=a[1])){e.next=38;break}case 10:if(null==h){e.next=38;break}if(!(s>=i.length)){e.next=13;break}return e.abrupt("break",38);case 13:if(f=i[s].isContain(h),1!==f){e.next=18;break}h=h.nextSibling,e.next=36;break;case 18:if(2!==f){e.next=23;break}o.push(h),h=h.nextSibling,e.next=36;break;case 23:if(3!==f){e.next=27;break}s++,e.next=36;break;case 27:if(5!==f){e.next=31;break}h=h.nextSibling,e.next=36;break;case 31:if(6!==f){e.next=35;break}return e.abrupt("break",38);case 35:h=h.nextSibling;case 36:e.next=10;break;case 38:c++,e.next=5;break;case 41:if(0!==o.length){e.next=47;break}return g=G.reduce((function(e,t){return e+t}),0),Q.push(g),G=[],Q.length>=50&&console.log(Q),e.abrupt("return",i);case 47:if(b=Object(l["g"])(o),!(b.length>0)){e.next=53;break}return m=(new Date).getTime(),e.next=52,D(b,this);case 52:G.push((new Date).getTime()-m);case 53:v=regeneratorRuntime.mark((function e(){var t,n,a,c,d,u,h,f,g,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=0,t=[],n=[],o.forEach((function(e){if(null===e._leftChild||null===e._rightChild)throw console.log(e),console.log(x),new Error("cannot find next level node");n.push(e._leftChild),n.push(e._rightChild)})),a=[],c=0;case 6:if(!(c<n.length)){e.next=32;break}if(!(s>=i.length)){e.next=9;break}return e.abrupt("break",32);case 9:if(d=i[s].isContain(n[c]),1!==d){e.next=14;break}return e.abrupt("continue",29);case 14:if(2!==d){e.next=19;break}t.push(n[c]),a.push(s),e.next=29;break;case 19:if(3!==d){e.next=24;break}s++,c--,e.next=29;break;case 24:if(6!==d){e.next=28;break}return e.abrupt("break",32);case 28:return e.abrupt("continue",29);case 29:c++,e.next=6;break;case 32:if(a.length==t.length){e.next=34;break}throw new Error("cannot memory index");case 34:for(u=0;u<t.length;u++)a[u]+1<i.length&&(h=Object(l["c"])(t[u],i[a[u]],i[a[u]+1],r),h&&(t.splice(u,1),a.splice(u,1)));if(o=t,!(o.length>0&&o[0].level===x.maxLevel-1)){e.next=39;break}for(f=0;f<o.length;f++)i[a[f]].addLastVal(o[f].yArray[0]),i[a[f]].forceMerge(o[f].yArray[0]),a[f]+1<i.length&&(i[a[f]+1].addFirstVal(o[f].yArray[3]),i[a[f]+1].forceMerge(o[f].yArray[3]));return e.abrupt("return","break");case 39:if(0!==o.length){e.next=41;break}return e.abrupt("return","break");case 41:if(g=Object(l["g"])(o),!(g.length>0)){e.next=47;break}return b=(new Date).getTime(),e.next=46,D(g,x);case 46:G.push((new Date).getTime()-b);case 47:case"end":return e.stop()}}),e)}));case 54:if(!(o.length>0)){e.next=61;break}return e.delegateYield(v(),"t0",56);case 56:if(p=e.t0,"break"!==p){e.next=59;break}return e.abrupt("break",61);case 59:e.next=54;break;case 61:return G.reduce((function(e,t){return e+t}),0),e.abrupt("return",i);case 63:case"end":return e.stop()}}),e,this)})));function t(t,n,a,r){return e.apply(this,arguments)}return t}()},{key:"checkLoadedDataInSingalLevel",value:function(e){for(var t=this,n=[],a=function(a){var r=e[a][0],i=e[a][1],o=e[a][2];if(t.levelIndexObjs[r]){var l=t.levelIndexObjs[r].hasDataForRange(i,o);if(!l.has){var s=l.range;s.forEach((function(e){e.unshift(r),n.push(e)}))}}else n.push([r,i,o])},r=0;r<e.length;r++)a(r);return n}},{key:"checkLoadedDataInSingalLevelV1",value:function(e){for(var t=this,n=[],a=function(a){var r=e[a][0],i=e[a][1],o=e[a][2];if(t.levelIndexObjs[r]){var l=t.levelIndexObjs[r].hasDataForRange(i,o);if(!l.has){var s=l.range;s.forEach((function(e){e.unshift(r),n.push(e)}))}}else n.push([r,i,o])},r=0;r<e.length;r++)a(r);return n}},{key:"getIndexTime",value:function(e,t,n){var a=Math.pow(2,n)/Math.pow(2,e),r=t*a,i=r+a-1;return{startT:r,endT:i}}},{key:"initCache",value:function(){var e=this,t={max:1e6,maxSize:1e6,sizeCalculation:function(e,t){return 1},dispose:function(t,n,a){"evict"===a&&(console.log(n),e.deleteQueue.push(t))},disposeAfter:function(e,t,n){},ttl:36e5,allowStale:!1,updateAgeOnGet:!0,updateAgeOnHas:!0};this.lruCache=new Y.a(t),this.evictTreeNode()}},{key:"evictTreeNode",value:function(){var e=this;setInterval((function(){e.isIntering||(e.isEvicting=!0,e.deleteQueue.forEach((function(t){var n=t.level,a=t.index;e.lruCache.delete(n+"_"+a),e.levelIndexObjs[n].hasDataForRange(a,a).has&&(e.deleteNodeWhithChild(n,a),console.log("evict l:"+n+" i:"+a+" finish!"))})),e.isEvicting=!1)}),1e3)}},{key:"deleteNodeWhithChild",value:function(e,t){for(var n=t,a=t,r=e;r<this.maxLevel-1;r++){r==e?(n=t,a=t):(n=Math.pow(2,r-e)*n,a=Math.pow(2,r-e)*a+1);var i=this.levelIndexObjs[r].loadedDataRange,o=this.levelIndexObjs[r].firstNodes;if(!i||!o)break;for(var l=[],s=[],c=0;c<i.length;c++){var d=i[c];if(d[1]<a)l.push(o[c]),s.push([d[0],d[1]]);else if(d[0]<n&&d[1]===n){o[c].nextSibling&&(s.push([d[0],d[1]-1]),l.push(o[c]));var u=o[c];while(u){if(u.index===n){u.previousSibling&&(u.previousSibling.nextSibling=null,u.previousSibling=null);break}u=u.nextSibling}if(null===u)throw new Error("cannot find range node")}else if(d[0]<n&&d[1]>n&&d[1]<a){l.push(o[c]),s.push([d[0],n-1]);var h=o[c];while(h){if(h.index===n){h.previousSibling&&(h.previousSibling.nextSibling=null,h.previousSibling=null);break}h=h.nextSibling}if(null===h)throw new Error("cannot find range node")}else if(d[0]<n&&d[1]===a){l.push(o[c]),s.push([d[0],n-1]);var f=o[c];while(f){if(f.index===n){f.previousSibling&&(f.previousSibling.nextSibling=null,f.previousSibling=null);break}f=f.nextSibling}if(null===f)throw new Error("cannot find range node")}else if(d[0]<n&&d[1]>a){l.push(o[c]),s.push([d[0],n-1]);var g=o[c];while(g){if(g.index===n&&g.previousSibling&&(g.previousSibling.nextSibling=null,g.previousSibling=null),g.index===a){g.nextSibling&&(l.push(g.nextSibling),s.push([a+1,d[1]]),g.nextSibling.previousSibling=null,g.nextSibling=null);break}g=g.nextSibling}if(null===g)throw new Error("cannot find range node")}else if(d[0]===n&&d[1]>a){var b=o[c];while(b){if(b.index===a){b.nextSibling&&(l.push(b.nextSibling),s.push([a+1,d[1]]),b.nextSibling.previousSibling=null,b.nextSibling=null);break}b=b.nextSibling}if(null===b)throw new Error("cannot find range node")}else{if(d[0]===n&&d[1]===a)continue;if(d[0]===n&&d[1]<a)continue;if(d[0]>n&&d[1]>a&&d[0]<a){var m=o[c];while(m){if(m.index===a){m.nextSibling&&(l.push(m.nextSibling),s.push([a+1,d[1]]),m.nextSibling.previousSibling=null,m.nextSibling=null);break}m=m.nextSibling}if(null===m)throw new Error("cannot find range node")}else if(d[0]>n&&d[0]===a)o[c].nextSibling&&(l.push(o[c].nextSibling),s.push([d[0]+1,d[1]]),o[c].nextSibling.previousSibling=null,o[c].nextSibling=null);else{if(!(d[0]>a)){if(d[0]>n&&d[1]===a)continue;throw console.log(d,n,a),new Error("range error")}l.push(o[c]),s.push([d[0],d[1]])}}}this.levelIndexObjs[r].loadedDataRange=s,this.levelIndexObjs[r].firstNodes=l}}},{key:"updateMaxCacheSize",value:function(e){this.maxCacheNodeNum=e}},{key:"lruCacheDelete",value:function(){if(console.log(this.cacheMap.size),!(this.cacheMap.size<=this.maxCacheNodeNum)){var e=this.cacheMap.size-this.maxCacheNodeNum;e%2!=0&&e++,console.log("delete nums:",e);for(var t=this.levelIndexObjs.length-2;t>0;t--){if(e<=0)break;for(var n=this.levelIndexObjs[t],a=0;a<n.firstNodes.length;a++){var r=n.firstNodes[a];this.levelIndexObjs[r.level+1].loadedDataRange=[],this.levelIndexObjs[r.level+1].firstNodes=[],this.levelIndexObjs[r.level+1].isFull=!1;while(r)r._leftChild&&this.cacheMap.delete(r._leftChild.index),r._rightChild&&this.cacheMap.delete(r._rightChild.index),r=r.nextSibling,e-=2}}}}},{key:"computePowCon",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,a,r){var i,o,s,c,d,u,h,f,b,m,v,p,x,y,w,k,O,M,j,C,T,N,R,L,S,I,_,A,V,E,B,P,F;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("pwo:",n),i=[],o=[],a.length%n===0){e.next=5;break}throw new Error("gap node not match widht");case 5:for(s=a.length/n,c=new Array(n),d=0;d<c.length;d++)c[d]=[];if(s>1){for(u=0;u<a.length;u++)h=Math.floor(u/s),c[h].push(a[u]);for(f=0;f<c.length-1;f++)b=c[f],m=c[f+1],o.push(b[b.length-1]),o.push(m[0])}else o=a;if(v=Object(l["g"])(o),!(v.length>0)){e.next=17;break}return p=(new Date).getTime(),e.next=14,D(v,this);case 14:i.push((new Date).getTime()-p),e.next=18;break;case 17:i.push(1);case 18:if(x=[],1!=s){e.next=33;break}y=0;case 21:if(!(y<o.length-1)){e.next=31;break}if(!o[y]._rightChild||!o[y+1]._leftChild){e.next=27;break}w=new g(o[y],o[y+1]),x.push(w),e.next=28;break;case 27:throw new Error("children cannot empty");case 28:y++,e.next=21;break;case 31:e.next=45;break;case 33:k=0;case 34:if(!(k<o.length)){e.next=44;break}if(!o[k]._rightChild||!o[k+1]._leftChild){e.next=40;break}O=new g(o[k],o[k+1]),x.push(O),e.next=41;break;case 40:throw new Error("children cannot empty");case 41:k+=2,e.next=34;break;case 44:for(M=0;M<c.length-1;M++){for(j=c[M],C=c[M+1],T=0;T<j.length-1;T++)x[M].updateLeftMinMax(j[T]);for(N=1;N<C.length;N++)x[M].updateRighetMinMax(C[N])}case 45:R=!0;case 46:if(!R){e.next=66;break}for(L=!1,o=[],S=0;S<x.length;S++)I=x[S].canCut(),L=I&&L,I||(o.push(x[S].firstNode),o.push(x[S].secondNode));if(!L){e.next=52;break}return e.abrupt("break",66);case 52:if(0!=o.length){e.next=54;break}return e.abrupt("break",66);case 54:if(!(o.length>0&&o[0].level===this.maxLevel-1)){e.next=57;break}for(_=0;_<x.length;_++)A=x[_],A.isOk||A.firstNode&&A.secondNode&&A.lastLevelUpdateMinMax();return e.abrupt("break",66);case 57:if(v=Object(l["g"])(o),!(v.length>0)){e.next=63;break}return V=(new Date).getTime(),e.next=62,D(v,this);case 62:i.push((new Date).getTime()-V);case 63:for(E=0;E<x.length;E++)B=x[E],B.isOk||B.firstNode._rightChild&&B.secondNode._leftChild&&B.updateTwoNode(B.firstNode,B.secondNode);e.next=46;break;case 66:if(r.length===x.length+1){e.next=68;break}throw new Error("column not match gap");case 68:for(P=0;P<x.length;P++)F=x[P],F.canUseT&&(r[P].endV=F.tOne,r[P].startV=F.tOne);return i.length>=3&&G.push(i[0]),console.log(G),console.log(i),e.abrupt("return",r);case 73:case"end":return e.stop()}}),e,this)})));function t(t,n,a,r){return e.apply(this,arguments)}return t}()},{key:"bfsSearchTree",value:function(e,t,n,a){for(var r=this,i=[],o=0,s=0;s<this.levelIndexObjs[e].firstNodes.length;s++){var c=this.getIndexTime(e,this.levelIndexObjs[e].loadedDataRange[s][0],this.maxLevel),d=this.getIndexTime(e,this.levelIndexObjs[e].loadedDataRange[s][1],this.maxLevel),u=this.levelIndexObjs[e].firstNodes[s];if(c.startT<=n[0]&&d.endT>=n[1])while(null!=u){if(o>=a.length)break;var h=a[o].isContain(u);if(1===h)u=u.nextSibling;else if(2===h)i.push(u),u=u.nextSibling;else if(3===h)o++;else if(5===h)u=u.nextSibling;else{if(6===h)throw new Error("error in viewchange");u=u.nextSibling}}}if(0===i.length)return a;var f=function(){o=0;var e=[],t=[];i.forEach((function(e){if(null===e._leftChild||null===e._rightChild)throw console.log(e),console.log(r),new Error("cannot find next level node");t.push(e._leftChild),t.push(e._rightChild)}));for(var n=[],s=0;s<t.length;s++){if(o>=a.length)break;var c=a[o].isContain(t[s]);if(1!==c)if(2===c)e.push(t[s]),n.push(o);else{if(3!==c){if(6===c)break;continue}o++,s--}}if(n.length!=e.length)throw new Error("cannot memory index");for(var d=0;d<e.length;d++)if(n[d]+1<a.length){var u=Object(l["c"])(e[d],a[n[d]],a[n[d]+1],"");u&&(e.splice(d,1),n.splice(d,1))}if(i=e,i.length>0&&i[0].level===r.maxLevel-1){for(var h=0;h<i.length;h++)a[n[h]].addLastVal(i[h].yArray[0]),a[n[h]].forceMerge(i[h].yArray[0]),n[h]+1<a.length&&(a[n[h]+1].addFirstVal(i[h].yArray[3]),a[n[h]+1].forceMerge(i[h].yArray[3]));return"break"}if(0===i.length)return"break"};while(i.length>0){var g=f();if("break"===g)break}return a}},{key:"viewChangeInteraction1WS",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,a,r,i){var o,s,c,u,h,f,g,b,m,v,p,x,y,w,k,O=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.isIntering=!0,o=""+Math.random()+Math.random(),G=[],s=Object(l["k"])(t,n,a,this.realDataRowNum,this.maxLevel),c=[],u=0,h=0;case 7:if(!(h<this.levelIndexObjs[t].firstNodes.length)){e.next=44;break}if(f=this.getIndexTime(t,this.levelIndexObjs[t].loadedDataRange[h][0],this.maxLevel),g=this.getIndexTime(t,this.levelIndexObjs[t].loadedDataRange[h][1],this.maxLevel),b=this.levelIndexObjs[t].firstNodes[h],!(f.startT<=a[0]&&g.endT>=a[1])){e.next=41;break}case 12:if(null==b){e.next=41;break}if(!(u>=s.length)){e.next=15;break}return e.abrupt("break",41);case 15:if(m=s[u].isContain(b),1!==m){e.next=20;break}b=b.nextSibling,e.next=39;break;case 20:if(2!==m){e.next=25;break}c.push(b),b=b.nextSibling,e.next=39;break;case 25:if(3!==m){e.next=29;break}u++,e.next=39;break;case 29:if(5!==m){e.next=33;break}b=b.nextSibling,e.next=39;break;case 33:if(6!==m){e.next=38;break}throw new Error("error in viewchange");case 38:b=b.nextSibling;case 39:e.next=12;break;case 41:h++,e.next=7;break;case 44:if(0!==c.length){e.next=52;break}return v=G.reduce((function(e,t){return e+t}),0),Q.push(v),e.next=49,B([],this,"empty");case 49:return G=[],Q.length>=50&&console.log(Q),e.abrupt("return",s);case 52:if(p=Object(l["g"])(c),!(p.length>0)){e.next=58;break}return x=(new Date).getTime(),e.next=57,B(p,this,o);case 57:G.push((new Date).getTime()-x);case 58:y=regeneratorRuntime.mark((function e(){var t,n,a,i,d,h,f,g,b,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:u=0,t=[],n=[],c.forEach((function(e){if(null===e._leftChild||null===e._rightChild)throw new Error("cannot find next level node");n.push(e._leftChild),n.push(e._rightChild);O.lruCache.has(e._leftChild.level+"_"+e._leftChild.index),O.lruCache.has(e._rightChild.level+"_"+e._rightChild.index)})),a=[],i=0;case 6:if(!(i<n.length)){e.next=32;break}if(!(u>=s.length)){e.next=9;break}return e.abrupt("break",32);case 9:if(d=s[u].isContain(n[i]),1!==d){e.next=14;break}return e.abrupt("continue",29);case 14:if(2!==d){e.next=19;break}t.push(n[i]),a.push(u),e.next=29;break;case 19:if(3!==d){e.next=24;break}u++,i--,e.next=29;break;case 24:if(6!==d){e.next=28;break}return e.abrupt("break",32);case 28:return e.abrupt("continue",29);case 29:i++,e.next=6;break;case 32:if(a.length==t.length){e.next=34;break}throw new Error("cannot memory index");case 34:for(h=0;h<t.length;h++)a[h]+1<s.length&&(f=Object(l["c"])(t[h],s[a[h]],s[a[h]+1],r),f&&(t.splice(h,1),a.splice(h,1)));if(c=t,!(c.length>0&&c[0].level===O.maxLevel-2)){e.next=39;break}for(g=0;g<c.length;g++)s[a[g]].addLastVal(c[g].yArray[0]),s[a[g]].forceMerge(c[g].yArray[0]),a[g]+1<s.length&&(s[a[g]+1].addFirstVal(c[g].yArray[3]),s[a[g]+1].forceMerge(c[g].yArray[3]));return e.abrupt("return","break");case 39:if(0!==c.length){e.next=41;break}return e.abrupt("return","break");case 41:if(b=Object(l["g"])(c),!(b.length>0)){e.next=47;break}return m=(new Date).getTime(),e.next=46,B(b,O,o);case 46:G.push((new Date).getTime()-m);case 47:case"end":return e.stop()}}),e)}));case 59:if(!(c.length>0)){e.next=66;break}return e.delegateYield(y(),"t0",61);case 61:if(w=e.t0,"break"!==w){e.next=64;break}return e.abrupt("break",66);case 64:e.next=59;break;case 66:return i&&i.rootT&&(console.log("roott:",i.rootT),G.push(i.rootT)),k=G.reduce((function(e,t){return e+t}),0),Q.push(k),6===Q.length&&(Object(d["c"])(Q),Q=[]),console.log("AllLevelTime:",Q),e.next=73,B(p,this,"empty");case 73:return this.isIntering=!1,e.abrupt("return",s);case 75:case"end":return e.stop()}}),e,this)})));function t(t,n,a,r,i){return e.apply(this,arguments)}return t}()},{key:"viewChangeInteractionFinal",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,a,r){var i,o,s,c,u,h,f,g,b,m,v,p,x,y=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(t,n,a),this.dataName.includes(".")?this.dataName.split(".")[1]:this.dataName,i=d["a"].state.allFlags[this.dataName],void 0!==i){e.next=7;break}throw new Error(this.dataName+"get flag faild");case 7:console.log("flag length:",i.length);case 8:G=[],o=Object(l["k"])(t,n,a,this.realDataRowNum,this.maxLevel),s=[],c=0,u=0;case 13:if(!(u<this.levelIndexObjs[t].firstNodes.length)){e.next=51;break}if(h=this.getIndexTime(t,this.levelIndexObjs[t].loadedDataRange[u][0],this.maxLevel),f=this.getIndexTime(t,this.levelIndexObjs[t].loadedDataRange[u][1],this.maxLevel),g=this.levelIndexObjs[t].firstNodes[u],!(h.startT<=a[0]&&f.endT>=a[1])){e.next=48;break}case 18:if(null==g){e.next=48;break}if(!(c>=o.length)){e.next=21;break}return e.abrupt("break",48);case 21:if(b=o[c].isMissContain(g),o[c].containColumnRange(g,b),1!==b){e.next=27;break}g=g.nextSibling,e.next=46;break;case 27:if(2!==b){e.next=32;break}s.push(g),g=g.nextSibling,e.next=46;break;case 32:if(3!==b){e.next=36;break}c++,e.next=46;break;case 36:if(5!==b){e.next=40;break}g=g.nextSibling,e.next=46;break;case 40:if(6!==b){e.next=45;break}throw new Error("error in viewchange");case 45:g=g.nextSibling;case 46:e.next=18;break;case 48:u++,e.next=13;break;case 51:if(0!==s.length){e.next=53;break}return e.abrupt("return",o);case 53:if(m=Object(l["g"])(s),!(m.length>0)){e.next=57;break}return e.next=57,F(m,this);case 57:v=regeneratorRuntime.mark((function e(){var t,n,a,d,u,h,f,g,b,m,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:c=0,t=[],n=[],s.forEach((function(e){if(null===e._leftChild||null===e._rightChild)throw console.log(e),console.log(y),new Error("cannot find next level node");y.lruCache.has(e._leftChild.level+"_"+e._leftChild.index),y.lruCache.has(e._rightChild.level+"_"+e._rightChild.index),"NULL"!==e._leftChild.nodeType&&n.push(e._leftChild),"NULL"!==e._rightChild.nodeType&&n.push(e._rightChild)})),a=[],d=0;case 6:if(!(d<n.length)){e.next=33;break}if(!(c>=o.length)){e.next=9;break}return e.abrupt("break",33);case 9:if(u=o[c].isMissContain(n[d]),o[c].containColumnRange(n[d],u),1!==u){e.next=15;break}return e.abrupt("continue",30);case 15:if(2!==u){e.next=20;break}t.push(n[d]),a.push(c),e.next=30;break;case 20:if(3!==u){e.next=25;break}c++,d--,e.next=30;break;case 25:if(6!==u){e.next=29;break}return e.abrupt("break",33);case 29:return e.abrupt("continue",30);case 30:d++,e.next=6;break;case 33:if(a.length==t.length){e.next=35;break}throw new Error("cannot memory index");case 35:for(h=0;h<t.length;h++)a[h]+1<o.length&&(f=Object(l["c"])(t[h],o[a[h]],o[a[h]+1],r),f&&(t.splice(h,1),a.splice(h,1)));if(s=t,!(s.length>0&&s[0].level===y.maxLevel-1)){e.next=50;break}console.log("last level:",s.length),g=0;case 40:if(!(g<s.length)){e.next=49;break}if(b=i[2*s[g].index],1!==b){e.next=44;break}throw new Error("flag error");case 44:m=i[2*s[g].index+1],0===m?(o[a[g]].addLastVal(s[g].yArray[1]),o[a[g]].forceMerge(s[g].yArray[1]),a[g]+1<o.length&&(o[a[g]+1].addFirstVal(s[g].yArray[2]),o[a[g]+1].forceMerge(s[g].yArray[2]))):(o[a[g]].addLastVal(s[g].yArray[2]),o[a[g]].forceMerge(s[g].yArray[2]),a[g]+1<o.length&&(o[a[g]+1].addFirstVal(s[g].yArray[1]),o[a[g]+1].forceMerge(s[g].yArray[1])));case 46:g++,e.next=40;break;case 49:return e.abrupt("return","break");case 50:if(0!==s.length){e.next=52;break}return e.abrupt("return","break");case 52:if(v=Object(l["g"])(s),!(v.length>0)){e.next=56;break}return e.next=56,F(v,y);case 56:case"end":return e.stop()}}),e)}));case 58:if(!(s.length>0)){e.next=65;break}return e.delegateYield(v(),"t0",60);case 60:if(p=e.t0,"break"!==p){e.next=63;break}return e.abrupt("break",65);case 63:e.next=58;break;case 65:for(x=0;x<o.length;x++)o[x].checkIsMis();return e.abrupt("return",o);case 67:case"end":return e.stop()}}),e,this)})));function t(t,n,a,r){return e.apply(this,arguments)}return t}()},{key:"viewChangeInteractionFinal1",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,a,r,i){var o,s,c,u,h,f,g,b,m,v,p,x,y,w=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=Object(W["a"])(this.dataName),void 0!==o){e.next=5;break}throw new Error(this.dataName+" get flag faild");case 5:G=[],s=Object(l["k"])(t,n,a,this.realDataRowNum,this.maxLevel),c=[],u=0,h=0;case 10:if(!(h<this.levelIndexObjs[t].firstNodes.length)){e.next=54;break}if(f=this.getIndexTime(t,this.levelIndexObjs[t].loadedDataRange[h][0],this.maxLevel),g=this.getIndexTime(t,this.levelIndexObjs[t].loadedDataRange[h][1],this.maxLevel),b=this.levelIndexObjs[t].firstNodes[h],!(f.startT<=a[0]&&g.endT>=a[1])){e.next=50;break}case 15:if(null==b){e.next=48;break}if(!(u>=s.length)){e.next=18;break}return e.abrupt("break",48);case 18:if(m=s[u].isMissContain(b),s[u].containColumnRange(b,m),1!==m){e.next=24;break}b=b.nextSibling,e.next=46;break;case 24:if(2!==m&&7!==m&&8!==m&&9!==m&&10!==m){e.next=33;break}2===m&&c.push(b),7===m&&(c.push(b),u++),8===m&&0!=u&&c.push(b),9===m&&(u++,u!==s.length-1&&c.push(b)),10===m&&c.push(b),b=b.nextSibling,e.next=46;break;case 33:if(3!==m){e.next=37;break}u++,e.next=46;break;case 37:if(5!==m){e.next=41;break}b=b.nextSibling,e.next=46;break;case 41:if(6!==m){e.next=45;break}return e.abrupt("break",48);case 45:b=b.nextSibling;case 46:e.next=15;break;case 48:e.next=51;break;case 50:case 51:h++,e.next=10;break;case 54:if(0!==c.length){e.next=56;break}return e.abrupt("return",s);case 56:if(v=Object(l["g"])(c),!(v.length>0)){e.next=60;break}return e.next=60,F(v,this);case 60:p=regeneratorRuntime.mark((function e(){var t,n,a,h,f,g,b,m,v,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:u=0,t=[],n=[],c.forEach((function(e){if((null===e._leftChild||null===e._rightChild)&&"O"===e.nodeType)throw new Error("cannot find next level node");"NULL"===e.nodeType||(w.lruCache.has(e._leftChild.level+"_"+e._leftChild.index),w.lruCache.has(e._rightChild.level+"_"+e._rightChild.index),"NULL"!==e._leftChild.nodeType&&n.push(e._leftChild),"NULL"!==e._rightChild.nodeType&&n.push(e._rightChild))})),a=[],h=0;case 6:if(!(h<n.length)){e.next=36;break}if(!(u>=s.length)){e.next=9;break}return e.abrupt("break",36);case 9:if(f=s[u].isMissContain(n[h]),s[u].containColumnRange(n[h],f),1!==f){e.next=15;break}return e.abrupt("continue",33);case 15:if(2!==f&&7!==f&&8!==f&&9!==f&&10!==f){e.next=23;break}2===f&&(t.push(n[h]),a.push(u)),7===f&&(t.push(n[h]),a.push(u)),8===f&&0!=u&&(t.push(n[h]),a.push(u-1)),9===f&&u!==s.length-1&&(t.push(n[h]),a.push(u)),10===f&&(t.push(n[h]),a.push(u)),e.next=33;break;case 23:if(3!==f){e.next=28;break}u++,h--,e.next=33;break;case 28:if(6!==f){e.next=32;break}return e.abrupt("break",36);case 32:return e.abrupt("continue",33);case 33:h++,e.next=6;break;case 36:if(a.length==t.length){e.next=38;break}throw new Error("cannot memory index");case 38:g=0;case 39:if(!(g<t.length)){e.next=46;break}if("NO"===t[g].gapFlag){e.next=42;break}return e.abrupt("continue",43);case 42:a[g]+1<s.length&&(b=Object(l["c"])(t[g],s[a[g]],s[a[g]+1],r),b&&(t.splice(g,1),a.splice(g,1)));case 43:g++,e.next=39;break;case 46:if(c=t,!(c.length>0&&c[0].level===w.maxLevel-2)){e.next=50;break}for(m=0;m<c.length;m++)v=o[2*c[m].index+1],"NO"===c[m].gapFlag?0===v?(s[a[m]].addLastVal(c[m].yArray[1]),s[a[m]].forceMerge(c[m].yArray[1]),a[m]+1<s.length&&(s[a[m]+1].addFirstVal(c[m].yArray[2]),s[a[m]+1].forceMerge(c[m].yArray[2]))):(s[a[m]].addLastVal(c[m].yArray[2]),s[a[m]].forceMerge(c[m].yArray[2]),a[m]+1<s.length&&(s[a[m]+1].addFirstVal(c[m].yArray[1]),s[a[m]+1].forceMerge(c[m].yArray[1]))):0===v?(s[a[m]].addLastVal(c[m].yArray[1]),s[a[m]].forceMerge(c[m].yArray[1]),s[a[m]].addFirstVal(c[m].yArray[2]),s[a[m]].forceMerge(c[m].yArray[2])):(s[a[m]].addLastVal(c[m].yArray[2]),s[a[m]].forceMerge(c[m].yArray[2]),s[a[m]].addFirstVal(c[m].yArray[1]),s[a[m]].forceMerge(c[m].yArray[1]));return e.abrupt("return","break");case 50:if(d["a"].state.controlParams.progressive&&i&&i(s,"progressive"),0!==c.length){e.next=53;break}return e.abrupt("return","break");case 53:if(p=Object(l["g"])(c),!(p.length>0)){e.next=57;break}return e.next=57,F(p,w);case 57:case"end":return e.stop()}}),e)}));case 61:if(!(c.length>0)){e.next=68;break}return e.delegateYield(p(),"t0",63);case 63:if(x=e.t0,"break"!==x){e.next=66;break}return e.abrupt("break",68);case 66:e.next=61;break;case 68:for(y=0;y<s.length;y++)s[y].checkIsMis();return e.abrupt("return",s);case 70:case"end":return e.stop()}}),e,this)})));function t(t,n,a,r,i){return e.apply(this,arguments)}return t}()}]),e}();function q(e){for(var t=e.mintd,n=e.minvd,r=e.maxvd,i=e.maxtd,o=0;o<Math.log2(r.length);o++){for(var l=[],s=[],c=[],d=[],u=0;u<Math.pow(2,o);u++)r[u+Math.pow(2,o)]>=0?(l.push(r[u]),l.push(r[u]-r[u+Math.pow(2,o)])):(l.push(r[u]+r[u+Math.pow(2,o)]),l.push(r[u])),n[u+Math.pow(2,o)]>=0?(c.push(n[u]+n[u+Math.pow(2,o)]),c.push(n[u])):(c.push(n[u]),c.push(n[u]-n[u+Math.pow(2,o)])),d.push(t[u]),d.push(t[u]-t[u+Math.pow(2,o)]),s.push(i[u]+i[u+Math.pow(2,o)]),s.push(i[u]);r=[].concat(l,Object(a["a"])(r.slice(Math.pow(2,o+1)))),i=[].concat(s,Object(a["a"])(i.slice(Math.pow(2,o+1)))),n=[].concat(c,Object(a["a"])(n.slice(Math.pow(2,o+1)))),t=[].concat(d,Object(a["a"])(t.slice(Math.pow(2,o+1))))}var h={mint:t,minv:n,maxv:r,maxt:i};return h}function Z(e){for(var t=e,n=0;n<Math.log2(t.length);n++){for(var r=[],i=0;i<Math.pow(2,n);i++){var o=(2*t[i]+t[i+Math.pow(2,n)])/2;r.push(o);var l=(2*t[i]-t[i+Math.pow(2,n)])/2;r.push(l)}t=[].concat(r,Object(a["a"])(t.slice(Math.pow(2,n+1))))}return t}function K(e,t,n){for(var a=e[1].slice(n[0],n[1]),r=e[2].slice(n[0],n[1]),i=e[3].slice(n[0],n[1]),o=e[4].slice(n[0],n[1]),l=t.mintd,s=t.minvd,c=t.maxvd,d=t.maxtd,u=[],h=[],f=[],g=[],b=0;b<a.length;b++)u.push(a[b],a[b]-l[b]),s[b]<0?h.push(r[b],r[b]-s[b]):h.push(r[b]+s[b],r[b]),c[b]<0?f.push(i[b]+c[b],i[b]):f.push(i[b],i[b]-c[b]),g.push(o[b]+d[b],o[b]);return{mint:u,minv:h,maxv:f,maxt:g}}function $(e,t){var n=new Array(Math.log2(e.length)),a=[],r=[],i=[],o=[];e.forEach((function(e){a.push(e.minid),r.push(e.minvd),i.push(e.maxvd),o.push(e.maxid)}));var l=a.pop();a.unshift(l),l=r.pop(),r.unshift(l),l=i.pop(),i.unshift(l),l=o.pop(),o.unshift(l);var s=new Array,c=new Array,h=new f(null,!0,0,[a[0],r[0],i[0],o[0]],[a[1],r[1],i[1],o[1]]);s.push(h),n[0]=new u(0,!0),n[0].addLoadedDataRange(h,[0,0]);for(var g=1;g<=Math.log2(e.length);g++){for(var b=0;b<Math.pow(2,g-1);b++){var m=s[b],v=new Array(4),p=new Array(4);v[0]=m.yArray[0],p[0]=m.yArray[0]-m.difference[0],m.difference[1]>=0?(v[1]=m.yArray[1]+m.difference[1],p[1]=m.yArray[1]):(v[1]=m.yArray[1],p[1]=m.yArray[1]-m.difference[1]),m.difference[2]>=0?(v[2]=m.yArray[2],p[2]=m.yArray[2]-m.difference[2]):(v[2]=m.yArray[2]+m.difference[2],p[2]=m.yArray[2]),v[3]=m.yArray[3]+m.difference[3],p[3]=m.yArray[3];var x=new f(m,!0,m.index,v,g===Math.log2(e.length)?null:[a[2*b+Math.pow(2,g)],r[2*b+Math.pow(2,g)],i[2*b+Math.pow(2,g)],o[2*b+Math.pow(2,g)]]),y=new f(m,!1,m.index,p,g===Math.log2(e.length)?null:[a[2*b+1+Math.pow(2,g)],r[2*b+1+Math.pow(2,g)],i[2*b+1+Math.pow(2,g)],o[2*b+1+Math.pow(2,g)]]);c.push(x),c.push(y),2}n[g]=new u(c[0].level,!0),n[g].addLoadedDataRange(c[0],[0,c.length-1]);for(var w=0;w<c.length-1;w++)c[w].nextSibling=c[w+1],c[w+1].previousSibling=c[w];s=c,c=[]}var k=new J(n,t||d["a"].state.controlParams.currentTable);return{dataManager:k,trendTree:h}}function ee(e,t,n){var a=Math.ceil(Math.log2(t)),r=new Array(Math.ceil(Math.log2(e.length))+1),i=[],o=[];e.forEach((function(e){i.push(e.minvd),o.push(e.maxvd)}));var l=i.pop();i.unshift(l),l=o.pop(),o.unshift(l);var s=new Array,c=new Array,h=new f(null,!0,0,[void 0,i[0],o[0],void 0],[void 0,i[1],o[1],void 0]);s.push(h),r[0]=new u(0,!0),r[0].addLoadedDataRange(h,[0,0]);for(var g=1,b=1;b<=a;b++){for(var m=0;m<s.length;m++){var v=s[m];if("NULL"!==v.nodeType){if(g===i.length)throw new Error("diff index error");var p=[i[g],o[g]];g++;var x="O";if(null===p[0]&&null===p[1])throw new Error("data error");null===p[0]?(x="LEFTNULL",v.gapFlag="L"):null===p[1]&&(x="RIGHTNULL",v.gapFlag="R"),"O"!==x&&(v.nodeType=x);var y=[void 0,void 0,void 0,void 0],w=[void 0,void 0,void 0,void 0];if("O"===x)p[0]<0?(y[1]=v.yArray[1],w[1]=v.yArray[1]-p[0]):(y[1]=v.yArray[1]+p[0],w[1]=v.yArray[1]),p[1]<0?(y[2]=v.yArray[2]+p[1],w[2]=v.yArray[2]):(y[2]=v.yArray[2],w[2]=v.yArray[2]-p[1]);else if("LEFTNULL"==x)w[1]=v.yArray[1],w[2]=v.yArray[2];else if("RIGHTNULL"==x)y[1]=v.yArray[1],y[2]=v.yArray[2];else if("NULL"!==x)throw new Error("type error");var k=new f(v,!0,v.index,y,null,"O");"LEFTNULL"===x&&(k.nodeType="NULL");var O=new f(v,!1,v.index,w,null,"O");"RIGHTNULL"===x&&(O.nodeType="NULL"),c.push(k),c.push(O),2}}r[b]=new u(c[0].level,!0),r[b].addLoadedDataRange(c[0],[c[0].index,c[c.length-1].index]);for(var M=0;M<c.length-1;M++)c[M].nextSibling=c[M+1],c[M+1].previousSibling=c[M];s=c,c=[]}if(g!==i.length)throw new Error("diff not uesed");var j=new J(r,n||d["a"].state.controlParams.currentTable);return{dataManager:j,trendTree:h}}},"3fa6":function(e,t,n){"use strict";n("9284")},"4b42":function(e,t,n){"use strict";n("878b")},"569d":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("d4ec"),r=n("bee2"),i=n("75b6"),o=function(){function e(t,n,r,i,o,l,s,c){Object(a["a"])(this,e),this.isMis=!1,this.startV=void 0,this.endV=void 0,this.minVTimeRange=[0,0],this.maxVTimeRange=[0,0],this.vRange=[1/0,-1/0],this.width=o,this.col=t,this.tStart=n,this.tEnd=r,this.semanticTStart=n,this.semanticTEnd=r,this.level=i,this.startIndex=0,this.endIndex=0,this.index=0,this.globalDataLen=l,this.maxLevel=s,this.positionInfo={startX:0,endX:0,minX:0,maxX:0},this.dataName=c,this.shapeMinMax=[1/0,-1/0],this.shapeMinT=[],this.shapeMaxT=[],this.minNodes=[],this.maxNodes=[],this.realStart=0,this.sementicInterval=0}return Object(r["a"])(e,[{key:"rebuild",value:function(e,t,n,a,r,i,o,l){this.width=r,this.col=e,this.tStart=t,this.tEnd=n,this.level=a,this.startIndex=0,this.endIndex=0,this.index=0,this.startV=void 0,this.endV=void 0,this.vRange[0]=1/0,this.vRange[1]=-1/0,this.globalDataLen=i,this.maxLevel=o,this.positionInfo.startX=0,this.positionInfo.endX=0,this.positionInfo.minX=0,this.positionInfo.maxX=0,this.minVTimeRange[0]=0,this.minVTimeRange[1]=0,this.maxVTimeRange[0]=0,this.maxVTimeRange[1]=0,this.dataName=l}},{key:"setRealStartAndInterval",value:function(e,t){this.realStart=e,this.sementicInterval=t}},{key:"setTStart",value:function(e){this.tStart=e}},{key:"setTEnd",value:function(e){this.tEnd=e}},{key:"setSemanticTStart",value:function(e){this.semanticTStart=e,this.tStart=Math.floor((this.semanticTStart-this.realStart)/this.sementicInterval)}},{key:"setSemanticTEnd",value:function(e){this.semanticTEnd=e,this.tEnd=Math.floor((this.semanticTEnd-this.realStart)/this.sementicInterval)-1}},{key:"getEndRange",value:function(){var e=Math.floor(this.tEnd/2);return e%2===0?[e,e+1]:[e-1,e]}},{key:"getStartRange",value:function(){var e=Math.floor(this.tStart/2);return e%2===0?[e,e+1]:[e-1,e]}},{key:"isContain",value:function(e){var t=e.level,n=Math.pow(2,this.maxLevel)/Math.pow(2,t),a=e.index*n,r=n+a-1;if(this.tStart===a&&(this.startV=e.yArray[0]),this.tEnd===r&&(this.endV=e.yArray[3]),r>=this.globalDataLen){if(a<=this.tEnd){if(e.yArray[1]<this.vRange[0]){this.vRange[0]=e.yArray[1];var o=Object(i["f"])(e.level,e.index,this.maxLevel);this.minVTimeRange=[o.startT,o.endT]}if(e.yArray[2]>this.vRange[1]){this.vRange[1]=e.yArray[2];var l=Object(i["f"])(e.level,e.index,this.maxLevel);this.maxVTimeRange=[l.startT,l.endT]}}return 6}if(a>=this.tStart&&r<=this.tEnd){if(e.yArray[1]<this.vRange[0]){this.vRange[0]=e.yArray[1];var s=Object(i["f"])(e.level,e.index,this.maxLevel);this.minVTimeRange=[s.startT,s.endT]}if(e.yArray[2]>this.vRange[1]){this.vRange[1]=e.yArray[2];var c=Object(i["f"])(e.level,e.index,this.maxLevel);this.maxVTimeRange=[c.startT,c.endT]}return 1}if(a<=this.tEnd&&r>this.tEnd)return 2;if(a>this.tEnd)return 3;if(r<this.tStart)return 4;if(r>=this.tStart)return 5;throw console.log(e,this),new Error("time out of range")}},{key:"isMissContain",value:function(e){var t=e.level,n=Math.pow(2,this.maxLevel)/Math.pow(2,t),a=e.index*n,r=n+a-1;if(r>=this.globalDataLen)return 6;if(a>=this.tStart&&r<=this.tEnd)return a==this.tStart&&r==this.tEnd?7:a===this.tStart?8:r===this.tEnd?9:"NO"!==e.gapFlag?10:1;if(a<=this.tEnd&&r>this.tEnd)return 2;if(a>this.tEnd)return 3;if(r<this.tStart)return 4;if(r>=this.tStart)return 5;throw console.log(e,this),new Error("time out of range")}},{key:"containColumnRange",value:function(e,t){if("NULL"!==e.nodeType){if(void 0===e.yArray[1]||void 0===e.yArray[2])throw new Error("error val");var n=e.level,a=Math.pow(2,this.maxLevel)/Math.pow(2,n);e.index;if(this.tStart,this.tEnd,1===t||7===t||8===t||9===t){if(e.yArray[1]<this.vRange[0]){this.vRange[0]=e.yArray[1];var r=Object(i["f"])(e.level,e.index,this.maxLevel);this.minVTimeRange=[r.startT,r.endT]}if(e.yArray[2]>this.vRange[1]){this.vRange[1]=e.yArray[2];var o=Object(i["f"])(e.level,e.index,this.maxLevel);this.maxVTimeRange=[o.startT,o.endT]}}}}},{key:"addLastVal",value:function(e){void 0!==e&&(this.endV=e)}},{key:"addFirstVal",value:function(e){void 0!==e&&(this.startV=e)}},{key:"forceMerge",value:function(e){if(void 0===e)throw new Error("undefine");e<this.vRange[0]&&(this.vRange[0]=e),e>this.vRange[1]&&(this.vRange[1]=e)}},{key:"mergeLast",value:function(e,t){var n=e*this.tEnd+t;if(void 0===n)throw new Error("undefine");n>this.vRange[1]&&(this.vRange[1]=n),n<this.vRange[0]&&(this.vRange[0]=n),this.endV=n}},{key:"mergeFirst",value:function(e,t){var n=e*this.tStart+t;if(void 0===n)throw new Error("undefine");n>this.vRange[1]&&(this.vRange[1]=n),n<this.vRange[0]&&(this.vRange[0]=n),this.startV=n}},{key:"checkIsMis",value:function(){return this.vRange[0]!==1/0&&this.vRange[1]!==-1/0||(this.isMis=!0),this.isMis}}]),e}()},"5c33":function(e,t,n){"use strict";n.d(t,"l",(function(){return s})),n.d(t,"n",(function(){return c})),n.d(t,"h",(function(){return u})),n.d(t,"d",(function(){return h})),n.d(t,"j",(function(){return f})),n.d(t,"k",(function(){return g})),n.d(t,"e",(function(){return b})),n.d(t,"f",(function(){return m})),n.d(t,"g",(function(){return v})),n.d(t,"c",(function(){return p})),n.d(t,"i",(function(){return x})),n.d(t,"m",(function(){return w})),n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return O})),n.d(t,"o",(function(){return M}));var a=n("2909"),r=(n("99af"),n("90d7"),n("d3b7"),n("159b"),n("caad"),n("2532"),n("a15b"),n("ac1f"),n("1276"),n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("569d")),i=n("75b6"),o=n("0613"),l=n("90b1");function s(e){var t=[],n=e,a=Object(i["f"])(n.level,n.index,o["a"].state.controlParams.tableMaxLevel),r=a.startT,l=a.endT;while(null!=n)l=Object(i["f"])(n.level,n.index,o["a"].state.controlParams.tableMaxLevel).endT,t.push(n.yArray),n=n.nextSibling;return{data:t,start:r,end:l,l:e.level}}function c(e,t){var n=e[0]>=t[0]?e[0]:t[0],a=e[1]<=t[1]?e[1]:t[1];return n<=a?{isIntersect:!0,pos:n===e[0]?"second":"first"}:{isIntersect:!1,pos:n===e[0]?"second":"first"}}function d(e,t){return e[0]>=t[0]&&e[1]<=t[1]?[]:e[0]>=t[0]&&e[1]>t[1]?[[t[1]+1,e[1]]]:e[0]<t[0]&&e[1]<=t[1]?[[e[0],t[0]-1]]:e[0]<t[0]&&e[1]>t[1]?[[e[0],t[0]-1],[t[1]+1,e[1]]]:[]}function u(e,t){for(var n=[[e[0],e[1]]],r=[],i=0;i<t.length;i++){for(var o=0;o<n.length;o++)c(n[o],t[i]).isIntersect?r=[].concat(Object(a["a"])(r),Object(a["a"])(d(n[o],t[i]))):r.push(n[o]);n=r,r=[]}return n}function h(e,t){return e[0]>t[1]||e[1]<t[0]?3:t[0]>=e[0]&&t[1]<=e[1]?1:2}function f(e,t,n){for(var a=e+1;a<=t;a++)n[0]=2*n[0],n[1]=2*n[1]+1;return n}function g(e,t,n,a,i,o){for(var l=new Array,s=0;s<t;s++)l.push(new r["a"](s,n[0],n[1],e,t,a,i,o));for(var c=n[1]-n[0]+1,d=n[0],u=(Math.ceil(c/t),Math.floor(t*(n[0]-d)/c)),h=Math.floor(t*(n[1]-d)/c),f=u;f<=h;f++){var g=f*c/t+d,b=(f+1)*c/t+d-1,m=Math.ceil(g),v=Math.floor(b);m<=v&&(l[f].setTStart(m),l[f].setTEnd(v)),f}return l}function b(e,t,n,a,r){for(var i=new Array(t),o=0;o<t;o++)i[o]=[0,0];for(var l=n[1]-n[0]+1,s=n[0],c=n[0]+1;c<=n[1];c++){var d=Math.floor(t*(c-1-s)/l),u=Math.floor(t*(c-s)/l);d!==u&&(i[d][1]=c-1,i[u][0]=c)}return i}function m(e){var t=[];return e.forEach((function(e){t.push([e.level+1,2*e.index,2*e.index+1])})),t}function v(e){var t=[];return e.forEach((function(e){"O"!==e.nodeType&&(console.log("compute losed node cut"),console.log(e)),null===e._leftChild&&null===e._rightChild&&"O"===e.nodeType&&t.push([e.level,e.index,e.index])})),t}function p(e,t,n,a){if(e.nextSibling&&"NULL"===e.nextSibling.nodeType)return!1;if(e.previousSibling&&"NULL"===e.previousSibling.nodeType)return!1;var r=e.yArray[1],i=e.yArray[2];return t.vRange[0]<=r&&t.vRange[1]>=i&&n.vRange[0]<=r&&n.vRange[1]>=i}function x(e,t,n){if(e[1]-e[0]+1<=t)return[n,e[0],e[1]];for(var a=Math.ceil(Math.log2(t));a<=n;a++){var r=Math.pow(2,n)/Math.pow(2,a),i=Math.floor(e[0]/r),o=Math.floor(e[1]/r);if(!(o>=Math.pow(2,a))&&o-i+1>=t)return[a,i,o]}return[]}var y="";function w(){return""===y&&(y=localStorage.getItem("om3_cookie")),y}function k(e){for(var t="",n=new Uint8Array(e),a=n.byteLength,r=0;r<a;r++)t+=String.fromCharCode(n[r]);return btoa(t)}function O(e){for(var t=atob(e),n=t.length,a=new Uint8Array(n),r=0;r<n;r++)a[r]=t.charCodeAt(r);return a.buffer}function M(e){var t=l["a"].service({lock:!0,text:e,background:"rgba(0, 0, 0, 0.7)"});return t}},"682d":function(e,t,n){},"6e47":function(e,t,n){},"75b6":function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return d}));n("d81d"),n("d3b7"),n("159b"),n("90d7"),n("2827");var a=n("898b");function r(e,t,n){var a=Math.pow(2,n)/Math.pow(2,e),r=t*a,i=r+a-1;return{startT:r,endT:i}}function i(e,t,n,a,r){return e*(a-t)/(n-t+1)}function o(e,t){var n=t[0]-t[1];console.log(n);var r=new Array;0===n?e.mint.forEach((function(t,n){r.push({x:n,y:e.mint[n],v:e.mint[n]})})):1===n?e.mint.forEach((function(t,n){r.push({x:n,y:e.mint[n],v:e.mint[n]}),r.push({x:n,y:e.maxt[n],v:e.maxt[n]})})):e.mint.forEach((function(t,n){r.push({x:n,y:e.mint[n],v:e.mint[n]}),r.push({x:n,y:e.minv[n],v:e.minv[n]}),r.push({x:n,y:e.maxv[n],v:e.maxv[n]}),r.push({x:n,y:e.maxt[n],v:e.maxt[n]})}));var i=a["g"](r,(function(e){return e.v})),o=a["h"](r,(function(e){return e.v}));return{result:r,rowData:[e.mint,e.minv,e.maxv,e.maxt],maxv:i,minv:o}}function l(e,t,n){var o=new Array,l=e[0]-e[1],s=r(e[1],t.start,e[0]).startT,c=r(e[1],t.start+t.data.length-1,e[0]).endT;t.data.forEach((function(a,d){var u=r(e[1],t.start+d,e[0]);if(0===l)o.push({x:i(n,s,c,u.startT,e[0]),y:a[0],v:a[0]});else if(1===l)o.push({x:i(n,s,c,u.startT,e[0]),y:a[0],v:a[0]}),o.push({x:i(n,s,c,u.endT,e[0]),y:a[3],v:a[3]});else{var h=i(n,s,c,u.startT,e[0]),f=i(n,s,c,u.endT,e[0]),g=i(n,s,c,u.startT+1,e[0]),b=i(n,s,c,u.endT-1,e[0]);a[0]<a[3]?(o.push({x:h,y:a[0],v:a[0]}),o.push({x:g,y:a[1],v:a[1]}),o.push({x:b,y:a[2],v:a[2]}),o.push({x:f,y:a[3],v:a[3]})):(o.push({x:h,y:a[0],v:a[0]}),o.push({x:g,y:a[2],v:a[2]}),o.push({x:b,y:a[1],v:a[1]}),o.push({x:f,y:a[3],v:a[3]}))}}));var d=a["g"](o,(function(e){return e.v})),u=a["h"](o,(function(e){return e.v}));return{renderData:o,maxv:d,minv:u}}function s(e){var t=a["g"](e.data,(function(e){return e[2]})),n=a["h"](e.data,(function(e){return e[1]}));return{maxv:t,minv:n}}function c(e,t,n,a){for(var r=[],o=e[0].tStart,l=e[e.length-1].tEnd,s=0;s<e.length;s++){var c=Math.log2(n),d=i(t,o,l,e[s].tStart,c),u=i(t,o,l,e[s].tEnd,c),h=d+.1,f=u-.1;e[s].positionInfo.startX=d,e[s].positionInfo.endX=u,e[s].positionInfo.minX=h,e[s].positionInfo.maxX=f,e[s].startV&&r.push({x:i(t,o,l,e[s].tStart,Math.log2(n)),y:e[s].startV,v:e[s].startV}),void 0!==e[s].startV&&void 0!==e[s].endV?e[s].startV<e[s].endV?(r.push({x:h,y:e[s].vRange[0],v:e[s].vRange[0]}),r.push({x:f,y:e[s].vRange[1],v:e[s].vRange[1]})):(r.push({x:h,y:e[s].vRange[1],v:e[s].vRange[1]}),r.push({x:f,y:e[s].vRange[0],v:e[s].vRange[0]})):(r.push({x:d,y:e[s].vRange[0],v:e[s].vRange[0]}),r.push({x:u,y:e[s].vRange[1],v:e[s].vRange[1]})),e[s].endV&&r.push({x:u,y:e[s].endV,v:e[s].endV})}return r}function d(e,t,n,a){var r=new Array,i=-1/0,o=1/0;return e.forEach((function(e){i=Math.max(i,e.v),o=Math.min(o,e.v),r.push({t:e.t,v:e.v,x:t*(e.t-n)/(a-n+1),y:0})})),{minv:o,maxv:i,res:r}}},"878b":function(e,t,n){},9284:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23"),r={class:"d-flex flex-column h-100"},i={class:"gloal-content flex-grow-1 d-flex flex-row mx-2"};function o(e,t,n,o,l,s){var c=Object(a["resolveComponent"])("global-header"),d=Object(a["resolveComponent"])("left-side-data-control-panel"),u=Object(a["resolveComponent"])("dispaly-content-panel");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",r,[Object(a["createVNode"])(c),Object(a["createElementVNode"])("div",i,[Object(a["createVNode"])(d),Object(a["createVNode"])(u)])])}var l=function(e){return Object(a["pushScopeId"])("data-v-3ff0d40c"),e=e(),Object(a["popScopeId"])(),e},s={class:"navbar navbar-light bg-light"},c=l((function(){return Object(a["createElementVNode"])("div",{class:"container-fluid"},[Object(a["createElementVNode"])("a",{class:"navbar-brand",href:"#"},[Object(a["createTextVNode"])(" OM"),Object(a["createElementVNode"])("sup",null,"3")]),Object(a["createElementVNode"])("a",{href:"https://docs.google.com/document/d/1OFRmg6ShyKj1i4w2zbHGIOyjUxGR7tcvreKuWCIerHk/edit?usp=sharing"},"user guide")],-1)})),d=[c];function u(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createElementBlock"])("nav",s,d)}var h=Object(a["defineComponent"])({name:"GlobalHeader",components:{},props:{},setup:function(){var e=Object(a["ref"])(!1),t=function(){e.value=!e.value},n=function(){e.value=!0};return{isVisible:e,closePanel:t,openImportPanel:n}}}),f=(n("3fa6"),n("d959")),g=n.n(f);const b=g()(h,[["render",u],["__scopeId","data-v-3ff0d40c"]]);var m=b,v=(n("a630"),n("3ca3"),n("d3b7"),n("ddb0"),function(e){return Object(a["pushScopeId"])("data-v-94fda858"),e=e(),Object(a["popScopeId"])(),e}),p={class:"data-control-panel radius"},x={class:"choose_container choose_mode_container ms-1"},y={key:0,class:"dbsetting-control-container mt-2"},w=v((function(){return Object(a["createElementVNode"])("label",null,Object(a["toDisplayString"])("DB Setup"),-1)})),k={key:0,class:"mt-2"},O=Object(a["createTextVNode"])("Clear Flag"),M={key:1,class:"om3-transform-control-container mt-2"},j=v((function(){return Object(a["createElementVNode"])("label",null,Object(a["toDisplayString"])("Data Transform"),-1)})),C={key:0,class:"mt-2"},T=Object(a["createTextVNode"])("Choose Data"),D=v((function(){return Object(a["createElementVNode"])("label",null,"Please choose a table,which inclues two columns(t interger,v double precision)(t should be a positive integer starting from zero)",-1)})),N=v((function(){return Object(a["createElementVNode"])("label",null,"Please select a date and time, which will be linearly mapped to t during visualization ",-1)})),R={class:"example-basic"},L={class:"dialog-footer"},S=Object(a["createTextVNode"])("Cancel"),I=Object(a["createTextVNode"])(" Confirm "),_=Object(a["createTextVNode"])("Choose Data"),A=v((function(){return Object(a["createElementVNode"])("label",null,"Please choose tables,which inclues two columns(t interger,v double precision)(t should be a positive integer starting from zero). All the data you choose should be the same length",-1)})),V=v((function(){return Object(a["createElementVNode"])("label",null,"Please select a date and time, which will be linearly mapped to t during visualization ",-1)})),E={class:"example-basic"},B={class:"dialog-footer"},P=Object(a["createTextVNode"])("Cancel"),F=Object(a["createTextVNode"])(" Confirm "),U={class:"choose_container choose_line_type_container ms-1"},X={key:2,class:"progressive-container ms-1 mt-2"},z=v((function(){return Object(a["createElementVNode"])("span",null,"Progressive",-1)})),H={key:3,class:"table-choose-container mt-2 ms-1"},Y={key:4,class:"class-choose-container mt-2 ms-1"};function W(e,t,n,r,i,o){var l=Object(a["resolveComponent"])("el-radio-button"),s=Object(a["resolveComponent"])("el-radio-group"),c=Object(a["resolveComponent"])("el-switch"),d=Object(a["resolveComponent"])("el-input"),u=Object(a["resolveComponent"])("el-button"),h=Object(a["resolveComponent"])("el-popconfirm"),f=Object(a["resolveComponent"])("el-option"),g=Object(a["resolveComponent"])("el-select"),b=Object(a["resolveComponent"])("el-form-item"),m=Object(a["resolveComponent"])("el-date-picker"),v=Object(a["resolveComponent"])("el-time-picker"),W=Object(a["resolveComponent"])("el-form"),G=Object(a["resolveComponent"])("el-dialog"),Q=Object(a["resolveDirective"])("loading");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",p,[Object(a["createElementVNode"])("div",x,[Object(a["createVNode"])(s,{modelValue:e.chooseMode,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.chooseMode=t}),size:"medium",onChange:e.handleModeChange},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"Default"}),Object(a["createVNode"])(l,{label:"Custom"})]})),_:1},8,["modelValue","onChange"])]),"Custom"===e.chooseMode?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",y,[Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(c,{modelValue:e.isOpenDbSetup,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.isOpenDbSetup=t}),name:"DB Setup"},null,8,["modelValue"]),w]),e.isOpenDbSetup?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",k,[Object(a["createVNode"])(d,{modelValue:e.customDBHostName,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.customDBHostName=t}),type:"string",placeholder:"DB Host Name"},null,8,["modelValue"]),Object(a["createVNode"])(d,{modelValue:e.customUserName,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.customUserName=t}),type:"string",placeholder:"User Name"},null,8,["modelValue"]),Object(a["createVNode"])(d,{modelValue:e.customDBPassword,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.customDBPassword=t}),type:"password",placeholder:"DB Password"},null,8,["modelValue"]),Object(a["createVNode"])(d,{modelValue:e.customDBName,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.customDBName=t}),type:"string",placeholder:"DB Name"},null,8,["modelValue"]),Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(u,{class:"btn mt-2",onClick:e.handleTestConn,type:"primary"},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.testConnectResult),1)]})),_:1},8,["onClick"])]),Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(u,{class:"btn mt-2",onClick:e.createCustomDBConn,type:"primary"},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.createDBConn),1)]})),_:1},8,["onClick"])]),Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(u,{class:"btn mt-2",onClick:e.initOM3DBEnv,type:"primary"},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.initOm3DB),1)]})),_:1},8,["onClick"])]),Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(h,{title:"This will clear all om3 table, are you sure you want to do this?",onConfirm:e.clearOM3DBEnv},{reference:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(u,{class:"btn mt-2",type:"primary"},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.clearOm3DB),1)]})),_:1})]})),_:1},8,["onConfirm"])]),Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(u,{class:"btn mt-2",onClick:e.clearIndexFlag,type:"primary"},{default:Object(a["withCtx"])((function(){return[O]})),_:1},8,["onClick"])])])):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0),"Custom"===e.chooseMode?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",M,[Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(c,{modelValue:e.isOpenTransform,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.isOpenTransform=t}),name:"OM3 Transform"},null,8,["modelValue"]),j]),e.isOpenTransform?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",C,[Object(a["createElementVNode"])("div",null,["Single"===e.chooseLineType?(Object(a["openBlock"])(),Object(a["createBlock"])(u,{key:0,class:"btn mt-2",text:"",onClick:t[7]||(t[7]=function(t){return e.dialogFormVisible=!0}),type:"primary"},{default:Object(a["withCtx"])((function(){return[T]})),_:1})):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])(G,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.dialogFormVisible=t}),title:"Single Line Transform"},{footer:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("span",L,[Object(a["createVNode"])(u,{onClick:t[12]||(t[12]=function(t){return e.dialogFormVisible=!1})},{default:Object(a["withCtx"])((function(){return[S]})),_:1}),Object(a["withDirectives"])(Object(a["createVNode"])(u,{type:"primary",onClick:e.performTransformForSingeLine},{default:Object(a["withCtx"])((function(){return[I]})),_:1},8,["onClick"]),[[Q,e.fullscreenLoading,void 0,{fullscreen:!0,lock:!0}]])])]})),default:Object(a["withCtx"])((function(){return[D,Object(a["createVNode"])(W,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(b,{label:"Table"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(g,{modelValue:e.singleLineTableName,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.singleLineTableName=t}),placeholder:"Please select a table for transform"},{default:Object(a["withCtx"])((function(){return[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.allCustomDBTables,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])(f,{key:t,label:e,value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),N,Object(a["createVNode"])(b,{label:"Date Range"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(m,{modelValue:e.lineDateRange,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.lineDateRange=t}),type:"daterange","start-placeholder":"Start Date","end-placeholder":"End Date","default-value":[new Date(2010,9,1),new Date(2010,10,1)]},null,8,["modelValue","default-value"])]})),_:1}),Object(a["createVNode"])(b,{label:"Time Range"},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("div",R,[Object(a["createVNode"])(v,{modelValue:e.lineStartTime,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.lineStartTime=t}),"arrow-control":"",placeholder:"Start Time"},null,8,["modelValue"]),Object(a["createVNode"])(v,{modelValue:e.lineEndTime,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.lineEndTime=t}),"arrow-control":"",placeholder:"End Time"},null,8,["modelValue"])])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"]),Object(a["createElementVNode"])("div",null,["Multi"===e.chooseLineType?(Object(a["openBlock"])(),Object(a["createBlock"])(u,{key:0,class:"btn mt-2",text:"",onClick:t[14]||(t[14]=function(t){return e.multiLineTransformDialogVisible=!0}),type:"primary"},{default:Object(a["withCtx"])((function(){return[_]})),_:1})):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])(G,{modelValue:e.multiLineTransformDialogVisible,"onUpdate:modelValue":t[21]||(t[21]=function(t){return e.multiLineTransformDialogVisible=t}),title:"Multi Line Transform"},{footer:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("span",B,[Object(a["createVNode"])(u,{onClick:t[20]||(t[20]=function(t){return e.multiLineTransformDialogVisible=!1})},{default:Object(a["withCtx"])((function(){return[P]})),_:1}),Object(a["withDirectives"])(Object(a["createVNode"])(u,{type:"primary",onClick:e.perfromTransformForMulitLine},{default:Object(a["withCtx"])((function(){return[F]})),_:1},8,["onClick"]),[[Q,e.fullscreenLoading,void 0,{fullscreen:!0,lock:!0}]])])]})),default:Object(a["withCtx"])((function(){return[A,Object(a["createVNode"])(W,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(b,{label:"Table"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(g,{class:"multi-line-select",modelValue:e.multiLineTableNames,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.multiLineTableNames=t}),multiple:"",placeholder:"Please select table for transform"},{default:Object(a["withCtx"])((function(){return[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.allCustomDBTables,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])(f,{key:t,label:e,value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(a["createVNode"])(d,{class:"mb-4",modelValue:e.customMultiLineClassName,"onUpdate:modelValue":t[16]||(t[16]=function(t){return e.customMultiLineClassName=t}),placeholder:"Please define a group for the lines you select",clearable:""},null,8,["modelValue"]),V,Object(a["createVNode"])(b,{label:"Date Range"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(m,{modelValue:e.lineDateRange,"onUpdate:modelValue":t[17]||(t[17]=function(t){return e.lineDateRange=t}),type:"daterange","start-placeholder":"Start Date","end-placeholder":"End Date","default-value":[new Date(2010,9,1),new Date(2010,10,1)]},null,8,["modelValue","default-value"])]})),_:1}),Object(a["createVNode"])(b,{label:"Time Range"},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("div",E,[Object(a["createVNode"])(v,{modelValue:e.lineStartTime,"onUpdate:modelValue":t[18]||(t[18]=function(t){return e.lineStartTime=t}),"arrow-control":"",placeholder:"Start Time"},null,8,["modelValue"]),Object(a["createVNode"])(v,{modelValue:e.lineEndTime,"onUpdate:modelValue":t[19]||(t[19]=function(t){return e.lineEndTime=t}),"arrow-control":"",placeholder:"End Time"},null,8,["modelValue"])])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])])):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",U,[Object(a["createVNode"])(s,{modelValue:e.chooseLineType,"onUpdate:modelValue":t[22]||(t[22]=function(t){return e.chooseLineType=t}),size:"medium",onChange:e.handleLineTypeChange},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"Single"}),Object(a["createVNode"])(l,{label:"Multi"})]})),_:1},8,["modelValue","onChange"])]),"Single"===e.chooseLineType?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",X,[z,Object(a["createVNode"])(c,{modelValue:e.progressive,"onUpdate:modelValue":t[23]||(t[23]=function(t){return e.progressive=t}),name:"Progressive",onChange:e.handleProgressiveChange},null,8,["modelValue","onChange"])])):Object(a["createCommentVNode"])("",!0),"Single"==e.chooseLineType?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",H,["Default"===e.chooseMode?(Object(a["openBlock"])(),Object(a["createBlock"])(g,{key:0,modelValue:e.currentTable,"onUpdate:modelValue":t[24]||(t[24]=function(t){return e.currentTable=t}),placeholder:"Select",size:"medium",onChange:e.handleTableChange},{default:Object(a["withCtx"])((function(){return[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.allDefaultTables,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])(f,{key:t,label:e,value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"])):Object(a["createCommentVNode"])("",!0),"Custom"===e.chooseMode?(Object(a["openBlock"])(),Object(a["createBlock"])(g,{key:1,modelValue:e.currentTable,"onUpdate:modelValue":t[25]||(t[25]=function(t){return e.currentTable=t}),placeholder:"Select",size:"medium",onClick:e.loadCustomTableAndInfo,onChange:e.handleTableChange},{default:Object(a["withCtx"])((function(){return[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.allCustomTables,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])(f,{key:t,label:e,value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onClick","onChange"])):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0),"Multi"==e.chooseLineType?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Y,["Default"===e.chooseMode?(Object(a["openBlock"])(),Object(a["createBlock"])(g,{key:0,modelValue:e.currentMultiClass,"onUpdate:modelValue":t[26]||(t[26]=function(t){return e.currentMultiClass=t}),placeholder:"Select",size:"medium",onChange:e.handleMultiLineClassChange},{default:Object(a["withCtx"])((function(){return[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(Array.from(e.allMultLineClass.keys()),(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])(f,{key:t,label:e,value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"])):Object(a["createCommentVNode"])("",!0),"Custom"===e.chooseMode?(Object(a["openBlock"])(),Object(a["createBlock"])(g,{key:1,modelValue:e.currentMultiClass,"onUpdate:modelValue":t[27]||(t[27]=function(t){return e.currentMultiClass=t}),placeholder:"Select",size:"medium",onChange:e.handleMultiLineClassChange},{default:Object(a["withCtx"])((function(){return[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(Array.from(e.allCustomMultiLineClass.keys()),(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])(f,{key:t,label:e,value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"])):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0)])}n("ac1f"),n("1276");var G=n("0613"),Q=n("2295"),J=n("ff60"),q=Object(a["defineComponent"])({data:function(){return{testConnectResult:"Test Connection",createDBConn:"Create Connection",initOm3DB:"Init OM3 DB",clearOm3DB:"Clear OM3 DB",customDBHostName:"",customDBPassword:"",customDBName:"",customUserName:"",isOpenDbSetup:!1,isOpenTransform:!1,lineDateRange:[new Date(2010,9,1),new Date(2010,10,1)],lineStartTime:new Date(2010,9,1),lineEndTime:new Date(2010,10,1),fullscreenLoading:!1,singleLineTableName:"",multiLineTableNames:[],customMultiLineClassName:""}},components:{},methods:{updateTestConnRes:function(e){this.testConnectResult=e},updateDBCreateConn:function(e){this.createDBConn=e},updateInitDB:function(e){this.initOm3DB=e},updateClearDB:function(e){this.clearOm3DB=e},openFullScreenLoading:function(){this.fullscreenLoading=!0},closeFullScreenLoading:function(){this.fullscreenLoading=!1},openNotification:function(e,t,n){Object(Q["a"])({title:e,message:t,type:n})},handleTestConn:function(){var e=this;G["a"].dispatch("testCustomDBConn",{hostName:this.customDBHostName,possword:this.customDBPassword,dbName:this.customDBName,userName:this.customUserName}).then((function(t){var n=t.data["data"]["result"];"success"===n?(e.storeDBConfig(),e.updateTestConnRes("Test Success"),e.openNotification("Test Connection","Test Connection Success","success")):(console.error(t.data["msg"]),e.updateTestConnRes("Test Fail"),e.openNotification("Test Connection",t.data["msg"],"error"))}))},storeDBConfig:function(){localStorage.setItem("customDBHostName",this.customDBHostName),localStorage.setItem("customDBPassword",this.customDBPassword),localStorage.setItem("customDBName",this.customDBName),localStorage.setItem("customUserName",this.customUserName)},restoreDBConfig:function(){var e=localStorage.getItem("customDBHostName"),t=localStorage.getItem("customDBPassword"),n=localStorage.getItem("customDBName"),a=localStorage.getItem("customUserName");e&&(this.customDBHostName=e),t&&(this.customDBPassword=t),n&&(this.customDBName=n),a&&(this.customUserName=a)},createCustomDBConn:function(){var e=this;G["a"].dispatch("createCustomDBConn",{hostName:this.customDBHostName,possword:this.customDBPassword,dbName:this.customDBName,userName:this.customUserName}).then((function(t){var n=t.data["data"]["result"];"success"===n?(e.updateDBCreateConn("Create Success"),e.openNotification("Create Connection","Create Connection Success","success")):(console.error(t.data["msg"]),e.updateDBCreateConn("Create Fail"),e.openNotification("Create Connection",t.data["msg"],"error"))}))},initOM3DBEnv:function(){var e=this;G["a"].dispatch("initOM3DB").then((function(t){console.log(t);var n=t.data["result"];"success"===n?(e.updateInitDB("Init Success"),e.openNotification("Init OM3 ENV","Init OM3 ENV Success","success")):(console.error(t.data["msg"]),e.updateInitDB("Init Fail"),e.openNotification("Init OM3 ENV",t.data["msg"],"error"))}))},clearOM3DBEnv:function(){var e=this;console.log("clear om3 env"),G["a"].dispatch("clearOM3Table").then((function(t){console.log(t);var n=t.data["result"];"success"===n?(e.updateClearDB("Clear Success"),e.openNotification("Clear OM3 ENV","Clear OM3 ENV Success","success")):(console.error(t.data["msg"]),e.updateClearDB("Clear Fail"),e.openNotification("Clear OM3 ENV",t.data["msg"],"error"))}))},performTransformForSingeLine:function(){var e=this,t=this.lineDateRange[0].toISOString().split("T")[0],n=this.lineDateRange[1].toISOString().split("T")[0],a=this.lineStartTime.toISOString().split("T")[1].split("Z")[0],r=this.lineEndTime.toISOString().split("T")[1].split("Z")[0],i=t+" "+a,o=n+" "+r;this.openFullScreenLoading(),G["a"].dispatch("performTransformForSingeLine",{startTime:i,endTime:o,tableName:this.singleLineTableName}).then((function(t){200===t.data["code"]?console.log("single line transform success"):console.error(t.data["msg"]),e.closeFullScreenLoading(),e.dialogFormVisible=!1}))},perfromTransformForMulitLine:function(){var e=this,t=this.lineDateRange[0].toISOString().split("T")[0],n=this.lineDateRange[1].toISOString().split("T")[0],a=this.lineStartTime.toISOString().split("T")[1].split("Z")[0],r=this.lineEndTime.toISOString().split("T")[1].split("Z")[0],i=t+" "+a,o=n+" "+r;this.openFullScreenLoading(),G["a"].dispatch("performTransformForMultiLine",{startTime:i,endTime:o,tableNames:Array.from(this.multiLineTableNames.values()),multiLineClassName:this.customMultiLineClassName}).then((function(t){200===t.data["code"]?console.log("multi line transform success"):console.error(t.data["msg"]),e.closeFullScreenLoading(),e.multiLineTransformDialogVisible=!1})),console.log(i,o,this.customMultiLineClassName,Array.from(this.multiLineTableNames.values()))}},watch:{isOpenDbSetup:function(e,t){e?this.restoreDBConfig():(this.updateDBCreateConn("Create Connection"),this.updateTestConnRes("Test Connection"))},isOpenTransform:function(e,t){var n=this;e&&G["a"].dispatch("getAllCustomTables").then((function(e){200===e["code"]?n.allCustomDBTables=e["data"]["result"]:console.error(e["msg"])}))}},setup:function(){var e=Object(a["ref"])(G["a"].state.controlParams.progressive),t=Object(a["ref"])("Default"),n=Object(a["ref"])("Single"),r=Object(a["ref"])(!1),i=Object(a["ref"])(!1),o=G["a"].state.allAlgoritem,l=Object(a["ref"])(G["a"].state.controlParams.currentSampleMethod),s=Object(a["ref"])(G["a"].state.controlParams.currentTable),c=Object(a["ref"])(G["a"].state.controlParams.currentCustomTable),d=Object(a["ref"])(G["a"].state.controlParams.currentMultiLineClass),u=G["a"].state.controlParams.sampleMethods,h=Object(a["computed"])((function(){return G["a"].state.allTables})),f=Object(a["computed"])((function(){return G["a"].state.allCustomTables})),g=Object(a["computed"])((function(){return G["a"].state.allDefaultTables})),b=Object(a["computed"])((function(){return G["a"].state.allMultiLineClassInfoMap})),m=Object(a["computed"])((function(){return G["a"].state.allCustomMultiLineClassInfoMap})),v=function(){G["a"].commit("alterSampleMethod",l.value)},p=function(){G["a"].commit("alterMode",t.value),n.value="Single",G["a"].commit("alterLineType",n.value)},x=function(){G["a"].commit("alterLineType",n.value),G["a"].dispatch("getAllMultiLineClassInfo")},y=function(){G["a"].commit("alterCurrentMulitLineClass",d.value)},w=function(){G["a"].commit("alterTable",s)},k=function(){G["a"].commit("alterCustomTable",c.value)},O=function(){G["a"].dispatch("loadCustomTableAndInfo")},M=function(){G["a"].commit("alterProgressive",e.value)},j=function(){Object(J["a"])()};return{allAlgoritem:o,chooseMode:t,chooseLineType:n,handleModeChange:p,currentSampleAlgorithm:l,allSampleAlgoritem:u,handleSampleMethodChange:v,currentTable:s,allTables:h,allDefaultTables:g,handleTableChange:w,handleLineTypeChange:x,allMultLineClass:b,currentMultiClass:d,handleMultiLineClassChange:y,dialogFormVisible:r,handleCustomTableChange:k,loadCustomTableAndInfo:O,allCustomTables:f,allCustomMultiLineClass:m,multiLineTransformDialogVisible:i,progressive:e,handleProgressiveChange:M,clearIndexFlag:j}}});n("4b42");const Z=g()(q,[["render",W],["__scopeId","data-v-94fda858"]]);var K=Z,$=function(e){return Object(a["pushScopeId"])("data-v-1bd4215f"),e=e(),Object(a["popScopeId"])(),e},ee={class:"display-content-panel ms-1"},te=$((function(){return Object(a["createElementVNode"])("div",{id:"content-container"},null,-1)}));function ne(e,t,n,r,i,o){var l=Object(a["resolveComponent"])("device-control-panel");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ee,[Object(a["createVNode"])(l),te])}n("99af");var ae=function(e){return Object(a["pushScopeId"])("data-v-5adbeb70"),e=e(),Object(a["popScopeId"])(),e},re={class:"device-control-panel"},ie={class:"d-flex justify-content-center"},oe=Object(a["createStaticVNode"])('<div class="btn-group" data-v-5adbeb70><ul class="device-dimensions-menu dropdown-menu" data-v-5adbeb70><li data-v-5adbeb70><a class="dropdown-item" href="#" data-v-5adbeb70>Action</a></li><li data-v-5adbeb70><a class="dropdown-item" href="#" data-v-5adbeb70>Another action</a></li><li data-v-5adbeb70><a class="dropdown-item" href="#" data-v-5adbeb70>Something else here</a></li><li data-v-5adbeb70><hr class="dropdown-divider" data-v-5adbeb70></li><li data-v-5adbeb70><a class="dropdown-item" href="#" data-v-5adbeb70>Separated link</a></li></ul></div><i class="bi bi-arrow-clockwise" data-v-5adbeb70></i>',2),le={class:"d-flex ms-2"},se=ae((function(){return Object(a["createElementVNode"])("span",{style:{"line-height":"31px"}},"×",-1)})),ce=ae((function(){return Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-sm btn-secondary ms-2"},[Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-clockwise",viewBox:"0 0 16 16"},[Object(a["createElementVNode"])("path",{"fill-rule":"evenodd",d:"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"}),Object(a["createElementVNode"])("path",{d:"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"})])],-1)}));function de(e,t,n,r,i,o){Object(a["resolveComponent"])("el-date-picker");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",re,[Object(a["createElementVNode"])("div",ie,[oe,Object(a["createElementVNode"])("div",le,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"number",class:"form-control form-control-sm dim-input","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.widthRef=t})},null,512),[[a["vModelText"],e.widthRef]]),se,Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"number",class:"form-control form-control-sm dim-input","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.heightRef=t})},null,512),[[a["vModelText"],e.heightRef]]),ce]),Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("button",{id:"create_panel_btn",type:"button",class:"btn btn-secondary ms-2",onClick:t[3]||(t[3]=Object(a["withModifiers"])((function(){return e.handleCreatePanel&&e.handleCreatePanel.apply(e,arguments)}),["prevent"]))}," create ")])])}n("7c3c");var ue=Object(a["defineComponent"])({setup:function(){var e=Object(a["ref"])([new Date("2019-07-11 00:00:00"),new Date("2020-05-19 00:00:00")]),t=Object(a["ref"])(600),n=Object(a["ref"])(600),r=Object(a["computed"])((function(){return G["a"].state.controlParams.currentDB})),i=function(){var e=G["a"].state.controlParams.tableMaxLevel;if("Single"!==G["a"].state.controlParams.currentLineType||"ViewChangeQueryFinal"!==G["a"].state.controlParams.currentSampleMethod)if("Multi"!==G["a"].state.controlParams.currentLineType){console.log("multi wavle");var a={width:t.value,height:n.value,type:G["a"].state.controlParams.currentTimeBoxType};G["a"].dispatch("loadMultiTimeSeriesInitData",a)}else{var r={startTime:0,endTime:Math.pow(2,e)-1,width:t.value,height:n.value,name:"load_shape_search"};G["a"].dispatch("loadMultiTimeSeriesInitData",r)}else{var i={startTime:0,endTime:Math.pow(2,e)-1,width:t.value,height:n.value,name:"load_shape_search"};G["a"].dispatch("loadViewChangeQueryWSMinMaxMissDataInitData",i)}};return{dateRangeRef:e,handleCreatePanel:i,widthRef:t,heightRef:n,currentDB:r}}});n("06c9");const he=g()(ue,[["render",de],["__scopeId","data-v-5adbeb70"]]);var fe=he,ge=n("898b"),be=(n("2909"),n("3835"));n("d81d"),n("159b"),n("fb6a"),n("4de4"),n("4e82"),n("cb29"),n("90d7"),n("c740"),n("e9c4");function me(e){var t=ge["i"](),n=null,a=null;function r(r){var i,o=e.length;if(a===e)i=n;else{var l=e.reduce((function(e,t){var n=Object(be["a"])(e,2),a=n[0],r=n[1];return[a+t,r.concat([a+t])]}),[0,[0]]),s=Object(be["a"])(l,2),c=s[0],d=s[1],u=o/c;d=d.map((function(e){return e*u})),n=d,a=e,i=d}var h=t(r),f=i.findIndex((function(e,t){return e<=h&&(t>=o-1||i[t+1]>h)}));return f>=o-1?o:f<0?0:f+(h-i[f])/(i[f+1]-i[f])}return r.changeDistortion=function(t){return e=t,r},r.copy=function(){return me(JSON.parse(JSON.stringify(e)))},r.domain=function(e){return e?(t.domain(e),r):t.domain()},r.range=function(e){return e?(t.range(e),r):t.range()},r.nice=t.nice,r.ticks=t.ticks,r.tickFormat=t.tickFormat,r}function ve(e,t,n){function a(a){var r=e(a),i=r<n,o=ge["e"](e.range()),l=o[0],s=o[1],c=i?n-l:s-n;return 0==c&&(c=s-l),(i?-1:1)*c*(t+1)/(t+c/Math.abs(r-n))+n}return a.distortion=function(e){return arguments.length?(t=+e,a):t},a.focus=function(e){return arguments.length?(n=+e,a):n},a.copy=function(){return ve(e.copy(),t,n)},a.domain=function(t){return t?(e.domain(t),a):e.domain()},a.range=function(t){return t?(e.range(t),a):e.range()},a.nice=e.nice,a.ticks=e.ticks,a.tickFormat=e.tickFormat,a}var pe=n("bc3a"),xe=n.n(pe),ye=(n("2827"),n("75b6"));n("5c33");function we(e){Math.pow(2,G["a"].state.controlParams.tableMaxLevel);console.log(e);var t={startX:0,startY:0,offsetX:0,offsetY:0,isMouseDown:!1,isMove:!1},n={top:20,bottom:20,left:40,right:20},a=e.root,r=e.width,i=e.distortion,o=[];a.clearListeners(!0);var l=ve(ge["i"](),0,0).domain([0,r]).range([0,r]),s=me(i).domain([0,r]).range([0,r]),c=ge["i"]().domain([a.yArray[2],a.yArray[3]]).range([e.height,0]),d=ge["a"](s),u=ge["b"](c),h=i,f=[],g=ge["k"]("#content-container").append("svg");g.attr("width",r+n.left+n.right).attr("height",e.height+n.top+n.bottom).attr("transform","translate(".concat(e.x,",").concat(e.y,")")).style("background-color","#fff"),g.append("g").attr("class","x axis").attr("transform","translate(".concat(n.left,",").concat(e.height+n.top,")")).call(d),g.append("g").attr("class","y axis").attr("transform","translate(".concat(n.left,",").concat(n.top,")")).call(u);var b=function(){var e=i.reduce((function(e,t){var n=Object(be["a"])(e,3),a=n[0],r=n[1],i=n[2];if(t===r){var o=i.pop();return o[1]+=t,i.push(o),[a+t,t,i]}return i.push([a,a+t,t,null]),[a+t,t,i]}),[0,null,[]]),t=Object(be["a"])(e,3),n=t[0],l=t[2];l=l.map((function(e){return e.map((function(e,t){return t>2?e:e/n*r}))})),a.clearListeners(!0),s.changeDistortion(i),g.select(".x.axis").call(d),f&&(o=f),l.forEach((function(e){a.getDetailData(e.slice(0,2),e[2],(function(t){if(e[3]=t,!l.filter((function(e){return!e[3]})).length){var n=l.reduce((function(e,t){return e.concat(t[3])}),[]).sort((function(e,t){return e.x-t.x}));f=n,o=n}}))}))},m=0,v=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){l.focus(r/2);var n=0;h=i.map((function(e,t){var a=l(t+1),r=a-n;return r=r>1?1/Math.round(r):Math.round(1/r),n=a,r}))}var a=h[0];i=h.slice(Math.max(0,Math.round(r/2-e)),Math.round(3*r/2-e)),i=e<r/2?i.concat(new Array(r-i.length).fill(a)):new Array(r-i.length).fill(a).concat(i)},p=function(e){l.distortion(++m),v(e,!0)},x=function(e){0!==m&&(l.distortion(--m),v(e,!0))};g.on("mousemove",(function(n){if(e.isChoosed){var a=n.offsetX-40;0!==m&&(v(a),b())}else t.isMouseDown&&(t.offsetX=n.x-t.startX,t.offsetY=n.y-t.startY,ge["k"](this).attr("transform","translate(".concat(e.x+t.offsetX,",").concat(e.y+t.offsetY,")")),t.isMove=!0)})),g.on("mousedown",(function(n){if(e.isChoosed){var a=n.offsetX-40;switch(n.which){case 1:p(a);break;case 2:m=0,i=new Array(r).fill(1),h=i;break;case 3:x(a);break}g.select(".title").text(e.algorithm+" method:"+e.denoiseMethod+" threshold:"+e.denoiseThreshold+" level:"+m),b()}else t.isMouseDown=!0,t.startX=n.x,t.startY=n.y})),g.on("mouseup",(function(n){t.isMouseDown&&!e.isChoosed&&(e.x+=t.offsetX,e.y+=t.offsetY,t.isMouseDown=!1,t.isMove=!1)})),g.on("contextmenu",(function(t){e.isChoosed?(ge["k"](this).style("border","solid").style("border-width","1px").style("border-color","#fff"),e.isChoosed=!1):(ge["k"](this).style("border","solid").style("border-width","1px").style("border-color","#84fcb6"),e.isChoosed=!0),t.preventDefault(),t.stopPropagation()})),g.append("text").attr("class","title").text(e.algorithm+" method:"+e.denoiseMethod+" threshold:"+e.denoiseThreshold+" level:"+m).attr("x",e.width/2+n.left).attr("y",n.top).attr("text-anchor","middle").attr("font-size",10),b();var y=ge["f"]().x((function(e){return s(e.x)})).y((function(e){return c(e.y)})),w=null;function k(e,t){w&&(w.remove(),w=null),w=g.append("g").attr("transform","translate(".concat(n.left,",").concat(n.top,")")),w.append("path").datum(e).attr("fill","none").attr("stroke","steelblue").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("d",t)}setInterval((function(){k(o,y)}),100)}var ke=n("de57"),Oe=n("d4ec"),Me=n("bee2"),je=(n("4ec9"),n("b64b"),n("1da1"));n("96cf"),n("569d"),new Map,new Map,new Map;function Ce(e,t){return Te.apply(this,arguments)}function Te(){return Te=Object(je["a"])(regeneratorRuntime.mark((function e(t,n){var a,r,i,o,l,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.dataManagers,new Map,a.length,r=t.width,t.maxLevel,t.currentLevel,i=t.timeRange,console.log(t),o=[],l=function(e){var n=t.dataManagers[e];if(!n.isShow)return"continue";o.push(new Promise((function(a,o){n.viewChangeInteractionFinal1(10,r,i,null,null).then((function(n){t.columnInfos[e]=n,a(null)}))})))},s=0;case 11:if(!(s<t.columnInfos.length)){e.next=18;break}if(c=l(s),"continue"!==c){e.next=15;break}return e.abrupt("continue",15);case 15:s++,e.next=11;break;case 18:return e.next=20,Promise.all(o);case 20:return e.abrupt("return",t.columnInfos);case 21:case"end":return e.stop()}}),e)}))),Te.apply(this,arguments)}function De(e,t,n,a,r,i,o){return Ne.apply(this,arguments)}function Ne(){return Ne=Object(je["a"])(regeneratorRuntime.mark((function e(t,n,a,r,i,o,l){var s,c,d,u,h,f,g,b,m,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(n>i)){e.next=2;break}return e.abrupt("return",[]);case 2:if(s=[],"zoom_out"!==l.inter)for(c=function(e){s.push(new Promise((function(i,o){t[e].getDataMinMaxMiss(n,a,r,!0).then((function(){i(null)}))})))},d=0;d<t.length;d++)c(d);if(u=[],!l.noRet)for(h=0;h<t.length;h++)f=t[h].levelIndexObjs[n].getDataByIndex(a,r),f.start=Object(ye["f"])(n,f.start,i).startT,f.end=Object(ye["f"])(n,f.end,i).endT,g=Object(ye["d"])([i,n],f,o),b=g.renderData,m=g.minv,v=g.maxv,u.push({renderData:b,minv:m,maxv:v});return e.next=8,Promise.all(s);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)}))),Ne.apply(this,arguments)}for(var Re=[{marutisktr:"汽车-#0e7735"},{tatamotorssktr:"汽车-#329a51"},{eichermotsktr:"汽车-#60ba6c"},{heromotocosktr:"摩托-#94d391"},{mmsktr:"汽车-#c0e6ba"},{axisbanksktr:"金融-#d14904"},{indusindbksktr:"金融-#e4580b"},{kotakbanksktr:"金融-#fda55e"},{sbinsktr:"银行-#353535"},{icicibanksktr:"银行-#4d4d4d"},{hdfcsktr:"银行-#626262"},{hdfcbanksktr:"银行-#757575"},{infysktr:"信息-#125ca4"},{techmsktr:"信息-#3181bd"},{hcltechsktr:"信息-#5ba3cf"},{tcssktr:"信息-#8fc1de"},{coalindiasktr:"煤炭-#5c3696"},{ongcsktr:"石油气-#684ea2"},{iocsktr:"石油气-#7566ae"},{bpclsktr:"石油-#827cb9"},{powergridsktr:"电网-#928ec3"},{ntpcsktr:"光伏-#a3a0cc"},{britanniasktr:"食品-#b21218"},{nestleindsktr:"雀巢-#dc2a25"},{tataconsumsktr:"饮料-#f6573f"},{drreddysktr:"制药-#127273"},{sunpharmasktr:"制药-#2b8b8c"},{divislabsktr:"制药-#4da5a4"},{jswsteelsktr:"钢铁-#353535"},{tatasteelsktr:"钢铁-#4d4d4d"},{ltsktr:"工程建筑-#626262"},{uplsktr:"农药-#757575"},{reliancesktr:"信实工业-#888888"},{grasimsktr:"纺织-#9d9d9d"},{ultracemcosktr:"水泥-#665c5a"},{shreecemsktr:"水泥-#7e7673"},{asianpaintsktr:"涂料-#98908c"},{hindalcosktr:"铝铜-#b3aaa7"},{itcsktr:"贸易-#d8b5a5"},{adaniportssktr:"港口运营-#fcbfd2"},{titansktr:"珠宝-#ffbf79"},{hindunilvrsktr:"联合利华-#d9d9d9"}],Le=new Map,Se=0;Se<Re.length;Se++){var Ie=Object.keys(Re[Se])[0];Le.set(Ie,Re[Se][Ie])}var _e=function(){function e(t){Object(Oe["a"])(this,e),this.type=t,this.showInfo=[],this.timeRange=[],this.width=0,this.level=0}return Object(Me["a"])(e,[{key:"setShowInfo",value:function(e){this.showInfo=e}},{key:"setRangeW",value:function(e,t,n){this.timeRange=[e[0],e[1]],this.width=t,this.level=n}}]),e}(),Ae=[];function Ve(e){var t,n=[e.startTimeStamp,e.endTimeStamp],a=[e.timeRange[0],e.timeRange[1]],r=!1,i=!1,o=!1,l={startX:0,startY:0,offsetX:0,offsetY:0,isMouseDown:!1,isMove:!1},s={top:20,bottom:80,left:45,right:20},c=ge["k"]("#content-container").append("svg");c.attr("width",e.width+s.left+s.right).attr("height",e.height+s.top+s.bottom).attr("transform","translate(".concat(e.x,",").concat(e.y,")")).style("background-color","#fff");var d="foreign".concat(e.width+Math.random()),u=c.append("g").attr("transfrom","translate(".concat(s.left,",").concat(s.top,")")),h=u.append("foreignObject").attr("id",d).attr("x",s.left).attr("y",s.top).attr("width",e.width).attr("height",e.height),f=document.createElement("canvas");f.__data__={},null===(t=document.getElementById(d))||void 0===t||t.appendChild(f),f.width=e.width,f.height=e.height;var g=f.getContext("2d"),b=ge["i"]().domain([a[0],a[1]]).range([n[0],n[1]]),m=ge["i"]().domain([0,e.width]).range([0,e.width]),v=ge["j"]().domain([new Date(n[0]),new Date(n[1])]).range([0,e.width]),p=ge["i"]().domain([e.minv,e.maxv]).range([e.height,0]),x=ge["i"]().domain([0,e.width]).range([0,e.dataManagers[0].realDataRowNum-1]),y=ge["j"]().domain([new Date(n[0]),new Date(n[1])]).range([0,e.width]),w=ge["a"](v),k=ge["b"](p);"Default"===G["a"].state.controlParams.currentMode&&(k=ge["b"](p).tickFormat((function(e){return 100*e+"%"})));var O=ge["a"](y),M=(ge["i"]().domain([e.minv,e.maxv]).range([e.height,0]),ge["d"]().extent([[0,10],[e.width,40]])),j=ge["c"]().extent([[s.left,s.top],[e.width+s.left,e.height+s.top]]);j.on("end",E),M.on("end",V),M.on("start",(function(){console.log("start")}));var C=c.append("g").attr("transform","translate(".concat(s.left,",").concat(s.top+50+e.height-20,")")).call(M).call(M.move,[0,e.width]);u.call(j);var T=c.append("g").attr("style","user-select:none").attr("transform","translate(".concat(s.left,",").concat(e.height+s.top+50,")")).attr("class","x axis").call(w),D=c.append("g").attr("style","user-select:none").attr("transform","translate(".concat(s.left,",").concat(e.height+s.top,")")).attr("class","x axis").call(O),N=c.append("g").attr("style","user-select:none").attr("transform","translate(".concat(s.left,",").concat(s.top,")")).attr("class","y axis").call(k);function R(){f.style.width=e.width,c.attr("width",e.width+s.left+s.right).attr("height",e.height+s.top+s.bottom),h.attr("width",e.width),m.domain([0,e.width]).range([0,e.width]),v.domain([new Date(n[0]),new Date(n[1])]).range([0,e.width]),null!=T&&(T.remove(),T=c.append("g").attr("style","user-select:none").attr("transform","translate(".concat(s.left,",").concat(e.height+s.top+50,")")).attr("class","x axis").call(w)),M.extent([[0,10],[e.width,40]]),M.on("end",V),M.on("start",(function(){console.log("start")}));var t=ge["i"]().domain([0,a[1]]).range([0,e.width]);C.call(M).call(M.move,[t(e.timeRange[0]),t(e.timeRange[1])]),g=f.getContext("2d")}var L=null;function S(e,t,n){null!==L&&L.remove();for(var a=0;a<t.dataManagers.length;a++){var r=t.dataManagers[a];if(r.isShow)if("Default"===G["a"].state.controlParams.currentMode){var i=r.dataName.split(".")[1].split("_");if("r"!==i[1][i[1].length-1]&&(i[1]=i[1]+"r"),!Le.has(i[1])){r.isShow=!1;continue}0}else{for(var o=r.dataName.split(".")[1].split("_"),l=o[1],s=2;s<o.length-2;s++)l=l+"_"+o[s];n[r.md5Num%46];0}}}function I(){var t,n=["#b3de69","#fdb462","#80b1d3","#fb8072","#bebada","#ffffb3","#8dd3c7","#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5","#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"];S(e.width+s.left+10,e,n),f.width=e.width;var a=Ee(e);p=ge["i"]().domain([a.min,a.max]).range([e.height,0]),k=ge["b"](p),"Default"===G["a"].state.controlParams.currentMode&&(k=ge["b"](p).tickFormat((function(e){return 100*e+"%"}))),null!==N&&void 0!==N&&N.remove(),N=c.append("g").attr("style","user-select:none").attr("transform","translate(".concat(s.left,",").concat(s.top,")")).attr("class","y axis").call(k),y=ge["j"]().domain([new Date(Math.floor(b(e.timeRange[0]))),new Date(Math.floor(b(e.timeRange[1])))]).range([0,e.width]),O=ge["a"](y),null!==D&&void 0!==D&&D.remove(),D=c.append("g").attr("style","user-select:none").attr("transform","translate(".concat(s.left,",").concat(e.height+s.top,")")).attr("class","x axis").call(O);var r=e.columnInfos;null===(t=g)||void 0===t||t.clearRect(0,0,e.width,e.height);for(var i=0;i<r.length;i++)if(e.dataManagers[i].isShow&&(Object(ye["c"])(r[i],e.width,Math.pow(2,e.maxLevel),null),e.dataManagers[i])){var o,l;if(null===(o=g)||void 0===o||o.beginPath(),"Default"===G["a"].state.controlParams.currentMode){var d=e.dataManagers[i],u=d.dataName.split(".")[1].split("_");"r"!==u[1][u[1].length-1]&&(u[1]=u[1]+"r"),g.strokeStyle=Le.get(u[1]).split("-")[1]}else g.strokeStyle=n[e.dataManagers[i].md5Num%46];g.strokeWidth=1;for(var h=r[i],m=0;m<h.length;m++)if(!h[m].isMis){var v,x,w,M,j,C;if(h[m].minVTimeRange[0]<h[m].maxVTimeRange[0])null===(v=g)||void 0===v||v.moveTo(h[m].positionInfo.minX,p(h[m].vRange[0])),null===(x=g)||void 0===x||x.lineTo(h[m].positionInfo.maxX,p(h[m].vRange[1]));else null===(w=g)||void 0===w||w.moveTo(h[m].positionInfo.minX,p(h[m].vRange[1])),null===(M=g)||void 0===M||M.lineTo(h[m].positionInfo.maxX,p(h[m].vRange[0]));if(m<=h.length-2&&void 0!==h[m].endV&&void 0!==h[m+1])null===(j=g)||void 0===j||j.moveTo(h[m].positionInfo.endX,p(h[m].endV)),null===(C=g)||void 0===C||C.lineTo(h[m+1].positionInfo.startX,p(h[m+1].startV))}for(var T=[],R=0;R<h.length-1;R++)if(!h[R].isMis&&h[R+1].isMis){T.push(h[R]);for(var L=R+1;L<h.length;L++)if(h[L-1].isMis&&!h[L].isMis){var I,_,A,V=T.pop();if(void 0!==h[L].startV&&void 0!==(null===V||void 0===V?void 0:V.endV)||console.error("error nonUniform"),null===(I=g)||void 0===I||I.moveTo(V.positionInfo.endX,p(V.endV)),void 0!==h[L].startV)null===(_=g)||void 0===_||_.lineTo(h[L].positionInfo.startX,p(h[L].startV));else null===(A=g)||void 0===A||A.lineTo(h[L].positionInfo.minX,p((h[L].vRange[0]+h[L].vRange[1])/2))}}null===(l=g)||void 0===l||l.stroke()}}function _(t){i=!0;var n=e.currentLevel;e.width=t,R(),n+1>=e.maxLevel-1||(f.style.width=e.width,De(e.dataManagers,e.currentLevel,0,a[1],e.maxLevel,t,{inter:"resize",noRet:!0}).then((function(t){Ce(e,{inter:"resize"}).then((function(t){e.pow=!1,e.columnInfos=t,I()}))})))}function A(t){var n=e.currentLevel;e.currentLevel=10;var a=e.width;if(e.timeRange[1]=t[1],e.timeRange[0]=t[0],!(n+1>=e.maxLevel-1)){Math.pow(2,Math.ceil(Math.log2(a)));De(e.dataManagers,10,0,Math.pow(2,10)-1,e.maxLevel,a,{inter:"zoom_in",noRet:!0}).then((function(t){Ce(e,{inter:"zoom_in"}).then((function(t){e.pow=!1,e.columnInfos=t,I()}))}))}}function V(t){var n=t.selection;if(r)if(i)o=!1;else if(o)o=!1;else{var l=[Math.floor(x(n[0])),Math.floor(x(n[1]))];l[0]<0&&(l[0]=0),l[1]>a[1]&&(l[1]=a[1]);var s=new _e("zoom");s.setRangeW(e.timeRange,e.width,e.currentLevel),Ae.push(s),A([l[0],l[1]])}else r=!0}function E(t){var n=t.selection;if(null!==n){for(var a=[],r=0;r<e.dataManagers.length;r++)a.push(e.dataManagers[r].isShow);(new Date).getTime();var i=new _e("timebox");i.setShowInfo(a),Ae.push(i);for(var o=n[0][0]-40,l=n[1][0]-40,s=n[1][1]-20,c=n[0][1]-20,d=p.invert(s),u=p.invert(c),h=e.columnInfos,f=0;f<h.length;f++){for(var g=e.dataManagers[f].isShow,b=Math.floor(o);b<=Math.floor(l);b++)g=g&&h[f][b].vRange[0]>=d&&h[f][b].vRange[1]<=u;e.dataManagers[f].isShow=!1,g&&(e.dataManagers[f].isShow=!0)}for(var m=1/0,v=-1/0,x=0;x<h.length;x++)if(e.dataManagers[x].isShow)for(var y=0;y<=h[x].length;y++)m=Math.min(m,h[x][y]?h[x][y].vRange[0]:m),v=Math.max(v,h[x][y]?h[x][y].vRange[1]:v);I()}}var B=!1,P=0,F=c.append("rect").attr("x",0).attr("y",0).attr("height",e.height+s.top+s.bottom).attr("width",e.width+s.left+s.right).attr("stroke","black").attr("stroke-width",4).attr("fill","none").on("mouseover",(function(){document.body.style.cursor="ew-resize",B=!0})).on("mousedown",(function(e){B&&(P=e.offsetX,l.isMouseDown=!0)})).on("mouseup",(function(){console.log()})).on("mousemove",(function(t){l.isMouseDown&&(c.attr("width",e.width+s.right+s.left+(t.offsetX-P)),F.attr("width",e.width+s.right+s.left+(t.offsetX-P)))})).on("mouseleave",(function(){l.isMouseDown||(document.body.style.cursor="default")}));document.getElementById("content-container").addEventListener("mousemove",(function(t){l.isMouseDown&&(c.attr("width",e.width+s.right+s.left+(t.offsetX-P)),F.attr("width",e.width+s.right+s.left+(t.offsetX-P)))})),document.getElementById("content-container").addEventListener("mouseup",(function(t){if(l.isMouseDown){l.isMouseDown=!1,B=!1,document.body.style.cursor="default";var n=e.width;if(e.width=e.width+(t.offsetX-P),e.width===n)return;var a=new _e("resize");a.setRangeW(e.timeRange,e.width,e.currentLevel),Ae.push(a),_(e.width)}})),c.on("contextmenu",(function(t){if(Ae.length>0){var n=Ae.pop();if("timebox"===(null===n||void 0===n?void 0:n.type)){for(var a=n.showInfo,r=0;r<e.dataManagers.length;r++)e.dataManagers[r].isShow=a[r];I()}else"resize"===(null===n||void 0===n?void 0:n.type)?_(n.width):"zoom"===(null===n||void 0===n?void 0:n.type)&&(o=!0,A(n.timeRange))}t.preventDefault(),t.stopPropagation()}));f.addEventListener("click",(function(e){})),I()}function Ee(e){for(var t=1/0,n=-1/0,a=0;a<e.columnInfos.length;a++)if(e.dataManagers[a].isShow)for(var r=e.columnInfos[a],i=0;i<r.length;i++)r[i].vRange[0]<t&&(t=r[i].vRange[0]),r[i].vRange[1]>n&&(n=r[i].vRange[1]);return{min:t,max:n}}n("b680");var Be=n("6125");function Pe(e){var t,n=[0,Math.pow(2,e.maxLevel)-1];console.log(n);var a={startX:0,startY:0,offsetX:0,offsetY:0,isMouseDown:!1,isMove:!1},r={top:20,bottom:20,left:40,right:20},i=ge["k"]("#content-container").append("svg");document.getElementById("content-container").addEventListener("mouseup",(function(){a.isMouseDown=!1})),i.attr("width",e.width+r.left+r.right).attr("height",e.height+r.top+r.bottom).attr("transform","translate(".concat(e.x,",").concat(e.y,")")).style("background-color","#fff");var o="foreign".concat(e.width),l=(i.append("foreignObject").attr("id",o).attr("x",r.left).attr("y",r.top).attr("width",e.width).attr("height",e.height),document.createElement("canvas"));null===(t=document.getElementById(o))||void 0===t||t.appendChild(l),l.width=e.width,l.height=e.height;var s=l.getContext("2d"),c=ge["i"]().domain([0,e.width]).range([0,e.width]);console.log("jelo");var d=ge["i"]().domain([-43.33507,38.054184]).range([e.height,0]),u=ge["a"](c),h=ge["b"](d),f=(i.append("g").attr("transform","translate(".concat(r.left,",").concat(e.height+r.top,")")).attr("class","x axis").call(u),i.append("g").attr("transform","translate(".concat(r.left,",").concat(r.top,")")).attr("class","y axis").call(h),[0,0]),g=0;function b(){f=e.timeRange,console.log(f),console.log(e);var t=e.renderData;null===s||void 0===s||s.clearRect(0,0,e.width,e.height);for(var n=0,a=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],r=0;r<t.length;r++){Be(r);s.strokeStyle=a[19-r],null===s||void 0===s||s.beginPath();var i=t[r].data;n+=i.length;for(var o=0;o<i.length;o++)i[o].y=d(i[o].v),0===o?null===s||void 0===s||s.moveTo(i[o].x,i[o].y):null===s||void 0===s||s.lineTo(i[o].x,i[o].y);null===s||void 0===s||s.stroke()}console.log(n),g+=n,console.log("all:",g)}function m(t){e=t,b()}function v(t){console.time("timebox");for(var n=e.renderData,a=0,r=0;r<n.length;r++){for(var i=n[r].data,o=!0,l=0;l<i.length;l++)i[l].x>=t.startX&&i[l].x<=t.startX+t.width&&(o=o&&i[l].v<=t.vMax&&i[l].v>=t.vMin);o&&a++}console.log(a),console.timeEnd("timebox")}function p(){for(var t=[],n=0;n<50;n++){var a=500*Math.random(),r=200*Math.random()+300,i=Math.random()*(e.maxv-e.minv),o=Math.random()*e.minv+800,l=(new Date).getMilliseconds();v({startX:a,width:r,vMin:i,vMax:o}),t.push(((new Date).getMilliseconds()-l).toFixed(4))}console.log(t)}G["b"].on("update_multi_timeseries_m4_obj",m),b();l.addEventListener("click",(function(e){p()}))}function Fe(e){Math.pow(2,e.maxLevel);var t,n={startX:0,startY:0,offsetX:0,offsetY:0,isMouseDown:!1,isMove:!1},a={top:20,bottom:20,left:40,right:20},r=ge["k"]("#content-container").append("svg");document.getElementById("content-container").addEventListener("mouseup",(function(){n.isMouseDown=!1})),r.attr("width",e.width+a.left+a.right).attr("height",e.height+a.top+a.bottom).attr("transform","translate(".concat(e.x,",").concat(e.y,")")).style("background-color","#fff");var i="foreign".concat(e.width),o=(r.append("foreignObject").attr("id",i).attr("x",a.left).attr("y",a.top).attr("width",e.width).attr("height",e.height),document.createElement("canvas"));null===(t=document.getElementById(i))||void 0===t||t.appendChild(o),o.width=e.width,o.height=e.height;var l=o.getContext("2d"),s=ge["i"]().domain([0,e.width]).range([0,e.width]),c=ge["i"]().domain([e.minv,e.maxv]).range([e.height,0]),d=ge["a"](s),u=ge["b"](c);r.append("g").attr("transform","translate(".concat(a.left,",").concat(e.height+a.top,")")).attr("class","x axis").call(d),r.append("g").attr("transform","translate(".concat(a.left,",").concat(a.top,")")).attr("class","y axis").call(u);function h(){console.log(e);var t=e.allRenderData;null===l||void 0===l||l.clearRect(0,0,e.width,e.height);for(var n=0;n<t.length;n++){null===l||void 0===l||l.beginPath();for(var a=t[n].renderData,r=0;r<a.length;r++)a[r].y=c(a[r].v),0===r?null===l||void 0===l||l.moveTo(s(a[r].x),a[r].y):null===l||void 0===l||l.lineTo(s(a[r].x),a[r].y);null===l||void 0===l||l.stroke()}}h()}var Ue=Object(a["defineComponent"])({components:{DeviceControlPanel:fe},setup:function(){function e(e){console.log(e);var t={startX:0,startY:0,offsetX:0,offsetY:0,isMouseDown:!1,isMove:!1},n={top:20,bottom:20,left:40,right:20},a=ge["k"]("#content-container").append("svg");document.getElementById("content-container").addEventListener("mouseup",(function(){t.isMouseDown=!1})),a.attr("width",e.width+n.left+n.right).attr("height",e.height+n.top+n.bottom).attr("transform","translate(".concat(e.x,",").concat(e.y,")")).on("mousedown",(function(e){t.isMouseDown=!0,t.startX=e.x,t.startY=e.y})).on("mousemove",(function(n){t.isMouseDown&&(t.offsetX=n.x-t.startX,t.offsetY=n.y-t.startY,ge["k"](this).attr("transform","translate(".concat(e.x+t.offsetX,",").concat(e.y+t.offsetY,")")),t.isMove=!0)})).on("mouseup",(function(){t.isMouseDown&&(e.x+=t.offsetX,e.y+=t.offsetY,t.isMouseDown=!1)})).on("click",(function(n){t.isMove?t.isMove=!1:e.isChoosed?(ge["k"](this).style("border","solid").style("border-width","1px").style("border-color","#fff"),e.isChoosed=!1):(ge["k"](this).style("border","solid").style("border-width","1px").style("border-color","#84fcb6"),e.isChoosed=!0)})).style("background-color","#fff");var r=null;r=e.isSample?"haar"===e.algorithm?ge["i"]().domain([0,4*e.width]).range([0,e.width]):ge["i"]().domain([0,e.width]).range([0,e.width]):ge["j"]().domain([e.timeRange[0],e.timeRange[1]]).range([0,e.width]);var i=ge["i"]().domain([e.data.min,e.data.max]).range([e.height,0]),o=ge["a"](r),l=ge["b"](i);o.ticks(0),l.ticks(0);a.append("g").attr("transform","translate(".concat(n.left,",").concat(e.height+n.top,")")).call(o),a.append("g").attr("transform","translate(".concat(n.left,",").concat(n.top,")")).call(l);var s=a.append("g").attr("transform","translate(".concat(n.left,",").concat(n.top,")")),c=null;c=e.isSample?ge["f"]().x((function(e,t){return r(e.x)})).y((function(e,t){return e.y=i(e.y),e.y})):ge["f"]().x((function(e,t){return e.x})).y((function(t,n){return e.height-t.y})),console.log(e.data.val),s.append("path").datum(e.data.val).attr("fill","none").attr("stroke","steelblue").attr("stroke-width",1.5).attr("d",c),a.style("border","solid").style("border-width","1px").style("border-color","#fff"),a.on("click",(function(){var e={width:500};G["a"].dispatch("loadDataForSampleByM41",e)}))}G["b"].on("add_line_chart_obj",e),G["b"].on("add_wavelet_chart_obj",we),G["b"].on("add_view_change_query_obj",ke["a"]),G["b"].on("add_multi_timeseries_obj",Ve),G["b"].on("add_multi_timeseries_m4_obj",Pe),G["b"].on("add_multi_haar_timeseries_obj",Fe)}});n("f668");const Xe=g()(Ue,[["render",ne],["__scopeId","data-v-1bd4215f"]]);var ze=Xe,He=(n("ab8b"),Object(a["defineComponent"])({components:{GlobalHeader:m,LeftSideDataControlPanel:K,DispalyContentPanel:ze},setup:function(){G["a"].dispatch("loadDefaultTableAndInfo"),G["a"].dispatch("getAllFlags")}}));const Ye=g()(He,[["render",o]]);var We=Ye,Ge=n("6c02"),Qe={class:"home"};function Je(e,t,n,r,i,o){var l=Object(a["resolveComponent"])("HelloWorld");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Qe,[Object(a["createVNode"])(l,{msg:"Welcome to Your Vue.js + TypeScript App"})])}var qe={class:"hello"},Ze=Object(a["createStaticVNode"])('<p data-v-d988826c> For a guide and recipes on how to configure / customize this project,<br data-v-d988826c> check out the <a href="https://cli.vuejs.org" target="_blank" rel="noopener" data-v-d988826c>vue-cli documentation</a>. </p><h3 data-v-d988826c>Installed CLI Plugins</h3><ul data-v-d988826c><li data-v-d988826c><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel" target="_blank" rel="noopener" data-v-d988826c>babel</a></li><li data-v-d988826c><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-router" target="_blank" rel="noopener" data-v-d988826c>router</a></li><li data-v-d988826c><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-vuex" target="_blank" rel="noopener" data-v-d988826c>vuex</a></li><li data-v-d988826c><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint" target="_blank" rel="noopener" data-v-d988826c>eslint</a></li><li data-v-d988826c><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-typescript" target="_blank" rel="noopener" data-v-d988826c>typescript</a></li></ul><h3 data-v-d988826c>Essential Links</h3><ul data-v-d988826c><li data-v-d988826c><a href="https://vuejs.org" target="_blank" rel="noopener" data-v-d988826c>Core Docs</a></li><li data-v-d988826c><a href="https://forum.vuejs.org" target="_blank" rel="noopener" data-v-d988826c>Forum</a></li><li data-v-d988826c><a href="https://chat.vuejs.org" target="_blank" rel="noopener" data-v-d988826c>Community Chat</a></li><li data-v-d988826c><a href="https://twitter.com/vuejs" target="_blank" rel="noopener" data-v-d988826c>Twitter</a></li><li data-v-d988826c><a href="https://news.vuejs.org" target="_blank" rel="noopener" data-v-d988826c>News</a></li></ul><h3 data-v-d988826c>Ecosystem</h3><ul data-v-d988826c><li data-v-d988826c><a href="https://router.vuejs.org" target="_blank" rel="noopener" data-v-d988826c>vue-router</a></li><li data-v-d988826c><a href="https://vuex.vuejs.org" target="_blank" rel="noopener" data-v-d988826c>vuex</a></li><li data-v-d988826c><a href="https://github.com/vuejs/vue-devtools#vue-devtools" target="_blank" rel="noopener" data-v-d988826c>vue-devtools</a></li><li data-v-d988826c><a href="https://vue-loader.vuejs.org" target="_blank" rel="noopener" data-v-d988826c>vue-loader</a></li><li data-v-d988826c><a href="https://github.com/vuejs/awesome-vue" target="_blank" rel="noopener" data-v-d988826c>awesome-vue</a></li></ul>',7);function Ke(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",qe,[Object(a["createElementVNode"])("h1",null,Object(a["toDisplayString"])(e.msg),1),Ze])}var $e=Object(a["defineComponent"])({name:"HelloWorld",props:{msg:String}});n("f879");const et=g()($e,[["render",Ke],["__scopeId","data-v-d988826c"]]);var tt=et,nt=Object(a["defineComponent"])({name:"Home",components:{HelloWorld:tt}});const at=g()(nt,[["render",Je]]);var rt=at,it=[{path:"/",name:"Home",component:rt},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],ot=Object(Ge["a"])({history:Object(Ge["b"])(),routes:it}),lt=ot,st=n("ec26"),ct=n("c3a1");n("7437");xe.a.defaults.baseURL="http://127.0.0.1:3000";var dt=localStorage.getItem("om3_cookie");null!==dt&&""!==dt||(dt="user_cookie="+Object(st["a"])(),localStorage.setItem("om3_cookie",dt)),console.log("mycookie:",dt),xe.a.defaults.headers.common["Authorization"]=dt,Object(a["createApp"])(We).use(ct["a"]).use(G["a"]).use(lt).mount("#app")},de57:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("d4ec"),r=n("bee2"),i=(n("99af"),n("898b")),o=n("75b6"),l=function(){function e(t){Object(a["a"])(this,e),this.type=t,this.showInfo=[],this.timeRange=[],this.width=0,this.level=0}return Object(r["a"])(e,[{key:"setShowInfo",value:function(e){this.showInfo=e}},{key:"setRangeW",value:function(e,t,n){this.timeRange=[e[0],e[1]],this.width=t,this.level=n}}]),e}(),s=[];function c(e){var t,n=[],a=[];n=[e.startTime,e.endTime],a=[e.timeRange[0],e.timeRange[1]];var r=!1,c=!1,d=!1,u={startX:0,startY:0,offsetX:0,offsetY:0,isMouseDown:!1,isMove:!1},h={top:20,bottom:80,left:45,right:45},f=i["k"]("#content-container").append("svg");f.attr("width",e.width+h.left+h.right).attr("height",e.height+h.top+h.bottom).attr("transform","translate(".concat(e.x,",").concat(e.y,")")).style("background-color","#fff");var g="foreign".concat(e.width+Math.random()),b=f.append("g").attr("transfrom","translate(".concat(h.left,",").concat(h.top,")")),m=b.append("foreignObject").attr("id",g).attr("x",h.left).attr("y",h.top).attr("width",e.width).attr("height",e.height),v=document.createElement("canvas");v.__data__={},null===(t=document.getElementById(g))||void 0===t||t.appendChild(v),v.width=e.width,v.height=e.height;var p=v.getContext("2d"),x=i["i"]().domain([a[0],a[1]]).range([n[0],n[1]]),y=i["i"]().domain([0,e.width]).range([0,e.width]),w=i["j"]().domain([new Date(n[0]),new Date(n[1])]).range([0,e.width]),k=i["i"]().domain([e.data.minv,e.data.maxv]).range([e.height,0]),O=i["i"]().domain([0,e.width]).range([0,e.dataManager.realDataRowNum-1]),M=i["j"]().domain([new Date(n[0]),new Date(n[1])]).range([0,e.width]),j=i["a"](w),C=i["b"](k),T=i["a"](M),D=i["d"]().extent([[0,10],[e.width,40]]);D.on("end",A),D.on("start",(function(){console.log("start")}));var N=f.append("g").attr("transform","translate(".concat(h.left,",").concat(h.top+50+e.height-20,")")).call(D).call(D.move,[0,e.width]),R=f.append("g").attr("style","user-select:none").attr("transform","translate(".concat(h.left,",").concat(e.height+h.top+50,")")).attr("class","x axis").call(j),L=f.append("g").attr("style","user-select:none").attr("transform","translate(".concat(h.left,",").concat(e.height+h.top,")")).attr("class","x axis").call(T),S=f.append("g").attr("style","user-select:none").attr("transform","translate(".concat(h.left,",").concat(h.top,")")).attr("class","y axis").call(C);function I(){v.style.width=e.width,f.attr("width",e.width+h.left+h.right).attr("height",e.height+h.top+h.bottom),m.attr("width",e.width),y.domain([0,e.width]).range([0,e.width]),w.domain([new Date(n[0]),new Date(n[1])]).range([0,e.width]),null!=R&&(R.remove(),R=f.append("g").attr("style","user-select:none").attr("transform","translate(".concat(h.left,",").concat(e.height+h.top+50,")")).attr("class","x axis").call(j)),D.extent([[0,10],[e.width,40]]),D.on("end",A),D.on("start",(function(){console.log("start")}));var t=i["i"]().domain([0,e.dataManager.realDataRowNum-1]).range([0,e.width]);N.call(D).call(D.move,[t(e.timeRange[0]),t(e.timeRange[1])]),p=v.getContext("2d")}function _(t,n){if(v.width=e.width,k=i["i"]().domain([e.data.minv,e.data.maxv]).range([e.height,0]),C=i["b"](k),null!==S&&void 0!==S&&S.remove(),S=f.append("g").attr("style","user-select:none").attr("transform","translate(".concat(h.left,",").concat(h.top,")")).attr("class","y axis").call(C),M=i["j"]().domain([new Date(Math.floor(x(e.timeRange[0]))),new Date(Math.floor(x(e.timeRange[1])))]).range([0,e.width]),T=i["a"](M),null!==L&&void 0!==L&&L.remove(),L=f.append("g").attr("style","user-select:none").attr("transform","translate(".concat(h.left,",").concat(e.height+h.top,")")).attr("class","x axis").call(T),null==m&&t){var a;m=f.append("foreignObject").attr("id","foreign").attr("x",h.left).attr("y",h.top).attr("width",e.width).attr("height",e.height);var r=document.createElement("canvas");null===(a=document.getElementById("foreign"))||void 0===a||a.appendChild(r),r.width=e.width,r.height=e.height,p=r.getContext("2d")}if(t&&p){Object(o["c"])(t,e.width,e.maxLen,null),p.clearRect(0,0,e.width,e.height),p.beginPath(),p.strokeStyle="steelblue";for(var l=0;l<t.length;l++)t[l].isMis||(t[l].minVTimeRange[0]<t[l].maxVTimeRange[0]?(p.moveTo(t[l].positionInfo.minX,k(t[l].vRange[0])),p.lineTo(t[l].positionInfo.maxX,k(t[l].vRange[1]))):(p.moveTo(t[l].positionInfo.minX,k(t[l].vRange[1])),p.lineTo(t[l].positionInfo.maxX,k(t[l].vRange[0]))),l<=t.length-2&&void 0!==t[l].endV&&void 0!==t[l+1]&&(p.moveTo(t[l].positionInfo.endX,k(t[l].endV)),p.lineTo(t[l+1].positionInfo.startX,k(t[l+1].startV))));for(var s=[],c=0;c<t.length-1;c++)if(!t[c].isMis&&t[c+1].isMis){s.push(t[c]);for(var d=c+1;d<t.length;d++)if(t[d-1].isMis&&!t[d].isMis){var u=s.pop();void 0!==t[d].startV&&void 0!==(null===u||void 0===u?void 0:u.endV)||console.error("error nonUniform"),p.moveTo(u.positionInfo.endX,k(u.endV)),void 0!==t[d].startV?p.lineTo(t[d].positionInfo.startX,k(t[d].startV)):p.lineTo(t[d].positionInfo.minX,k((t[d].vRange[0]+t[d].vRange[1])/2))}}p.stroke()}else console.log("error")}function A(t){var n=t.selection;if(r)if(c)d=!1;else if(d)d=!1;else{var i=[Math.floor(O(n[0])),Math.floor(O(n[1]))];i[0]<0&&(i[0]=0),i[1]>a[1]&&(i[1]=a[1]);var o=new l("zoom");o.setRangeW(e.timeRange,e.width,e.currentLevel),s.push(o),e.dataManager.viewChangeInteractionFinal1(e.currentLevel,e.width,[i[0],i[1]],null,_).then((function(t){e.timeRange[0]=i[0],e.timeRange[1]=i[1],_(t)}))}else r=!0}function V(t){c=!0;var n=e.currentLevel;e.width=t,I(),n+1>=e.dataManager.maxLevel-1||(v.style.width=e.width,e.dataManager.viewChangeInteractionFinal1(e.currentLevel,e.width,[e.timeRange[0],e.timeRange[1]],null,_).then((function(e){_(e)})))}var E=!1,B=0,P=f.append("rect").attr("x",0).attr("y",0).attr("height",e.height+h.top+h.bottom).attr("width",e.width+h.left+h.right).attr("stroke","black").attr("stroke-width",4).attr("fill","none").on("mouseover",(function(){document.body.style.cursor="ew-resize",E=!0})).on("mousedown",(function(e){E&&(B=e.offsetX,u.isMouseDown=!0)})).on("mouseup",(function(){console.log()})).on("mousemove",(function(t){u.isMouseDown&&(f.attr("width",e.width+h.right+h.left+(t.offsetX-B)),P.attr("width",e.width+h.right+h.left+(t.offsetX-B)))})).on("mouseleave",(function(){u.isMouseDown||(document.body.style.cursor="default")}));return document.getElementById("content-container").addEventListener("mousemove",(function(t){u.isMouseDown&&(f.attr("width",e.width+h.right+h.left+(t.offsetX-B)),P.attr("width",e.width+h.right+h.left+(t.offsetX-B)))})),document.getElementById("content-container").addEventListener("mouseup",(function(t){if(u.isMouseDown){u.isMouseDown=!1,E=!1,document.body.style.cursor="default";var n=e.width;if(e.width=e.width+(t.offsetX-B),e.width===n)return;var a=new l("resize");a.setRangeW(e.timeRange,e.width,e.currentLevel),s.push(a),V(e.width)}})),_}},ea41:function(e,t,n){},f668:function(e,t,n){"use strict";n("682d")},f879:function(e,t,n){"use strict";n("ea41")},fc60:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"getAllTables",(function(){return k})),n.d(t,"getAllCustomTables",(function(){return L})),n.d(t,"getAllFlags",(function(){return j})),n.d(t,"loadMultiTimeSeriesInitData",(function(){return w})),n.d(t,"loadViewChangeQueryWSMinMaxMissDataInitData",(function(){return y})),n.d(t,"getAllMultiLineClassInfo",(function(){return C})),n.d(t,"testCustomDBConn",(function(){return T})),n.d(t,"createCustomDBConn",(function(){return D})),n.d(t,"initOM3DB",(function(){return N})),n.d(t,"clearOM3Table",(function(){return R})),n.d(t,"performTransformForSingeLine",(function(){return S})),n.d(t,"loadCustomTableAndInfo",(function(){return _})),n.d(t,"performTransformForMultiLine",(function(){return I})),n.d(t,"loadDefaultTableAndInfo",(function(){return A}));var a=n("1da1"),r=(n("96cf"),n("99af"),n("90d7"),n("fb6a"),n("4e82"),n("d3b7"),n("3ca3"),n("ddb0"),n("b0c0"),n("d81d"),n("ac1f"),n("1276"),n("0613")),i=n("bc3a"),o=n.n(i),l=n("2827"),s=n("ec26"),c=n("898b"),d=n("75b6"),u=n("6821"),h=n.n(u),f=n("5c33"),g=n("de57"),b=n("ff60");function m(e,t){return v.apply(this,arguments)}function v(){return v=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="postgres"+n,e.next=3,o.a.get(n);case 3:return a=e.sent,r=a.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function p(e,t){return x.apply(this,arguments)}function x(){return x=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var a,r,i,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="postgres"+n,e.prev=1,(new Date).getTime(),e.next=5,Object(b["b"])(n);case 5:if(a=e.sent,!a||""===a||void 0===a||null===a){e.next=10;break}return r=Object(f["b"])(a),console.log(n,"use flag cache:",r.byteLength),e.abrupt("return",r);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](1),console.error(e.t0);case 15:return e.next=17,o.a.get(n,{responseType:"arraybuffer"});case 17:return i=e.sent,l=i.data,l&&(Object(b["c"])(n,Object(f["a"])(l)),console.log(n," store in indexdb")),e.abrupt("return",l);case 21:case"end":return e.stop()}}),e,null,[[1,12]])}))),x.apply(this,arguments)}var y=function(e,t){var n=0,a=e.state.controlParams.currentTable,r=null;if(r="Default"===e.state.controlParams.currentMode?e.state.defaultTableMap.get(a):e.state.customTableMap.get(a),void 0===r)throw new Error("cannot get class info");n=r["level"];var i=new Date(r.start_time).getTime(),o=0;""!==r.end_time&&(o=new Date(r.end_time).getTime());0!==r.interval&&r.interval;var u="/line_chart/init_wavelet_bench_min_max_miss?width=".concat(Math.pow(2,Math.ceil(Math.log2(t.width))),"&table_name=").concat(e.state.controlParams.currentTable,"&mode=").concat(e.state.controlParams.currentMode),h=m(e.state,u);h.then((function(e){if(200===e["code"]){var a=e["data"]["result"],u=Math.ceil(Math.log2(t.width)),h=Object(l["a"])(a,t.width),b=h.trendTree,m=h.dataManager;m.maxLevel=n,m.realDataRowNum=r["max_len"];var v=Object(d["e"])(Object(f["l"])(m.levelIndexObjs[m.levelIndexObjs.length-1].firstNodes[0])),p=v.minv,x=v.maxv,y={id:Object(s["a"])(),width:t.width,height:t.height,x:60*Math.random(),y:60*Math.random(),root:b,data:{powRenderData:[],noPowRenderData:[],minv:p,maxv:x},timeRange:[0,r["max_len"]],startTime:i,endTime:o,algorithm:"",dataManager:m,params:[0,0],currentLevel:Math.ceil(Math.log2(t.width)),isPow:!1,nonUniformColObjs:[],maxLen:r["max_len"]},w=Object(g["a"])(y);m.getDataMinMaxMiss(u+1,0,Math.pow(2,u+1)-1).then((function(){var e=m.levelIndexObjs[0].firstNodes[0].yArray[1],n=m.levelIndexObjs[0].firstNodes[0].yArray[2],a=c["i"]().domain([e,n]).range([t.height,0]);m.viewChangeInteractionFinal1(Math.ceil(Math.log2(t.width)),t.width,[0,r["max_len"]-1],a,w).then((function(e){w(e)}))}))}else console.error(e["msg"])}))},w=function(e,t){var n=Math.ceil(Math.log2(t.width)),a=0,r=e.state.controlParams.currentMultiLineClass,i=null;if(i="Default"===e.state.controlParams.currentMode?e.state.allMultiLineClassInfoMap.get(r):e.state.allCustomMultiLineClassInfoMap.get(r),void 0===i)throw new Error("cannot get class info");a=i["level"];var o="/line_chart/init_multi_timeseries?width=".concat(Math.pow(2,n),"&class_name=").concat(r,"&mode=").concat(e.state.controlParams.currentMode),s=m(e.state,o);s.then((function(r){for(var o=[],s=-1/0,c=1/0,u=0;u<r.length;u++){var g=Object(l["a"])(r[u].d,t.width,r[u].tn),b=g.dataManager;b.maxLevel=a,b.realDataRowNum=i["max_len"];var m=Object(d["e"])(Object(f["l"])(b.levelIndexObjs[b.levelIndexObjs.length-1].firstNodes[0])),v=m.minv,p=m.maxv;s=Math.max(p,s),c=Math.min(v,c),b.md5Num=parseInt("0x"+h()(b.dataName).slice(0,8)),o.push(b)}o=o.sort((function(e,t){return parseInt("0x"+h()(e.dataName).slice(0,8))-parseInt("0x"+h()(t.dataName).slice(0,8))}));for(var x=[],y=new Array(o.length),w=function(e){x.push(new Promise((function(a,r){o[e].viewChangeInteractionFinal1(n,t.width,[0,o[e].realDataRowNum-1],null,null).then((function(t){y[e]=t,o[e].columnInfos=t,a(null)})).catch((function(e){r(e)}))})))},k=0;k<o.length;k++)w(k);Promise.all(x).then((function(){var n=new Date(i.start_time).getTime(),r=0;""!==i.end_time&&(r=new Date(i.end_time).getTime());var l=0;0!==i.interval&&(l=i.interval),e.commit("addMultiTimeSeriesObj",{className:i.name,lineAmount:i.amount,startTimeStamp:n,endTimeStamp:r,timeIntervalMs:l,dataManagers:o,columnInfos:y,startTime:0,endTime:o[0].realDataRowNum-1,algorithm:"multitimeseries",width:t.width,height:t.height,pow:!1,minv:c,maxv:s,maxLevel:a})})).catch((function(e){throw e}))}))},k=function(e){var t="/line_chart/getAllTables",n=m(e.state,t);n.then((function(t){var n=t.map((function(e){return e["table_fullname"].split(".")[1]}));e.commit("updateAllTables",{tables:n})}))};function O(e,t,n){return M.apply(this,arguments)}function M(){return M=Object(a["a"])(regeneratorRuntime.mark((function t(n,a,r){var i,o,l,s,c,d,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i="/line_chart/getAllFlagNames?line_type=".concat(a),t.next=3,m(n.state,i);case 3:o=t.sent,l={},s=null,r&&(s=Object(f["o"])("Loading Order Coefficients. First load may take a long time, Please Wait!")),c=0;case 8:if(!(c<o["data"].length)){t.next=17;break}return d="/line_chart/getSingleFlag?name=".concat(o["data"][c],"&line_type=").concat(a),t.next=12,p(n.state,d);case 12:u=t.sent,l[o["data"][c].split(".")[0]]=e.from(u);case 14:c++,t.next=8;break;case 17:return s&&s.close(),t.abrupt("return",l);case 19:case"end":return t.stop()}}),t)}))),M.apply(this,arguments)}var j=function(e){Object(b["d"])().then((function(){console.log("indexdb init success")})).catch((function(){console.error("indexdb init error")}));var t=r["a"].state.controlParams.currentLineType;O(e,t,!0).then((function(t){e.commit("updateAllFlags",{flags:t}),O(e,"Multi",!1).then((function(t){e.commit("updateAllFlags",{flags:t})}))}))},C=function(e){var t="/line_chart/getAllMultiLineClassInfo?mode=".concat(r["a"].state.controlParams.currentMode),n=m(e.state,t);n.then((function(t){e.commit("updateMultiLineClassInfo",{info:t})}))},T=function(e,t){return o.a.post("postgres/line_chart/testDBConnection",{host_name:t.hostName,user_name:t.userName,password:t.possword,db_name:t.dbName})},D=function(e,t){return o.a.post("postgres/line_chart/createCustomDBConn",{host_name:t.hostName,user_name:t.userName,password:t.possword,db_name:t.dbName})},N=function(e,t){return m(e.state,"/line_chart/initOM3DBEnv")},R=function(e,t){return m(e.state,"/line_chart/clearOM3Table")},L=function(e){var t="/line_chart/getAllCustomTables";return m(e.state,t)},S=function(e,t){var n="/line_chart/performTransformForSingeLine?start_time=".concat(t.startTime,"&end_time=").concat(t.endTime,"&table_name=").concat(t.tableName);return m(e.state,n)},I=function(e,t){var n="/line_chart/performTransformForMultiLine?start_time=".concat(t.startTime,"&end_time=").concat(t.endTime,"&table_name=").concat(t.tableNames,"&line_class=").concat(t.multiLineClassName);return m(e.state,n)},_=function(e){var t="/line_chart/getAllCustomTableAndInfo?mode=".concat(e.state.controlParams.currentMode);m(e.state,t).then((function(t){200===t["code"]?e.commit("updateCustomTableAndInfo",{customTables:t["data"]["table_name"],customTableInfo:t["data"]["table_info"]}):console.log(t["msg"])}))},A=function(e){var t="/line_chart/getAllDefaultTableAndInfo?mode=".concat(e.state.controlParams.currentMode);m(e.state,t).then((function(t){200===t["code"]?e.commit("updateDefaultTableAndInfo",{tables:t["data"]["table_name"],tableInfo:t["data"]["table_info"]}):console.log(t["msg"])}))}}.call(this,n("b639").Buffer)},ff60:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));n("d3b7"),n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("a15b"),n("a630"),n("3ca3");var a=!1;function r(e){for(var t=atob(e),n=new Array(t.length),a=0;a<t.length;a++)n[a]=t.charCodeAt(a);var r=new Uint8Array(n);return r}var i=null;function o(){var e=indexedDB.open("om_flag_db",1);return e.onupgradeneeded=function(e){var t=e.target.result;t.createObjectStore("om3_flag",{keyPath:"url"})},new Promise((function(t,n){e.onerror=function(e){console.log(e),console.error("indexdb error, which will case flag cannot store in local"),n("")},e.onsuccess=function(e){var n=e.target.result;i=n,a=!0,t("")}}))}function l(e,t){if(a){var n=i.transaction(["om3_flag"],"readwrite"),o=n.objectStore("om3_flag"),l={url:e,binaryData:r(t)};o.put(l)}else i()}function s(e){if(!a)return o(),!1;var t=i.transaction(["om3_flag"],"readonly"),n=t.objectStore("om3_flag");return new Promise((function(t,a){null===i&&t("");var r=n.get(e);r.onsuccess=function(e){var n=e.target.result;if(n){var a=n.binaryData,r=Array.from(a,(function(e){return String.fromCharCode(e)})).join(""),i=btoa(r);t(i)}else t("")},r.onerror=function(e){a("get flag fail")}}))}function c(){a&&i&&(i.close(),indexedDB.deleteDatabase("om_flag_db"),a=!1,console.warn("clear indexdb flag"))}}});
//# sourceMappingURL=app.ad95689e.js.map